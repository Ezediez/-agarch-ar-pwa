var e,t,a=Object.defineProperty,r=(e,t,r)=>(((e,t,r)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);import{j as s,S as n,O as i,C as o,a as l,T as c,D as d,P as u,R as m,b as p,c as f,$ as h,d as x,e as v,f as g,g as b,h as y,i as j,k as w,l as N,m as C,n as S,o as E,p as A,q as k,r as _,u as T,s as R,t as P,v as D,w as O,x as M,y as F,z as I,A as L,I as V,B as z,E as U,F as q,L as $,G as H,H as B,J as G,K as W,_ as K,M as Y,W as J,N as X,Q as Z,U as Q,V as ee,X as te,Y as ae,Z as re,a0 as se,a1 as ne,a2 as ie}from"./ui-359d2411.js";import{a as oe,r as le,R as ce,g as de,b as ue}from"./vendor-b41830e2.js";import{c as me}from"./supabase-cf6b982e.js";import{X as pe,G as fe,M as he,B as xe,F as ve,S as ge,m as be,A as ye,a as je,U as we,b as Ne,H as Ce,C as Se,c as Ee,d as Ae,E as ke,e as _e,f as Te,g as Re,h as Pe,L as De,i as Oe,j as Me,k as Fe,l as Ie,n as Le,o as Ve,p as ze,q as Ue,r as qe,s as $e,t as He,u as Be,v as Ge,w as We,x as Ke,y as Ye,z as Je,D as Xe,I as Ze,P as Qe,J as et,T as tt,K as at,W as rt,R as st,N as nt,O as it,Q as ot,V as lt,Y as ct,Z as dt,_ as ut,$ as mt,a0 as pt,a1 as ft,a2 as ht,a3 as xt,a4 as vt,a5 as gt,a6 as bt,a7 as yt,a8 as jt,a9 as wt,aa as Nt,ab as Ct,ac as St,ad as Et,ae as At,af as kt,ag as _t,ah as Tt,ai as Rt,aj as Pt,ak as Dt}from"./utils-c78149e8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ot,Mt,Ft={},It=oe;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Lt.apply(this,arguments)}Ft.createRoot=It.createRoot,Ft.hydrateRoot=It.hydrateRoot,(Mt=Ot||(Ot={})).Pop="POP",Mt.Push="PUSH",Mt.Replace="REPLACE";const Vt="popstate";function zt(e){return void 0===e&&(e={}),function(e,t,a,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:n=!1}=r,i=s.history,o=Ot.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(Lt({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=Ot.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:h.location,delta:t})}function m(e,t){o=Ot.Push;let r=Ht(h.location,e,t);a&&a(r,e),c=d()+1;let u=$t(r,c),m=h.createHref(r);try{i.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(m)}n&&l&&l({action:o,location:h.location,delta:1})}function p(e,t){o=Ot.Replace;let r=Ht(h.location,e,t);a&&a(r,e),c=d();let s=$t(r,c),u=h.createHref(r);i.replaceState(s,"",u),n&&l&&l({action:o,location:h.location,delta:0})}function f(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,a="string"==typeof e?e:Bt(e);return a=a.replace(/ $/,"%20"),Ut(t,"No window.location.(origin|href) available to create URL for href: "+a),new URL(a,t)}let h={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Vt,u),l=e,()=>{s.removeEventListener(Vt,u),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:p,go:e=>i.go(e)};return h}(function(e,t){let{pathname:a,search:r,hash:s}=e.location;return Ht("",{pathname:a,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Bt(t)},null,e)}function Ut(e,t){if(!1===e||null==e)throw new Error(t)}function qt(e,t){if(!e)try{throw new Error(t)}catch(a){}}function $t(e,t){return{usr:e.state,key:e.key,idx:t}}function Ht(e,t,a,r){return void 0===a&&(a=null),Lt({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Gt(t):t,{state:a,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Bt(e){let{pathname:t="/",search:a="",hash:r=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Gt(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Wt,Kt;function Yt(e,t,a){return void 0===a&&(a="/"),function(e,t,a,r){let s="string"==typeof t?Gt(t):t,n=ca(s.pathname||"/",a);if(null==n)return null;let i=Jt(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=la(n);o=ia(i[l],e,r)}return o}(e,t,a,!1)}function Jt(e,t,a,r){void 0===t&&(t=[]),void 0===a&&(a=[]),void 0===r&&(r="");let s=(e,s,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(Ut(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=pa([r,i.relativePath]),l=a.concat(i);e.children&&e.children.length>0&&(Ut(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Jt(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:na(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!=(a=e.path)&&a.includes("?"))for(let r of Xt(e.path))s(e,t,r);else s(e,t)}),t}function Xt(e){let t=e.split("/");if(0===t.length)return[];let[a,...r]=t,s=a.endsWith("?"),n=a.replace(/\?$/,"");if(0===r.length)return s?[n,""]:[n];let i=Xt(r.join("/")),o=[];return o.push(...i.map(e=>""===e?n:[n,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(Kt=Wt||(Wt={})).data="data",Kt.deferred="deferred",Kt.redirect="redirect",Kt.error="error";const Zt=/^:[\w-]+$/,Qt=3,ea=2,ta=1,aa=10,ra=-2,sa=e=>"*"===e;function na(e,t){let a=e.split("/"),r=a.length;return a.some(sa)&&(r+=ra),t&&(r+=ea),a.filter(e=>!sa(e)).reduce((e,t)=>e+(Zt.test(t)?Qt:""===t?ta:aa),r)}function ia(e,t,a){void 0===a&&(a=!1);let{routesMeta:r}=e,s={},n="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===n?t:t.slice(n.length)||"/",d=oa({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&a&&!r[r.length-1].route.index&&(d=oa({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:pa([n,d.pathname]),pathnameBase:fa(pa([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=pa([n,d.pathnameBase]))}return i}function oa(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,r]=function(e,t,a){void 0===t&&(t=!1);void 0===a&&(a=!0);qt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(r.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let n=new RegExp(s,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),s=t.match(a);if(!s)return null;let n=s[0],i=n.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,a)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[a]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[a];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function la(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return qt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ca(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=e.charAt(a);return r&&"/"!==r?null:e.slice(a)||"/"}function da(e,t,a,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+a+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ua(e,t){let a=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?a.map((e,t)=>t===a.length-1?e.pathname:e.pathnameBase):a.map(e=>e.pathnameBase)}function ma(e,t,a,r){let s;void 0===r&&(r=!1),"string"==typeof e?s=Gt(e):(s=Lt({},e),Ut(!s.pathname||!s.pathname.includes("?"),da("?","pathname","search",s)),Ut(!s.pathname||!s.pathname.includes("#"),da("#","pathname","hash",s)),Ut(!s.search||!s.search.includes("#"),da("#","search","hash",s)));let n,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)n=a;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}n=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:a,search:r="",hash:s=""}="string"==typeof e?Gt(e):e,n=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:n,search:ha(r),hash:xa(s)}}(s,n),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&a.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const pa=e=>e.join("/").replace(/\/\/+/g,"/"),fa=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ha=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",xa=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const va=["post","put","patch","delete"];new Set(va);const ga=["get",...va];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ba.apply(this,arguments)}new Set(ga);const ya=le.createContext(null),ja=le.createContext(null),wa=le.createContext(null),Na=le.createContext(null),Ca=le.createContext({outlet:null,matches:[],isDataRoute:!1}),Sa=le.createContext(null);function Ea(){return null!=le.useContext(Na)}function Aa(){return Ea()||Ut(!1),le.useContext(Na).location}function ka(e){le.useContext(wa).static||le.useLayoutEffect(e)}function _a(){let{isDataRoute:e}=le.useContext(Ca);return e?function(){let{router:e}=function(){let e=le.useContext(ya);return e||Ut(!1),e}(Ia.UseNavigateStable),t=Va(La.UseNavigateStable),a=le.useRef(!1);return ka(()=>{a.current=!0}),le.useCallback(function(r,s){void 0===s&&(s={}),a.current&&("number"==typeof r?e.navigate(r):e.navigate(r,ba({fromRouteId:t},s)))},[e,t])}():function(){Ea()||Ut(!1);let e=le.useContext(ya),{basename:t,future:a,navigator:r}=le.useContext(wa),{matches:s}=le.useContext(Ca),{pathname:n}=Aa(),i=JSON.stringify(ua(s,a.v7_relativeSplatPath)),o=le.useRef(!1);return ka(()=>{o.current=!0}),le.useCallback(function(a,s){if(void 0===s&&(s={}),!o.current)return;if("number"==typeof a)return void r.go(a);let l=ma(a,JSON.parse(i),n,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:pa([t,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)},[t,r,i,n,e])}()}const Ta=le.createContext(null);function Ra(e,t){let{relative:a}=void 0===t?{}:t,{future:r}=le.useContext(wa),{matches:s}=le.useContext(Ca),{pathname:n}=Aa(),i=JSON.stringify(ua(s,r.v7_relativeSplatPath));return le.useMemo(()=>ma(e,JSON.parse(i),n,"path"===a),[e,i,n,a])}function Pa(e,t){return function(e,t,a,r){Ea()||Ut(!1);let{navigator:s}=le.useContext(wa),{matches:n}=le.useContext(Ca),i=n[n.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=Aa();if(t){var u;let e="string"==typeof t?Gt(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||Ut(!1),c=e}else c=d;let m=c.pathname||"/",p=m;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=Yt(e,{pathname:p}),h=function(e,t,a,r){var s;void 0===t&&(t=[]);void 0===a&&(a=null);void 0===r&&(r=null);if(null==e){var n;if(!a)return null;if(a.errors)e=a.matches;else{if(!(null!=(n=r)&&n.v7_partialHydration&&0===t.length&&!a.initialized&&a.matches.length>0))return null;e=a.matches}}let i=e,o=null==(s=a)?void 0:s.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||Ut(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(a&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=a,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,r,s)=>{let n,d=!1,u=null,m=null;var p;a&&(n=o&&r.route.id?o[r.route.id]:void 0,u=r.route.errorElement||Oa,l&&(c<0&&0===s?(p="route-fallback",!1||za[p]||(za[p]=!0),d=!0,m=null):c===s&&(d=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,s+1)),h=()=>{let t;return t=n?u:d?m:r.route.Component?le.createElement(r.route.Component,null):r.route.element?r.route.element:e,le.createElement(Fa,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=a},children:t})};return a&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?le.createElement(Ma,{location:a.location,revalidation:a.revalidation,component:u,error:n,children:h(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):h()},null)}(f&&f.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:pa([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:pa([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),n,a,r);if(t&&h)return le.createElement(Na.Provider,{value:{location:ba({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ot.Pop}},h);return h}(e,t)}function Da(){let e=function(){var e;let t=le.useContext(Sa),a=function(){let e=le.useContext(ja);return e||Ut(!1),e}(La.UseRouteError),r=Va(La.UseRouteError);if(void 0!==t)return t;return null==(e=a.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},t),a?le.createElement("pre",{style:r},a):null,null)}const Oa=le.createElement(Da,null);class Ma extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?le.createElement(Ca.Provider,{value:this.props.routeContext},le.createElement(Sa.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fa(e){let{routeContext:t,match:a,children:r}=e,s=le.useContext(ya);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),le.createElement(Ca.Provider,{value:t},r)}var Ia=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ia||{}),La=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(La||{});function Va(e){let t=function(){let e=le.useContext(Ca);return e||Ut(!1),e}(),a=t.matches[t.matches.length-1];return a.route.id||Ut(!1),a.route.id}const za={};function Ua(e){let{to:t,replace:a,state:r,relative:s}=e;Ea()||Ut(!1);let{future:n,static:i}=le.useContext(wa),{matches:o}=le.useContext(Ca),{pathname:l}=Aa(),c=_a(),d=ma(t,ua(o,n.v7_relativeSplatPath),l,"path"===s),u=JSON.stringify(d);return le.useEffect(()=>c(JSON.parse(u),{replace:a,state:r,relative:s}),[c,u,s,a,r]),null}function qa(e){return function(e){let t=le.useContext(Ca).outlet;return t?le.createElement(Ta.Provider,{value:e},t):t}(e.context)}function $a(e){Ut(!1)}function Ha(e){let{basename:t="/",children:a=null,location:r,navigationType:s=Ot.Pop,navigator:n,static:i=!1,future:o}=e;Ea()&&Ut(!1);let l=t.replace(/^\/*/,"/"),c=le.useMemo(()=>({basename:l,navigator:n,static:i,future:ba({v7_relativeSplatPath:!1},o)}),[l,o,n,i]);"string"==typeof r&&(r=Gt(r));let{pathname:d="/",search:u="",hash:m="",state:p=null,key:f="default"}=r,h=le.useMemo(()=>{let e=ca(d,l);return null==e?null:{location:{pathname:e,search:u,hash:m,state:p,key:f},navigationType:s}},[l,d,u,m,p,f,s]);return null==h?null:le.createElement(wa.Provider,{value:c},le.createElement(Na.Provider,{children:a,value:h}))}function Ba(e){let{children:t,location:a}=e;return Pa(Ga(t),a)}function Ga(e,t){void 0===t&&(t=[]);let a=[];return le.Children.forEach(e,(e,r)=>{if(!le.isValidElement(e))return;let s=[...t,r];if(e.type===le.Fragment)return void a.push.apply(a,Ga(e.props.children,s));e.type!==$a&&Ut(!1),e.props.index&&e.props.children&&Ut(!1);let n={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=Ga(e.props.children,s)),a.push(n)}),a}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Wa.apply(this,arguments)}function Ka(e,t){if(null==e)return{};var a,r,s={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}new Promise(()=>{});const Ya=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ja=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(zf){}const Xa=le.createContext({isTransitioning:!1}),Za=ce.startTransition;function Qa(e){let{basename:t,children:a,future:r,window:s}=e,n=le.useRef();null==n.current&&(n.current=zt({window:s,v5Compat:!0}));let i=n.current,[o,l]=le.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=le.useCallback(e=>{c&&Za?Za(()=>l(e)):l(e)},[l,c]);return le.useLayoutEffect(()=>i.listen(d),[i,d]),le.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[r]),le.createElement(Ha,{basename:t,children:a,location:o.location,navigationType:o.action,navigator:i,future:r})}const er="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,tr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=le.forwardRef(function(e,t){let a,{onClick:r,relative:s,reloadDocument:n,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u}=e,m=Ka(e,Ya),{basename:p}=le.useContext(wa),f=!1;if("string"==typeof c&&tr.test(c)&&(a=c,er))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),a=ca(t.pathname,p);t.origin===e.origin&&null!=a?c=a+t.search+t.hash:f=!0}catch(zf){}let h=function(e,t){let{relative:a}=void 0===t?{}:t;Ea()||Ut(!1);let{basename:r,navigator:s}=le.useContext(wa),{hash:n,pathname:i,search:o}=Ra(e,{relative:a}),l=i;return"/"!==r&&(l="/"===i?r:pa([r,i])),s.createHref({pathname:l,search:o,hash:n})}(c,{relative:s}),x=function(e,t){let{target:a,replace:r,state:s,preventScrollReset:n,relative:i,viewTransition:o}=void 0===t?{}:t,l=_a(),c=Aa(),d=Ra(e,{relative:i});return le.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,a)){t.preventDefault();let a=void 0!==r?r:Bt(c)===Bt(d);l(e,{replace:a,state:s,preventScrollReset:n,relative:i,viewTransition:o})}},[c,l,d,r,s,a,e,n,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:u});return le.createElement("a",Wa({},m,{href:a||h,onClick:f||n?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:l}))}),rr=le.forwardRef(function(e,t){let{"aria-current":a="page",caseSensitive:r=!1,className:s="",end:n=!1,style:i,to:o,viewTransition:l,children:c}=e,d=Ka(e,Ja),u=Ra(o,{relative:d.relative}),m=Aa(),p=le.useContext(ja),{navigator:f,basename:h}=le.useContext(wa),x=null!=p&&function(e,t){void 0===t&&(t={});let a=le.useContext(Xa);null==a&&Ut(!1);let{basename:r}=function(){let e=le.useContext(ya);return e||Ut(!1),e}(sr.useViewTransitionState),s=Ra(e,{relative:t.relative});if(!a.isTransitioning)return!1;let n=ca(a.currentLocation.pathname,r)||a.currentLocation.pathname,i=ca(a.nextLocation.pathname,r)||a.nextLocation.pathname;return null!=oa(s.pathname,i)||null!=oa(s.pathname,n)}(u)&&!0===l,v=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,g=m.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(g=g.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&h&&(b=ca(b,h)||b);const y="/"!==v&&v.endsWith("/")?v.length-1:v.length;let j,w=g===v||!n&&g.startsWith(v)&&"/"===g.charAt(y),N=null!=b&&(b===v||!n&&b.startsWith(v)&&"/"===b.charAt(v.length)),C={isActive:w,isPending:N,isTransitioning:x},S=w?a:void 0;j="function"==typeof s?s(C):[s,w?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof i?i(C):i;return le.createElement(ar,Wa({},d,{"aria-current":S,className:j,ref:t,style:E,to:o,viewTransition:l}),"function"==typeof c?c(C):c)});var sr,nr,ir,or;(nr=sr||(sr={})).UseScrollRestoration="useScrollRestoration",nr.UseSubmit="useSubmit",nr.UseSubmitFetcher="useSubmitFetcher",nr.UseFetcher="useFetcher",nr.useViewTransitionState="useViewTransitionState",(or=ir||(ir={})).UseFetcher="useFetcher",or.UseFetchers="useFetchers",or.UseScrollRestoration="useScrollRestoration";const lr=me("https://ygkhhpxejrajyeshwief.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlna2hocHhlanJhanllc2h3aWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyODM5NjcsImV4cCI6MjA2Nzg1OTk2N30.6Kss7hKJfmtaf61OqwmakuXCpn3MpSvDDPyIZKCd2Tc");let cr;const dr=new Uint8Array(16);function ur(){if(!cr&&(cr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cr(dr)}const mr=[];for(let Uf=0;Uf<256;++Uf)mr.push((Uf+256).toString(16).slice(1));const pr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function fr(e,t,a){if(pr.randomUUID&&!t&&!e)return pr.randomUUID();const r=(e=e||{}).random||(e.rng||ur)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=r[e];return t}return function(e,t=0){return mr[e[t+0]]+mr[e[t+1]]+mr[e[t+2]]+mr[e[t+3]]+"-"+mr[e[t+4]]+mr[e[t+5]]+"-"+mr[e[t+6]]+mr[e[t+7]]+"-"+mr[e[t+8]]+mr[e[t+9]]+"-"+mr[e[t+10]]+mr[e[t+11]]+mr[e[t+12]]+mr[e[t+13]]+mr[e[t+14]]+mr[e[t+15]]}(r)}const hr=le.createContext(),xr=le.createContext(),vr=(e,t)=>{switch(t.type){case"ADD_TOAST":return[...e,{...t.toast,id:fr()}];case"REMOVE_TOAST":return e.filter(e=>e.id!==t.id);default:throw new Error(`Unhandled action type: ${t.type}`)}};function gr({children:e}){const[t,a]=le.useReducer(vr,[]);return s.jsx(hr.Provider,{value:t,children:s.jsx(xr.Provider,{value:a,children:e})})}function br(){const e=le.useContext(hr),t=le.useContext(xr);if(void 0===t)throw new Error("useToast must be used within a ToastProvider");return{toasts:e,toast:le.useCallback(({title:e,description:a,variant:r,duration:s=5e3})=>{const n=fr();t({type:"ADD_TOAST",toast:{id:n,title:e,description:a,variant:r,duration:s}}),s&&setTimeout(()=>{t({type:"REMOVE_TOAST",id:n})},s)},[t]),dismiss:e=>{t({type:"REMOVE_TOAST",id:e})}}}const yr=le.createContext(null),jr=({children:e})=>{const{toast:t}=br(),[a,r]=le.useState(null),[n,i]=le.useState(null),[o,l]=le.useState(null),[c,d]=le.useState(!0),u=le.useCallback(async e=>{if(!e)return l(null),null;try{d(!0);const{data:t,error:a,status:r}=await lr.from("profiles").select("*").eq("id",e.id).single();if(a&&406!==r)throw a;return l(t||null),t||null}catch(a){return t({variant:"destructive",title:"Error al cargar el perfil",description:"Hubo un problema al obtener la información de tu perfil. Por favor, intenta de nuevo más tarde."}),l(null),null}finally{d(!1)}},[t]);le.useEffect(()=>{d(!0);const{data:{subscription:e}}=lr.auth.onAuthStateChange(async(e,t)=>{r(t);const a=(null==t?void 0:t.user)??null;i(a),a?await u(a):(l(null),d(!1))});return()=>{e.unsubscribe()}},[u]);const m=le.useCallback(async()=>{n&&await u(n)},[n,u]),p=async()=>{await lr.auth.signOut()},f={session:a,user:n,profile:o,loading:c,signUp:async e=>{const{email:t,password:a,...r}=e,{data:s,error:n}=await lr.auth.signUp({email:t,password:a,options:{data:{...r,is_verified:!0,role:"user"}}});return{data:s,error:n}},signIn:async(e,a)=>{const{data:r,error:s}=await lr.auth.signInWithPassword({email:e,password:a});return s&&t({variant:"destructive",title:"Error de inicio de sesión",description:s.message}),{data:r,error:s}},signOut:p,refreshProfile:m,deleteAccount:async()=>{const{error:e}=await lr.functions.invoke("delete-user");e?t({variant:"destructive",title:"Error al eliminar la cuenta",description:e.message}):(t({title:"Cuenta eliminada",description:"Tu cuenta ha sido eliminada permanentemente."}),await p())}};return s.jsx(yr.Provider,{value:f,children:!c&&e})},wr=()=>{const e=le.useContext(yr);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};var Nr="undefined"!=typeof Element,Cr="function"==typeof Map,Sr="function"==typeof Set,Er="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ar(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var a,r,s,n;if(Array.isArray(e)){if((a=e.length)!=t.length)return!1;for(r=a;0!==r--;)if(!Ar(e[r],t[r]))return!1;return!0}if(Cr&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;for(n=e.entries();!(r=n.next()).done;)if(!Ar(r.value[1],t.get(r.value[0])))return!1;return!0}if(Sr&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Er&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((a=e.length)!=t.length)return!1;for(r=a;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((a=(s=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=a;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;if(Nr&&e instanceof Element)return!1;for(r=a;0!==r--;)if(("_owner"!==s[r]&&"__v"!==s[r]&&"__o"!==s[r]||!e.$$typeof)&&!Ar(e[s[r]],t[s[r]]))return!1;return!0}return e!=e&&t!=t}const kr=de(function(e,t){try{return Ar(e,t)}catch(a){if((a.message||"").match(/stack|recursion/i))return!1;throw a}});const _r=de(function(e,t,a,r,s,n,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[a,r,s,n,i,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}});const Tr=de(function(e,t,a,r){var s=a?a.call(r,e,t):void 0;if(void 0!==s)return!!s;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<n.length;l++){var c=n[l];if(!o(c))return!1;var d=e[c],u=t[c];if(!1===(s=a?a.call(r,d,u,c):void 0)||void 0===s&&d!==u)return!1}return!0});var Rr=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Rr||{}),Pr={rel:["amphtml","canonical","alternate"]},Dr={type:["application/ld+json"]},Or={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Mr=Object.values(Rr),Fr={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ir=Object.entries(Fr).reduce((e,[t,a])=>(e[a]=t,e),{}),Lr="data-rh",Vr="defaultTitle",zr="defer",Ur="encodeSpecialCharacters",qr="onChangeClientState",$r="titleTemplate",Hr="prioritizeSeoTags",Br=(e,t)=>{for(let a=e.length-1;a>=0;a-=1){const r=e[a];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},Gr=e=>{let t=Br(e,"title");const a=Br(e,$r);if(Array.isArray(t)&&(t=t.join("")),a&&t)return a.replace(/%s/g,()=>t);const r=Br(e,Vr);return t||r||void 0},Wr=e=>Br(e,qr)||(()=>{}),Kr=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),Yr=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,a)=>{if(!t.length){const r=Object.keys(a);for(let s=0;s<r.length;s+=1){const n=r[s].toLowerCase();if(-1!==e.indexOf(n)&&a[n])return t.concat(a)}}return t},[]),Jr=(e,t,a)=>{const r={};return a.filter(t=>!!Array.isArray(t[e])||(void 0!==t[e]&&(t[e],console&&console.warn),!1)).map(t=>t[e]).reverse().reduce((e,a)=>{const s={};a.filter(e=>{let a;const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const s=n[r],i=s.toLowerCase();-1===t.indexOf(i)||"rel"===a&&"canonical"===e[a].toLowerCase()||"rel"===i&&"stylesheet"===e[i].toLowerCase()||(a=i),-1===t.indexOf(s)||"innerHTML"!==s&&"cssText"!==s&&"itemprop"!==s||(a=s)}if(!a||!e[a])return!1;const i=e[a].toLowerCase();return r[a]||(r[a]={}),s[a]||(s[a]={}),!r[a][i]&&(s[a][i]=!0,!0)}).reverse().forEach(t=>e.push(t));const n=Object.keys(s);for(let t=0;t<n.length;t+=1){const e=n[t],a={...r[e],...s[e]};r[e]=a}return e},[]).reverse()},Xr=(e,t)=>{if(Array.isArray(e)&&e.length)for(let a=0;a<e.length;a+=1){if(e[a][t])return!0}return!1},Zr=e=>Array.isArray(e)?e.join(""):e,Qr=(e,t)=>Array.isArray(e)?e.reduce((e,a)=>(((e,t)=>{const a=Object.keys(e);for(let r=0;r<a.length;r+=1)if(t[a[r]]&&t[a[r]].includes(e[a[r]]))return!0;return!1})(a,t)?e.priority.push(a):e.default.push(a),e),{priority:[],default:[]}):{default:e,priority:[]},es=(e,t)=>({...e,[t]:void 0}),ts=["noscript","script","style"],as=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),rs=e=>Object.keys(e).reduce((t,a)=>{const r=void 0!==e[a]?`${a}="${e[a]}"`:`${a}`;return t?`${t} ${r}`:r},""),ss=(e,t={})=>Object.keys(e).reduce((t,a)=>(t[Fr[a]||a]=e[a],t),t),ns=(e,t)=>t.map((t,a)=>{const r={key:a,[Lr]:!0};return Object.keys(t).forEach(e=>{const a=Fr[e]||e;if("innerHTML"===a||"cssText"===a){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[a]=t[e]}),ue.createElement(e,r)}),is=(e,t,a=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,a)=>{const r=ss(a,{key:t,[Lr]:!0});return[ue.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,a,r)=>{const s=rs(a),n=Zr(t);return s?`<${e} ${Lr}="true" ${s}>${as(n,r)}</${e}>`:`<${e} ${Lr}="true">${as(n,r)}</${e}>`})(e,t.title,t.titleAttributes,a)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ss(t),toString:()=>rs(t)};default:return{toComponent:()=>ns(e,t),toString:()=>((e,t,a=!0)=>t.reduce((t,r)=>{const s=r,n=Object.keys(s).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===s[t]?t:`${t}="${as(s[t],a)}"`;return e?`${e} ${r}`:r},""),i=s.innerHTML||s.cssText||"",o=-1===ts.indexOf(e);return`${t}<${e} ${Lr}="true" ${n}${o?"/>":`>${i}</${e}>`}`},""))(e,t,a)}}},os=e=>{const{baseTag:t,bodyAttributes:a,encode:r=!0,htmlAttributes:s,noscriptTags:n,styleTags:i,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:d,metaTags:u,scriptTags:m}=(({metaTags:e,linkTags:t,scriptTags:a,encode:r})=>{const s=Qr(e,Or),n=Qr(t,Pr),i=Qr(a,Dr);return{priorityMethods:{toComponent:()=>[...ns("meta",s.priority),...ns("link",n.priority),...ns("script",i.priority)],toString:()=>`${is("meta",s.priority,r)} ${is("link",n.priority,r)} ${is("script",i.priority,r)}`},metaTags:s.default,linkTags:n.default,scriptTags:i.default}})(e)),{priority:p,base:is("base",t,r),bodyAttributes:is("bodyAttributes",a,r),htmlAttributes:is("htmlAttributes",s,r),link:is("link",d,r),meta:is("meta",u,r),noscript:is("noscript",n,r),script:is("script",m,r),style:is("style",i,r),title:is("title",{title:o,titleAttributes:l},r)}},ls=[],cs=!("undefined"==typeof window||!window.document||!window.document.createElement),ds=class{constructor(e,t){r(this,"instances",[]),r(this,"canUseDOM",cs),r(this,"context"),r(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?ls:this.instances,add:e=>{(this.canUseDOM?ls:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?ls:this.instances).indexOf(e);(this.canUseDOM?ls:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=os({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},us=ue.createContext({}),ms=(e=class extends le.Component{constructor(t){super(t),r(this,"helmetData"),this.helmetData=new ds(this.props.context||{},e.canUseDOM)}render(){return ue.createElement(us.Provider,{value:this.helmetData.value},this.props.children)}},r(e,"canUseDOM",cs),e),ps=(e,t)=>{const a=document.head||document.querySelector("head"),r=a.querySelectorAll(`${e}[${Lr}]`),s=[].slice.call(r),n=[];let i;return t&&t.length&&t.forEach(t=>{const a=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)a.innerHTML=t.innerHTML;else if("cssText"===e)a.styleSheet?a.styleSheet.cssText=t.cssText:a.appendChild(document.createTextNode(t.cssText));else{const r=e,s=void 0===t[r]?"":t[r];a.setAttribute(e,s)}a.setAttribute(Lr,"true"),s.some((e,t)=>(i=t,a.isEqualNode(e)))?s.splice(i,1):n.push(a)}),s.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),n.forEach(e=>a.appendChild(e)),{oldTags:s,newTags:n}},fs=(e,t)=>{const a=document.getElementsByTagName(e)[0];if(!a)return;const r=a.getAttribute(Lr),s=r?r.split(","):[],n=[...s],i=Object.keys(t);for(const o of i){const e=t[o]||"";a.getAttribute(o)!==e&&a.setAttribute(o,e),-1===s.indexOf(o)&&s.push(o);const r=n.indexOf(o);-1!==r&&n.splice(r,1)}for(let o=n.length-1;o>=0;o-=1)a.removeAttribute(n[o]);s.length===n.length?a.removeAttribute(Lr):a.getAttribute(Lr)!==i.join(",")&&a.setAttribute(Lr,i.join(","))},hs=(e,t)=>{const{baseTag:a,bodyAttributes:r,htmlAttributes:s,linkTags:n,metaTags:i,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:u,titleAttributes:m}=e;fs("body",r),fs("html",s),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=Zr(e)),fs("title",t)})(u,m);const p={baseTag:ps("base",a),linkTags:ps("link",n),metaTags:ps("meta",i),noscriptTags:ps("noscript",o),scriptTags:ps("script",c),styleTags:ps("style",d)},f={},h={};Object.keys(p).forEach(e=>{const{newTags:t,oldTags:a}=p[e];t.length&&(f[e]=t),a.length&&(h[e]=p[e].oldTags)}),t&&t(),l(e,f,h)},xs=null,vs=e=>{xs&&cancelAnimationFrame(xs),e.defer?xs=requestAnimationFrame(()=>{hs(e,()=>{xs=null})}):(hs(e),xs=null)},gs=class extends le.Component{constructor(){super(...arguments),r(this,"rendered",!1)}shouldComponentUpdate(e){return!Tr(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let a=null;const r=(s=e.get().map(e=>{const t={...e.props};return delete t.context,t}),{baseTag:Yr(["href"],s),bodyAttributes:Kr("bodyAttributes",s),defer:Br(s,zr),encode:Br(s,Ur),htmlAttributes:Kr("htmlAttributes",s),linkTags:Jr("link",["rel","href"],s),metaTags:Jr("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:Jr("noscript",["innerHTML"],s),onChangeClientState:Wr(s),scriptTags:Jr("script",["src","innerHTML"],s),styleTags:Jr("style",["cssText"],s),title:Gr(s),titleAttributes:Kr("titleAttributes",s),prioritizeSeoTags:Xr(s,Hr)});var s;ms.canUseDOM?vs(r):os&&(a=os(r)),t(a)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},bs=(t=class extends le.Component{shouldComponentUpdate(e){return!kr(es(this.props,"helmetData"),es(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,a,r){return{...t,[e.type]:[...t[e.type]||[],{...a,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,a,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...a}};case"body":return{...t,bodyAttributes:{...a}};case"html":return{...t,htmlAttributes:{...a}};default:return{...t,[e.type]:{...a}}}}mapArrayTypeChildrenToProps(e,t){let a={...t};return Object.keys(e).forEach(t=>{a={...a,[t]:e[t]}}),a}warnOnInvalidChildren(e,t){return _r(Mr.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Mr.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),_r(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let a={};return ue.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:r,...s}=e.props,n=Object.keys(s).reduce((e,t)=>(e[Ir[t]||t]=s[t],e),{});let{type:i}=e;switch("symbol"==typeof i?i=i.toString():this.warnOnInvalidChildren(e,r),i){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":a=this.flattenArrayTypeChildren(e,a,n,r);break;default:t=this.mapObjectTypeChildren(e,t,n,r)}}),this.mapArrayTypeChildrenToProps(a,t)}render(){const{children:e,...t}=this.props;let a={...t},{helmetData:r}=t;if(e&&(a=this.mapChildrenToProps(e,a)),r&&!(r instanceof ds)){r=new ds(r.context,!0),delete a.helmetData}return r?ue.createElement(gs,{...a,context:r.value}):ue.createElement(us.Consumer,null,e=>ue.createElement(gs,{...a,context:e}))}},r(t,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t);function ys(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(a=ys(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function js(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=ys(e))&&(r&&(r+=" "),r+=t);return r}const ws=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Ns=js,Cs=(e,t)=>a=>{var r;if(null==(null==t?void 0:t.variants))return Ns(e,null==a?void 0:a.class,null==a?void 0:a.className);const{variants:s,defaultVariants:n}=t,i=Object.keys(s).map(e=>{const t=null==a?void 0:a[e],r=null==n?void 0:n[e];if(null===t)return null;const i=ws(t)||ws(r);return s[e][i]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...n,...o}[t]):{...n,...o}[t]===a})?[...e,a,r]:e},[]);return Ns(e,i,l,null==a?void 0:a.class,null==a?void 0:a.className)};function Ss(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=Es(e))&&(r&&(r+=" "),r+=t);return r}function Es(e){if("string"==typeof e)return e;for(var t,a="",r=0;r<e.length;r++)e[r]&&(t=Es(e[r]))&&(a&&(a+=" "),a+=t);return a}function As(e){var t=function(e){var t=e.theme,a=e.prefix,r={nextPart:new Map,validators:[]},s=function(e,t){if(!t)return e;return e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){var a=e[0],r=e[1];return[t+a,r]})):e})]})}(Object.entries(e.classGroups),a);return s.forEach(function(e){var a=e[0];Ts(e[1],r,a,t)}),r}(e),a=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,s=void 0===r?{}:r;return{getClassGroupId:function(e){var a=e.split("-");return""===a[0]&&1!==a.length&&a.shift(),ks(a,t)||function(e){if(_s.test(e)){var t=_s.exec(e)[1],a=null==t?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}}(e)},getConflictingClassGroupIds:function(e,t){var r=a[e]||[];return t&&s[e]?[].concat(r,s[e]):r}}}function ks(e,t){var a;if(0===e.length)return t.classGroupId;var r=e[0],s=t.nextPart.get(r),n=s?ks(e.slice(1),s):void 0;if(n)return n;if(0!==t.validators.length){var i=e.join("-");return null==(a=t.validators.find(function(e){return(0,e.validator)(i)}))?void 0:a.classGroupId}}var _s=/^\[(.+)\]$/;function Ts(e,t,a,r){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void Ts(e(r),t,a,r):void t.validators.push({validator:e,classGroupId:a});Object.entries(e).forEach(function(e){var s=e[0];Ts(e[1],Rs(t,s),a,r)})}else{(""===e?t:Rs(t,e)).classGroupId=a}})}function Rs(e,t){var a=e;return t.split("-").forEach(function(e){a.nextPart.has(e)||a.nextPart.set(e,{nextPart:new Map,validators:[]}),a=a.nextPart.get(e)}),a}function Ps(e){if(e<1)return{get:function(){},set:function(){}};var t=0,a=new Map,r=new Map;function s(s,n){a.set(s,n),++t>e&&(t=0,r=a,a=new Map)}return{get:function(e){var t=a.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set:function(e,t){a.has(e)?a.set(e,t):s(e,t)}}}function Ds(e){var t=e.separator||":",a=1===t.length,r=t[0],s=t.length;return function(e){for(var n,i=[],o=0,l=0,c=0;c<e.length;c++){var d=e[c];if(0===o){if(d===r&&(a||e.slice(c,c+s)===t)){i.push(e.slice(l,c)),l=c+s;continue}if("/"===d){n=c;continue}}"["===d?o++:"]"===d&&o--}var u=0===i.length?e:e.substring(l),m=u.startsWith("!");return{modifiers:i,hasImportantModifier:m,baseClassName:m?u.substring(1):u,maybePostfixModifierPosition:n&&n>l?n-l:void 0}}}var Os=/\s+/;function Ms(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r,s,n,i=function(e){var a=t[0],l=t.slice(1).reduce(function(e,t){return t(e)},a());return r=function(e){return{cache:Ps(e.cacheSize),splitModifiers:Ds(e),...As(e)}}(l),s=r.cache.get,n=r.cache.set,i=o,o(e)};function o(e){var t=s(e);if(t)return t;var a=function(e,t){var a=t.splitModifiers,r=t.getClassGroupId,s=t.getConflictingClassGroupIds,n=new Set;return e.trim().split(Os).map(function(e){var t=a(e),s=t.modifiers,n=t.hasImportantModifier,i=t.baseClassName,o=t.maybePostfixModifierPosition,l=r(o?i.substring(0,o):i),c=Boolean(o);if(!l){if(!o)return{isTailwindClass:!1,originalClassName:e};if(!(l=r(i)))return{isTailwindClass:!1,originalClassName:e};c=!1}var d=function(e){if(e.length<=1)return e;var t=[],a=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,a.sort().concat([e])),a=[]):a.push(e)}),t.push.apply(t,a.sort()),t}(s).join(":");return{isTailwindClass:!0,modifierId:n?d+"!":d,classGroupId:l,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,a=e.classGroupId,r=e.hasPostfixModifier,i=t+a;return!n.has(i)&&(n.add(i),s(a,r).forEach(function(e){return n.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}(e,r);return n(e,a),a}return function(){return i(Ss.apply(null,arguments))}}function Fs(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var Is=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ls=/^\d+\/\d+$/,Vs=new Set(["px","full","screen"]),zs=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Us=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qs=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function $s(e){return Ys(e)||Vs.has(e)||Ls.test(e)||Hs(e)}function Hs(e){return an(e,"length",rn)}function Bs(e){return an(e,"size",sn)}function Gs(e){return an(e,"position",sn)}function Ws(e){return an(e,"url",nn)}function Ks(e){return an(e,"number",Ys)}function Ys(e){return!Number.isNaN(Number(e))}function Js(e){return e.endsWith("%")&&Ys(e.slice(0,-1))}function Xs(e){return on(e)||an(e,"number",on)}function Zs(e){return Is.test(e)}function Qs(){return!0}function en(e){return zs.test(e)}function tn(e){return an(e,"",ln)}function an(e,t,a){var r=Is.exec(e);return!!r&&(r[1]?r[1]===t:a(r[2]))}function rn(e){return Us.test(e)}function sn(){return!1}function nn(e){return e.startsWith("url(")}function on(e){return Number.isInteger(Number(e))}function ln(e){return qs.test(e)}function cn(){var e=Fs("colors"),t=Fs("spacing"),a=Fs("blur"),r=Fs("brightness"),s=Fs("borderColor"),n=Fs("borderRadius"),i=Fs("borderSpacing"),o=Fs("borderWidth"),l=Fs("contrast"),c=Fs("grayscale"),d=Fs("hueRotate"),u=Fs("invert"),m=Fs("gap"),p=Fs("gradientColorStops"),f=Fs("gradientColorStopPositions"),h=Fs("inset"),x=Fs("margin"),v=Fs("opacity"),g=Fs("padding"),b=Fs("saturate"),y=Fs("scale"),j=Fs("sepia"),w=Fs("skew"),N=Fs("space"),C=Fs("translate"),S=function(){return["auto",Zs,t]},E=function(){return[Zs,t]},A=function(){return["",$s]},k=function(){return["auto",Ys,Zs]},_=function(){return["","0",Zs]},T=function(){return[Ys,Ks]},R=function(){return[Ys,Zs]};return{cacheSize:500,theme:{colors:[Qs],spacing:[$s],blur:["none","",en,Zs],brightness:T(),borderColor:[e],borderRadius:["none","","full",en,Zs],borderSpacing:E(),borderWidth:A(),contrast:T(),grayscale:_(),hueRotate:R(),invert:_(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[Js,Hs],inset:S(),margin:S(),opacity:T(),padding:E(),saturate:T(),scale:T(),sepia:_(),skew:R(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Zs]}],container:["container"],columns:[{columns:[en]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Zs])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xs]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Zs]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",Xs]}],"grid-cols":[{"grid-cols":[Qs]}],"col-start-end":[{col:["auto",{span:["full",Xs]},Zs]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Qs]}],"row-start-end":[{row:["auto",{span:[Xs]},Zs]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Zs]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Zs]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Zs,t]}],"min-w":[{"min-w":["min","max","fit",Zs,$s]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[en]},en,Zs]}],h:[{h:[Zs,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Zs,$s]}],"max-h":[{"max-h":[Zs,t,"min","max","fit"]}],"font-size":[{text:["base",en,Hs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ks]}],"font-family":[{font:[Qs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Zs]}],"line-clamp":[{"line-clamp":["none",Ys,Ks]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zs,$s]}],"list-image":[{"list-image":["none",Zs]}],"list-style-type":[{list:["none","disc","decimal",Zs]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",$s]}],"underline-offset":[{"underline-offset":["auto",Zs,$s]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Zs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Zs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Gs])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Bs]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ws]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[Zs,$s]}],"outline-w":[{outline:[$s]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[$s]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",en,tn]}],"shadow-color":[{shadow:[Qs]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",en,Zs]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Zs]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Zs]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Zs]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[Xs,Zs]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Zs]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Zs]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Zs]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$s,Ks]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var dn=Ms(cn);function un(...e){return dn(js(e))}const mn=Cs("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),pn=ue.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...i},o)=>{const l=r?n:"button";return s.jsx(l,{className:un(mn({variant:t,size:a,className:e})),ref:o,...i})});pn.displayName="Button";const fn=m,hn=p,xn=l,vn=u,gn=ue.forwardRef(({className:e,...t},a)=>s.jsx(i,{className:un("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));gn.displayName=i.displayName;const bn=Cs("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-slate-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),yn=ue.forwardRef(({side:e="right",className:t,children:a,...r},n)=>s.jsxs(vn,{children:[s.jsx(gn,{}),s.jsxs(o,{ref:n,className:un(bn({side:e}),t),...r,children:[a,s.jsxs(l,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800",children:[s.jsx(pe,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yn.displayName=o.displayName;ue.forwardRef(({className:e,...t},a)=>s.jsx(c,{ref:a,className:un("text-lg font-semibold text-slate-950 dark:text-slate-50",e),...t})).displayName=c.displayName;ue.forwardRef(({className:e,...t},a)=>s.jsx(d,{ref:a,className:un("text-sm text-slate-500 dark:text-slate-400",e),...t})).displayName=d.displayName;var jn=e=>"checkbox"===e.type,wn=e=>e instanceof Date,Nn=e=>null==e;const Cn=e=>"object"==typeof e;var Sn=e=>!Nn(e)&&!Array.isArray(e)&&Cn(e)&&!wn(e),En="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function An(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(En&&(e instanceof Blob||e instanceof FileList)||!a&&!Sn(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return Sn(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=An(e[a]));else t=e}return t}var kn=e=>Array.isArray(e)?e.filter(Boolean):[],_n=e=>void 0===e,Tn=(e,t,a)=>{if(!t||!Sn(e))return a;const r=kn(t.split(/[,[\].]+?/)).reduce((e,t)=>Nn(e)?e:e[t],e);return _n(r)||r===e?_n(e[t])?a:e[t]:r},Rn=e=>"boolean"==typeof e;const Pn="blur",Dn="focusout",On="onBlur",Mn="onChange",Fn="onSubmit",In="onTouched",Ln="all",Vn="max",zn="min",Un="maxLength",qn="minLength",$n="pattern",Hn="required",Bn="validate";ue.createContext(null);var Gn=e=>Sn(e)&&!Object.keys(e).length,Wn=e=>Array.isArray(e)?e:[e];var Kn=e=>"string"==typeof e,Yn=e=>/^\w*$/.test(e),Jn=e=>kn(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Xn=(e,t,a)=>{let r=-1;const s=Yn(t)?[t]:Jn(t),n=s.length,i=n-1;for(;++r<n;){const t=s[r];let n=a;if(r!==i){const a=e[t];n=Sn(a)||Array.isArray(a)?a:isNaN(+s[r+1])?{}:[]}e[t]=n,e=e[t]}return e},Zn=(e,t,a,r,s)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[r]:s||!0}}:{},Qn=e=>({isOnSubmit:!e||e===Fn,isOnBlur:e===On,isOnChange:e===Mn,isOnAll:e===Ln,isOnTouch:e===In}),ei=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const ti=(e,t,a,r)=>{for(const s of a||Object.keys(e)){const a=Tn(e,s);if(a){const{_f:e,...n}=a;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;ti(n,t)}else Sn(n)&&ti(n,t)}}};var ai=(e,t,a)=>{const r=kn(Tn(e,a));return Xn(r,"root",t[a]),Xn(e,a,r),e},ri=e=>"file"===e.type,si=e=>"function"==typeof e,ni=e=>{if(!En)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ii=e=>Kn(e),oi=e=>"radio"===e.type,li=e=>e instanceof RegExp;const ci={value:!1,isValid:!1},di={value:!0,isValid:!0};var ui=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_n(e[0].attributes.value)?_n(e[0].value)||""===e[0].value?di:{value:e[0].value,isValid:!0}:di:ci}return ci};const mi={isValid:!1,value:null};var pi=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,mi):mi;function fi(e,t,a="validate"){if(ii(e)||Array.isArray(e)&&e.every(ii)||Rn(e)&&!e)return{type:a,message:ii(e)?e:"",ref:t}}var hi=e=>Sn(e)&&!li(e)?e:{value:e,message:""},xi=async(e,t,a,r,s)=>{const{ref:n,refs:i,required:o,maxLength:l,minLength:c,min:d,max:u,pattern:m,validate:p,name:f,valueAsNumber:h,mount:x,disabled:v}=e._f,g=Tn(t,f);if(!x||v)return{};const b=i?i[0]:n,y=e=>{r&&b.reportValidity&&(b.setCustomValidity(Rn(e)?"":e||""),b.reportValidity())},j={},w=oi(n),N=jn(n),C=w||N,S=(h||ri(n))&&_n(n.value)&&_n(g)||ni(n)&&""===n.value||""===g||Array.isArray(g)&&!g.length,E=Zn.bind(null,f,a,j),A=(e,t,a,r=Un,s=qn)=>{const i=e?t:a;j[f]={type:e?r:s,message:i,ref:n,...E(e?r:s,i)}};if(s?!Array.isArray(g)||!g.length:o&&(!C&&(S||Nn(g))||Rn(g)&&!g||N&&!ui(i).isValid||w&&!pi(i).isValid)){const{value:e,message:t}=ii(o)?{value:!!o,message:o}:hi(o);if(e&&(j[f]={type:Hn,message:t,ref:b,...E(Hn,t)},!a))return y(t),j}if(!(S||Nn(d)&&Nn(u))){let e,t;const r=hi(u),s=hi(d);if(Nn(g)||isNaN(g)){const a=n.valueAsDate||new Date(g),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==n.type,l="week"==n.type;Kn(r.value)&&g&&(e=o?i(g)>i(r.value):l?g>r.value:a>new Date(r.value)),Kn(s.value)&&g&&(t=o?i(g)<i(s.value):l?g<s.value:a<new Date(s.value))}else{const a=n.valueAsNumber||(g?+g:g);Nn(r.value)||(e=a>r.value),Nn(s.value)||(t=a<s.value)}if((e||t)&&(A(!!e,r.message,s.message,Vn,zn),!a))return y(j[f].message),j}if((l||c)&&!S&&(Kn(g)||s&&Array.isArray(g))){const e=hi(l),t=hi(c),r=!Nn(e.value)&&g.length>+e.value,s=!Nn(t.value)&&g.length<+t.value;if((r||s)&&(A(r,e.message,t.message),!a))return y(j[f].message),j}if(m&&!S&&Kn(g)){const{value:e,message:t}=hi(m);if(li(e)&&!g.match(e)&&(j[f]={type:$n,message:t,ref:n,...E($n,t)},!a))return y(t),j}if(p)if(si(p)){const e=fi(await p(g,t),b);if(e&&(j[f]={...e,...E(Bn,e.message)},!a))return y(e.message),j}else if(Sn(p)){let e={};for(const r in p){if(!Gn(e)&&!a)break;const s=fi(await p[r](g,t),b,r);s&&(e={...s,...E(r,s.message)},y(s.message),a&&(j[f]=e))}if(!Gn(e)&&(j[f]={ref:b,...e},!a))return j}return y(!0),j};function vi(e,t){const a=Array.isArray(t)?t:Yn(t)?[t]:Jn(t),r=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let r=0;for(;r<a;)e=_n(e)?r++:e[t[r++]];return e}(e,a),s=a.length-1,n=a[s];return r&&delete r[n],0!==s&&(Sn(r)&&Gn(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!_n(e[t]))return!1;return!0}(r))&&vi(e,a.slice(0,-1)),e}var gi=()=>{let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},bi=e=>Nn(e)||!Cn(e);function yi(e,t){if(bi(e)||bi(t))return e===t;if(wn(e)&&wn(t))return e.getTime()===t.getTime();const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(const s of a){const a=e[s];if(!r.includes(s))return!1;if("ref"!==s){const e=t[s];if(wn(a)&&wn(e)||Sn(a)&&Sn(e)||Array.isArray(a)&&Array.isArray(e)?!yi(a,e):a!==e)return!1}}return!0}var ji=e=>"select-multiple"===e.type,wi=e=>ni(e)&&e.isConnected,Ni=e=>{for(const t in e)if(si(e[t]))return!0;return!1};function Ci(e,t={}){const a=Array.isArray(e);if(Sn(e)||a)for(const r in e)Array.isArray(e[r])||Sn(e[r])&&!Ni(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ci(e[r],t[r])):Nn(e[r])||(t[r]=!0);return t}function Si(e,t,a){const r=Array.isArray(e);if(Sn(e)||r)for(const s in e)Array.isArray(e[s])||Sn(e[s])&&!Ni(e[s])?_n(t)||bi(a[s])?a[s]=Array.isArray(e[s])?Ci(e[s],[]):{...Ci(e[s])}:Si(e[s],Nn(t)?{}:t[s],a[s]):a[s]=!yi(e[s],t[s]);return a}var Ei=(e,t)=>Si(e,t,Ci(t)),Ai=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:r})=>_n(e)?e:t?""===e?NaN:e?+e:e:a&&Kn(e)?new Date(e):r?r(e):e;function ki(e){const t=e.ref;if(!(e.refs?e.refs.every(e=>e.disabled):t.disabled))return ri(t)?t.files:oi(t)?pi(e.refs).value:ji(t)?[...t.selectedOptions].map(({value:e})=>e):jn(t)?ui(e.refs).value:Ai(_n(t.value)?e.ref.value:t.value,e)}var _i=e=>_n(e)?e:li(e)?e.source:Sn(e)?li(e.value)?e.value.source:e.value:e;function Ti(e,t,a){const r=Tn(e,a);if(r||Yn(a))return{error:r,name:a};const s=a.split(".");for(;s.length;){const r=s.join("."),n=Tn(t,r),i=Tn(e,r);if(n&&!Array.isArray(n)&&a!==r)return{name:a};if(i&&i.type)return{name:r,error:i};s.pop()}return{name:a}}const Ri={mode:Fn,reValidateMode:Mn,shouldFocusError:!0};function Pi(e={},t){let a,r={...Ri,...e},s={submitCount:0,isDirty:!1,isLoading:si(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:!1},n={},i=(Sn(r.defaultValues)||Sn(r.values))&&An(r.defaultValues||r.values)||{},o=r.shouldUnregister?{}:An(i),l={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const u={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:gi(),array:gi(),state:gi()},p=e.resetOptions&&e.resetOptions.keepDirtyValues,f=Qn(r.mode),h=Qn(r.reValidateMode),x=r.criteriaMode===Ln,v=async e=>{if(u.isValid||e){const e=r.resolver?Gn((await w()).errors):await N(n,!0);e!==s.isValid&&m.state.next({isValid:e})}},g=e=>u.isValidating&&m.state.next({isValidating:e}),b=(e,t,a,r)=>{const s=Tn(n,e);if(s){const n=Tn(o,e,_n(a)?Tn(i,e):a);_n(n)||r&&r.defaultChecked||t?Xn(o,e,t?n:ki(s._f)):E(e,n),l.mount&&v()}},y=(e,t,a,r,o)=>{let l=!1,c=!1;const d={name:e},p=!(!Tn(n,e)||!Tn(n,e)._f.disabled);if(!a||r){u.isDirty&&(c=s.isDirty,s.isDirty=d.isDirty=C(),l=c!==d.isDirty);const a=p||yi(Tn(i,e),t);c=!(p||!Tn(s.dirtyFields,e)),a||p?vi(s.dirtyFields,e):Xn(s.dirtyFields,e,!0),d.dirtyFields=s.dirtyFields,l=l||u.dirtyFields&&c!==!a}if(a){const t=Tn(s.touchedFields,e);t||(Xn(s.touchedFields,e,a),d.touchedFields=s.touchedFields,l=l||u.touchedFields&&t!==a)}return l&&o&&m.state.next(d),l?d:{}},j=(t,r,n,i)=>{const o=Tn(s.errors,t),l=u.isValid&&Rn(r)&&s.isValid!==r;var c;if(e.delayError&&n?(c=()=>((e,t)=>{Xn(s.errors,e,t),m.state.next({errors:s.errors})})(t,n),a=e=>{clearTimeout(d),d=setTimeout(c,e)},a(e.delayError)):(clearTimeout(d),a=null,n?Xn(s.errors,t,n):vi(s.errors,t)),(n?!yi(o,n):o)||!Gn(i)||l){const e={...i,...l&&Rn(r)?{isValid:r}:{},errors:s.errors,name:t};s={...s,...e},m.state.next(e)}g(!1)},w=async e=>r.resolver(o,r.context,((e,t,a,r)=>{const s={};for(const n of e){const e=Tn(t,n);e&&Xn(s,n,e._f)}return{criteriaMode:a,names:[...e],fields:s,shouldUseNativeValidation:r}})(e||c.mount,n,r.criteriaMode,r.shouldUseNativeValidation)),N=async(e,t,a={valid:!0})=>{for(const n in e){const i=e[n];if(i){const{_f:e,...n}=i;if(e){const n=c.array.has(e.name),l=await xi(i,o,x,r.shouldUseNativeValidation&&!t,n);if(l[e.name]&&(a.valid=!1,t))break;!t&&(Tn(l,e.name)?n?ai(s.errors,l,e.name):Xn(s.errors,e.name,l[e.name]):vi(s.errors,e.name))}n&&await N(n,t,a)}}return a.valid},C=(e,t)=>(e&&t&&Xn(o,e,t),!yi(P(),i)),S=(e,t,a)=>((e,t,a,r,s)=>Kn(e)?(r&&t.watch.add(e),Tn(a,e,s)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),Tn(a,e))):(r&&(t.watchAll=!0),a))(e,c,{...l.mount?o:_n(t)?i:Kn(e)?{[e]:t}:t},a,t),E=(e,t,a={})=>{const r=Tn(n,e);let s=t;if(r){const a=r._f;a&&(!a.disabled&&Xn(o,e,Ai(t,a)),s=ni(a.ref)&&Nn(t)?"":t,ji(a.ref)?[...a.ref.options].forEach(e=>e.selected=s.includes(e.value)):a.refs?jn(a.ref)?a.refs.length>1?a.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find(t=>t===e.value):s===e.value)):a.refs[0]&&(a.refs[0].checked=!!s):a.refs.forEach(e=>e.checked=e.value===s):ri(a.ref)?a.ref.value="":(a.ref.value=s,a.ref.type||m.values.next({name:e,values:{...o}})))}(a.shouldDirty||a.shouldTouch)&&y(e,s,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&R(e)},A=(e,t,a)=>{for(const r in t){const s=t[r],i=`${e}.${r}`,o=Tn(n,i);!c.array.has(e)&&bi(s)&&(!o||o._f)||wn(s)?E(i,s,a):A(i,s,a)}},k=(e,a,r={})=>{const d=Tn(n,e),p=c.array.has(e),f=An(a);Xn(o,e,f),p?(m.array.next({name:e,values:{...o}}),(u.isDirty||u.dirtyFields)&&r.shouldDirty&&m.state.next({name:e,dirtyFields:Ei(i,o),isDirty:C(e,f)})):!d||d._f||Nn(f)?E(e,f,r):A(e,f,r),ei(e,c)&&m.state.next({...s}),m.values.next({name:e,values:{...o}}),!l.mount&&t()},_=async e=>{const t=e.target;let i=t.name,l=!0;const d=Tn(n,i),p=()=>t.type?ki(d._f):(e=>Sn(e)&&e.target?jn(e.target)?e.target.checked:e.target.value:e)(e),b=e=>{l=Number.isNaN(e)||e===Tn(o,i,e)};if(d){let t,S;const E=p(),A=e.type===Pn||e.type===Dn,k=!((C=d._f).mount&&(C.required||C.min||C.max||C.maxLength||C.minLength||C.pattern||C.validate)||r.resolver||Tn(s.errors,i)||d._f.deps)||((e,t,a,r,s)=>!s.isOnAll&&(!a&&s.isOnTouch?!(t||e):(a?r.isOnBlur:s.isOnBlur)?!e:!(a?r.isOnChange:s.isOnChange)||e))(A,Tn(s.touchedFields,i),s.isSubmitted,h,f),_=ei(i,c,A);Xn(o,i,E),A?(d._f.onBlur&&d._f.onBlur(e),a&&a(0)):d._f.onChange&&d._f.onChange(e);const T=y(i,E,A,!1),P=!Gn(T)||_;if(!A&&m.values.next({name:i,type:e.type,values:{...o}}),k)return u.isValid&&v(),P&&m.state.next({name:i,..._?{}:T});if(!A&&_&&m.state.next({...s}),g(!0),r.resolver){const{errors:e}=await w([i]);if(b(E),l){const a=Ti(s.errors,n,i),r=Ti(e,n,a.name||i);t=r.error,i=r.name,S=Gn(e)}}else t=(await xi(d,o,x,r.shouldUseNativeValidation))[i],b(E),l&&(t?S=!1:u.isValid&&(S=await N(n,!0)));l&&(d._f.deps&&R(d._f.deps),j(i,S,t,T))}var C},T=(e,t)=>{if(Tn(s.errors,t)&&e.focus)return e.focus(),1},R=async(e,t={})=>{let a,i;const o=Wn(e);if(g(!0),r.resolver){const t=await(async e=>{const{errors:t}=await w(e);if(e)for(const a of e){const e=Tn(t,a);e?Xn(s.errors,a,e):vi(s.errors,a)}else s.errors=t;return t})(_n(e)?e:o);a=Gn(t),i=e?!o.some(e=>Tn(t,e)):a}else e?(i=(await Promise.all(o.map(async e=>{const t=Tn(n,e);return await N(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||s.isValid)&&v()):i=a=await N(n);return m.state.next({...!Kn(e)||u.isValid&&a!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:a}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!i&&ti(n,T,e?o:c.mount),i},P=e=>{const t={...i,...l.mount?o:{}};return _n(e)?t:Kn(e)?Tn(t,e):e.map(e=>Tn(t,e))},D=(e,t)=>({invalid:!!Tn((t||s).errors,e),isDirty:!!Tn((t||s).dirtyFields,e),isTouched:!!Tn((t||s).touchedFields,e),error:Tn((t||s).errors,e)}),O=(e,t,a)=>{const r=(Tn(n,e,{_f:{}})._f||{}).ref;Xn(s.errors,e,{...t,ref:r}),m.state.next({name:e,errors:s.errors,isValid:!1}),a&&a.shouldFocus&&r&&r.focus&&r.focus()},M=(e,t={})=>{for(const a of e?Wn(e):c.mount)c.mount.delete(a),c.array.delete(a),t.keepValue||(vi(n,a),vi(o,a)),!t.keepError&&vi(s.errors,a),!t.keepDirty&&vi(s.dirtyFields,a),!t.keepTouched&&vi(s.touchedFields,a),!r.shouldUnregister&&!t.keepDefaultValue&&vi(i,a);m.values.next({values:{...o}}),m.state.next({...s,...t.keepDirty?{isDirty:C()}:{}}),!t.keepIsValid&&v()},F=({disabled:e,name:t,field:a,fields:r,value:s})=>{if(Rn(e)){const n=e?void 0:_n(s)?ki(a?a._f:Tn(r,t)._f):s;Xn(o,t,n),y(t,n,!1,!1,!0)}},I=(e,t={})=>{let a=Tn(n,e);const s=Rn(t.disabled);return Xn(n,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),a?F({field:a,disabled:t.disabled,name:e,value:t.value}):b(e,!0,t.value),{...s?{disabled:t.disabled}:{},...r.progressive?{required:!!t.required,min:_i(t.min),max:_i(t.max),minLength:_i(t.minLength),maxLength:_i(t.maxLength),pattern:_i(t.pattern)}:{},name:e,onChange:_,onBlur:_,ref:s=>{if(s){I(e,t),a=Tn(n,e);const r=_n(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,o=(e=>oi(e)||jn(e))(r),l=a._f.refs||[];if(o?l.find(e=>e===r):r===a._f.ref)return;Xn(n,e,{_f:{...a._f,...o?{refs:[...l.filter(wi),r,...Array.isArray(Tn(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),b(e,!1,void 0,r)}else a=Tn(n,e,{}),a._f&&(a._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(c.array,e)||!l.action)&&c.unMount.add(e)}}},L=()=>r.shouldFocusError&&ti(n,T,c.mount),V=(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let i=An(o);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await w();s.errors=e,i=t}else await N(n);vi(s.errors,"root"),Gn(s.errors)?(m.state.next({errors:{}}),await e(i,a)):(t&&await t({...s.errors},a),L(),setTimeout(L)),m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gn(s.errors),submitCount:s.submitCount+1,errors:s.errors})},z=(a,r={})=>{const d=a?An(a):i,f=An(d),h=a&&!Gn(a)?f:i;if(r.keepDefaultValues||(i=d),!r.keepValues){if(r.keepDirtyValues||p)for(const e of c.mount)Tn(s.dirtyFields,e)?Xn(h,e,Tn(o,e)):k(e,Tn(h,e));else{if(En&&_n(a))for(const e of c.mount){const t=Tn(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(ni(e)){const t=e.closest("form");if(t){t.reset();break}}}}n={}}o=e.shouldUnregister?r.keepDefaultValues?An(i):{}:An(h),m.array.next({values:{...h}}),m.values.next({values:{...h}})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!l.mount&&t(),l.mount=!u.isValid||!!r.keepIsValid,l.watch=!!e.shouldUnregister,m.state.next({submitCount:r.keepSubmitCount?s.submitCount:0,isDirty:r.keepDirty?s.isDirty:!(!r.keepDefaultValues||yi(a,i)),isSubmitted:!!r.keepIsSubmitted&&s.isSubmitted,dirtyFields:r.keepDirtyValues?s.dirtyFields:r.keepDefaultValues&&a?Ei(i,a):{},touchedFields:r.keepTouched?s.touchedFields:{},errors:r.keepErrors?s.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},U=(e,t)=>z(si(e)?e(o):e,t);return{control:{register:I,unregister:M,getFieldState:D,handleSubmit:V,setError:O,_executeSchema:w,_getWatch:S,_getDirty:C,_updateValid:v,_removeUnmounted:()=>{for(const e of c.unMount){const t=Tn(n,e);t&&(t._f.refs?t._f.refs.every(e=>!wi(e)):!wi(t._f.ref))&&M(e)}c.unMount=new Set},_updateFieldArray:(e,t=[],a,r,c=!0,d=!0)=>{if(r&&a){if(l.action=!0,d&&Array.isArray(Tn(n,e))){const t=a(Tn(n,e),r.argA,r.argB);c&&Xn(n,e,t)}if(d&&Array.isArray(Tn(s.errors,e))){const t=a(Tn(s.errors,e),r.argA,r.argB);c&&Xn(s.errors,e,t),((e,t)=>{!kn(Tn(e,t)).length&&vi(e,t)})(s.errors,e)}if(u.touchedFields&&d&&Array.isArray(Tn(s.touchedFields,e))){const t=a(Tn(s.touchedFields,e),r.argA,r.argB);c&&Xn(s.touchedFields,e,t)}u.dirtyFields&&(s.dirtyFields=Ei(i,o)),m.state.next({name:e,isDirty:C(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Xn(o,e,t)},_updateDisabledField:F,_getFieldArray:t=>kn(Tn(l.mount?o:i,t,e.shouldUnregister?Tn(i,t,[]):[])),_reset:z,_resetDefaultValues:()=>si(r.defaultValues)&&r.defaultValues().then(e=>{U(e,r.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:e=>{s={...s,...e}},_disableForm:e=>{Rn(e)&&(m.state.next({disabled:e}),ti(n,(t,a)=>{let r=e;const s=Tn(n,a);s&&Rn(s._f.disabled)&&(r||(r=s._f.disabled)),t.disabled=r},0,!1))},_subjects:m,_proxyFormState:u,_setErrors:e=>{s.errors=e,m.state.next({errors:s.errors,isValid:!1})},get _fields(){return n},get _formValues(){return o},get _state(){return l},set _state(e){l=e},get _defaultValues(){return i},get _names(){return c},set _names(e){c=e},get _formState(){return s},set _formState(e){s=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:R,register:I,handleSubmit:V,watch:(e,t)=>si(e)?m.values.subscribe({next:a=>e(S(void 0,t),a)}):S(e,t,!0),setValue:k,getValues:P,reset:U,resetField:(e,t={})=>{Tn(n,e)&&(_n(t.defaultValue)?k(e,Tn(i,e)):(k(e,t.defaultValue),Xn(i,e,t.defaultValue)),t.keepTouched||vi(s.touchedFields,e),t.keepDirty||(vi(s.dirtyFields,e),s.isDirty=t.defaultValue?C(e,Tn(i,e)):C()),t.keepError||(vi(s.errors,e),u.isValid&&v()),m.state.next({...s}))},clearErrors:e=>{e&&Wn(e).forEach(e=>vi(s.errors,e)),m.state.next({errors:e?s.errors:{}})},unregister:M,setError:O,setFocus:(e,t={})=>{const a=Tn(n,e),r=a&&a._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:D}}function Di(e={}){const t=ue.useRef(),a=ue.useRef(),[r,s]=ue.useState({isDirty:!1,isValidating:!1,isLoading:si(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:!1,defaultValues:si(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Pi(e,()=>s(e=>({...e}))),formState:r});const n=t.current.control;return n._options=e,function(e){const t=ue.useRef(e);t.current=e,ue.useEffect(()=>{const a=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}},[e.disabled])}({subject:n._subjects.state,next:e=>{((e,t,a,r)=>{a(e);const{name:s,...n}=e;return Gn(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(e=>t[e]===(!r||Ln))})(e,n._proxyFormState,n._updateFormState,!0)&&s({...n._formState})}}),ue.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),ue.useEffect(()=>{if(n._proxyFormState.isDirty){const e=n._getDirty();e!==r.isDirty&&n._subjects.state.next({isDirty:e})}},[n,r.isDirty]),ue.useEffect(()=>{e.values&&!yi(e.values,a.current)?(n._reset(e.values,n._options.resetOptions),a.current=e.values,s(e=>({...e}))):n._resetDefaultValues()},[e.values,n]),ue.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),ue.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=((e,t,a,r=!0)=>{const s={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(s,n,{get:()=>{const s=n;return t._proxyFormState[s]!==Ln&&(t._proxyFormState[s]=!r||Ln),a&&(a[s]=!0),e[s]}});return s})(r,n),t.current}const Oi=ue.forwardRef(({className:e,type:t,...a},r)=>s.jsx("input",{type:t,className:un("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));Oi.displayName="Input";const Mi=ue.forwardRef(({className:e,...t},a)=>s.jsx("textarea",{className:un("flex min-h-[40px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));Mi.displayName="Textarea";var Fi=le.forwardRef((e,t)=>s.jsx(f.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Fi.displayName="Label";var Ii=Fi;const Li=Cs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vi=ue.forwardRef(({className:e,...t},a)=>s.jsx(Ii,{ref:a,className:un(Li(),e),...t}));Vi.displayName=Ii.displayName;const zi=({setOpen:e})=>{const{register:t,handleSubmit:a,formState:{errors:r,isSubmitting:n}}=Di(),{toast:i}=br();return s.jsxs("form",{onSubmit:a(async t=>{await new Promise(e=>setTimeout(e,1e3)),i({title:"Solicitud Enviada",description:"Hemos recibido su requerimiento. Nuestro equipo legal se pondrá en contacto a la brevedad."}),e(!1)}),className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Vi,{htmlFor:"officialName",children:"Nombre Completo del Solicitante"}),s.jsx(Oi,{id:"officialName",...t("officialName",{required:"El nombre es requerido"}),className:"input-glass"}),r.officialName&&s.jsx("p",{className:"text-red-500 text-sm",children:r.officialName.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Vi,{htmlFor:"institution",children:"Institución/Entidad"}),s.jsx(Oi,{id:"institution",...t("institution",{required:"La institución es requerida"}),className:"input-glass"}),r.institution&&s.jsx("p",{className:"text-red-500 text-sm",children:r.institution.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Vi,{htmlFor:"caseNumber",children:"Número de Causa/Expediente"}),s.jsx(Oi,{id:"caseNumber",...t("caseNumber",{required:"El número de causa es requerido"}),className:"input-glass"}),r.caseNumber&&s.jsx("p",{className:"text-red-500 text-sm",children:r.caseNumber.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Vi,{htmlFor:"requestDetails",children:"Detalles del Requerimiento"}),s.jsx(Mi,{id:"requestDetails",...t("requestDetails",{required:"Los detalles son requeridos"}),className:"input-glass"}),r.requestDetails&&s.jsx("p",{className:"text-red-500 text-sm",children:r.requestDetails.message})]}),s.jsx(pn,{type:"submit",disabled:n,className:"w-full btn-action",children:n?"Enviando...":"Enviar Requerimiento"})]})},Ui=m,qi=p,$i=u,Hi=l,Bi=ue.forwardRef(({className:e,...t},a)=>s.jsx(i,{ref:a,className:un("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Bi.displayName=i.displayName;const Gi=ue.forwardRef(({className:e,children:t,...a},r)=>s.jsxs($i,{children:[s.jsx(Bi,{}),s.jsxs(o,{ref:r,className:un("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,s.jsxs(l,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(pe,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gi.displayName=o.displayName;const Wi=({className:e,...t})=>s.jsx("div",{className:un("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Wi.displayName="DialogHeader";const Ki=({className:e,...t})=>s.jsx("div",{className:un("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ki.displayName="DialogFooter";const Yi=ue.forwardRef(({className:e,...t},a)=>s.jsx(c,{ref:a,className:un("text-lg font-semibold leading-none tracking-tight",e),...t}));Yi.displayName=c.displayName;const Ji=ue.forwardRef(({className:e,...t},a)=>s.jsx(d,{ref:a,className:un("text-sm text-muted-foreground",e),...t}));Ji.displayName=d.displayName;const Xi=()=>{const[e,t]=le.useState(!1),{user:a,profile:r}=wr(),n=a&&"admin"===(null==r?void 0:r.role);return s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-sm",children:s.jsxs("nav",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[s.jsxs(Ui,{open:e,onOpenChange:t,children:[s.jsx(qi,{asChild:!0,children:s.jsxs(pn,{variant:"ghost",className:"text-text-secondary hover:text-text-primary",children:[s.jsx(fe,{className:"mr-2 h-4 w-4"}),"Requerimientos Legales"]})}),s.jsxs(Gi,{className:"sm:max-w-[425px] bg-surface border-border-color text-text-primary",children:[s.jsx(Wi,{children:s.jsx(Yi,{children:"Formulario para Entidades Judiciales y de Seguridad"})}),s.jsx(zi,{setOpen:t})]})]}),s.jsxs(fn,{children:[s.jsx(hn,{asChild:!0,children:s.jsx(pn,{variant:"ghost",size:"icon",children:s.jsx(he,{className:"h-6 w-6"})})}),s.jsx(yn,{className:"bg-surface border-border-color text-text-primary",children:s.jsxs("div",{className:"flex flex-col space-y-4 pt-8",children:[s.jsx(xn,{asChild:!0,children:s.jsxs(ar,{to:"/ad-register",className:"flex items-center p-2 rounded-md hover:bg-border-color",children:[s.jsx(xe,{className:"mr-3 h-5 w-5 text-primary"}),s.jsx("span",{children:"Registro Publicitario"})]})}),s.jsx(xn,{asChild:!0,children:s.jsxs(ar,{to:"/ad-login",className:"flex items-center p-2 rounded-md hover:bg-border-color",children:[s.jsx(xe,{className:"mr-3 h-5 w-5 text-primary"}),s.jsx("span",{children:"Inicio Cuenta Publicidad"})]})}),s.jsx(xn,{asChild:!0,children:s.jsxs(ar,{to:"/terms",className:"flex items-center p-2 rounded-md hover:bg-border-color",children:[s.jsx(ve,{className:"mr-3 h-5 w-5 text-primary"}),s.jsx("span",{children:"Términos y Seguridad"})]})}),n&&s.jsx(xn,{asChild:!0,children:s.jsxs(ar,{to:"/admin",className:"flex items-center p-2 rounded-md hover:bg-border-color",children:[s.jsx(ge,{className:"mr-3 h-5 w-5 text-primary"}),s.jsx("span",{children:"Panel de Administración"})]})})]})})]})]})})},Zi=()=>{const{user:e,profile:t}=wr(),a=e&&"admin"===(null==t?void 0:t.role);return s.jsx("footer",{className:"bg-surface py-8 px-4",children:s.jsxs("div",{className:"container mx-auto text-center text-text-secondary",children:[s.jsxs("div",{className:"flex justify-center items-center space-x-4 mb-4",children:[s.jsx(ar,{to:"/contact",className:"hover:text-primary transition-colors",children:"Contacto"}),s.jsx(ar,{to:"/advertising-contact",className:"hover:text-primary transition-colors",children:"Publicidad"}),s.jsx(ar,{to:"/terms",className:"hover:text-primary transition-colors",children:"Términos y Seguridad"}),a&&s.jsx(ar,{to:"/admin",className:"hover:text-primary transition-colors font-bold",children:"Panel Admin"})]}),s.jsxs("p",{children:["© ",(new Date).getFullYear()," AGARCH-AR. Todos los derechos reservados."]}),s.jsx("p",{className:"text-xs mt-2",children:"Esta plataforma está destinada a mayores de 18 años. Se prohíben actividades ilegales."})]})})},Qi={offscreen:{y:50,opacity:0},onscreen:{y:0,opacity:1,transition:{type:"spring",bounce:.4,duration:.8}}},eo=()=>s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"AGARCH-AR - Conexiones Reales, Sin Ataduras"}),s.jsx("meta",{name:"description",content:"Buscamos ser una comunidad amplia y libre, que pueda conectarnos entre sí, sin prejuicios ni ataduras. AGARCH-AR es para todos."})]}),s.jsxs("div",{className:"min-h-screen w-full bg-background text-text-primary overflow-x-hidden",children:[s.jsx(Xi,{}),s.jsxs("main",{children:[s.jsxs("section",{className:"relative flex flex-col items-center justify-center text-center min-h-[80vh] p-4 pt-24 md:pt-32",style:{backgroundImage:"radial-gradient(ellipse 80% 80% at 50% -20%, rgba(244, 63, 94, 0.2), transparent)"},children:[s.jsx(be.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl md:text-7xl font-black uppercase mb-4 text-brand-red",style:{textShadow:"0 0 20px rgba(244, 63, 94, 0.6)"},children:"AGARCH-AR"}),s.jsx(be.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-lg md:text-xl text-text-secondary max-w-2xl mx-auto mb-8",children:"Conéctate con personas afines, cerca tuyo y con ganas de hacer lo mismo que vos. Sin compromisos, sin ataduras. Solo disfruta el momento, que ¡ES AHORA!"}),s.jsxs(be.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(pn,{asChild:!0,size:"lg",className:"btn-action text-lg group w-full sm:w-auto",children:s.jsxs(ar,{to:"/register",children:["Crear Perfil",s.jsx(ye,{className:"ml-2 h-5 w-5 transition-transform group-hover:translate-x-1"})]})}),s.jsx(pn,{asChild:!0,size:"lg",variant:"outline",className:"btn-secondary-action text-lg w-full sm:w-auto",children:s.jsx(ar,{to:"/login",children:"Iniciar Sesión"})})]})]}),s.jsx("section",{className:"py-16 px-4",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 auto-rows-fr gap-4",children:[s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden md:col-span-2 md:row-span-2",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/1dd3debbb5eebe317084a1ccd3a4bf02.jpg",alt:"Dos hombres y dos mujeres en lencería elegante en una habitación de lujo",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/bb20069474bb113043f2f1a209081635.jpg",alt:"Mujer en lencería rosa en un dormitorio",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/d0c06b8e9a8f8dd12854427ab72ebc00.jpg",alt:"Hombre sentado en un sofá mirando a una mujer en ropa interior",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/ba7f48d69b281b36fecf9a8584db6e8a.jpg",alt:"Dos hombres durmiendo juntos en una cama iluminada por una vela",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/da76343598a3cc1aaf19d1a671e0d020.jpg",alt:"Dos mujeres en lencería abrazándose íntimamente",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden md:col-span-2",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/fff300368b91701d2f7f9185d824ea11.jpg",alt:"Mujer elegante entre dos hombres con esmoquin en un evento de lujo",className:"w-full h-full object-cover"})}),s.jsx(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"rounded-lg overflow-hidden",children:s.jsx("img",{src:"https://horizons-cdn.hostinger.com/c7a8455b-5977-4007-8c65-492384c2742e/2a8c42c6a95efcc8563147fdc45d4c50.jpg",alt:"Pareja mirándose intensamente en un ambiente oscuro y romántico",className:"w-full h-full object-cover"})})]})})}),s.jsx("section",{className:"py-20 px-4 bg-surface",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Una Comunidad Libre y Segura"}),s.jsx("p",{className:"text-text-secondary max-w-3xl mx-auto mb-12",children:"Buscamos ser una comunidad amplia donde puedas conectar sin prejuicios. AGARCH-AR es para todos, un ambiente de respeto donde solo buscas lo que te gusta, disfrutas y vives libremente."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"p-6 rounded-lg card-glass",children:[s.jsx(je,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Seguridad Primero"}),s.jsx("p",{className:"text-text-secondary",children:"Verificación de perfiles y un estricto código de conducta para garantizar un espacio seguro y respetuoso para todos."})]}),s.jsxs(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"p-6 rounded-lg card-glass",children:[s.jsx(we,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Conexiones Auténticas"}),s.jsx("p",{className:"text-text-secondary",children:"Encuentra personas con tus mismos intereses y cerca de ti. La conexión ideal está más cerca de lo que piensas."})]}),s.jsxs(be.div,{variants:Qi,initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},className:"p-6 rounded-lg card-glass",children:[s.jsx(Ne,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Experiencia Premium"}),s.jsx("p",{className:"text-text-secondary",children:"Con un único pago de registro de 1 USD, accede a una comunidad exclusiva y desbloquea funciones avanzadas."})]})]})]})}),s.jsx("section",{className:"py-20 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Tu Seguridad es Nuestra Prioridad"}),s.jsx("p",{className:"text-text-secondary mb-6",children:"Al registrar tu perfil, aceptas nuestros términos, condiciones y políticas de privacidad y seguridad. Esta aplicación prohíbe estrictamente el uso a menores de edad, desnudos no consentidos, violencia de género, pedofilia, trata de personas y prostitución."}),s.jsx("p",{className:"text-text-secondary font-semibold",children:"Para validar y activar tu perfil, se requiere un pago único de 1 USD. Esto nos ayuda a mantener una comunidad de usuarios reales y comprometidos, dándote acceso completo a la plataforma y la posibilidad de desbloquear beneficios extras."})]})})]}),s.jsx(Zi,{})]})]}),to=()=>{const[e,t]=le.useState(""),[a,r]=le.useState(""),[n,i]=le.useState(!1),{signIn:o}=wr(),l=_a();return s.jsxs(s.Fragment,{children:[s.jsx(bs,{children:s.jsx("title",{children:"Iniciar Sesión - AGARCH-AR"})}),s.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Ce,{className:"mx-auto h-12 w-12 text-brand-red"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-text-primary",children:"¡Bienvenido de vuelta!"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Ingresa para continuar la diversión."})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),i(!0);const{error:r}=await o(e,a);r||l("/"),i(!1)},children:[s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"email-address",className:"sr-only",children:"Email"}),s.jsx(Oi,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"input-glass rounded-b-none",placeholder:"Email",value:e,onChange:e=>t(e.target.value)})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"password",children:"Contraseña"}),s.jsx(Oi,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"input-glass rounded-t-none",placeholder:"Contraseña",value:a,onChange:e=>r(e.target.value)})]})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("div",{className:"text-sm",children:s.jsx(ar,{to:"/recover-password",className:"font-medium text-primary hover:text-green-400",children:"¿Olvidaste tu contraseña?"})})}),s.jsx("div",{children:s.jsx(pn,{type:"submit",className:"w-full btn-action",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Iniciando sesión..."]}):"Iniciar Sesión"})})]}),s.jsxs("p",{className:"mt-2 text-center text-sm text-text-secondary",children:["¿No tienes una cuenta?"," ",s.jsx(ar,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"Regístrate"})]})]})]})};var ao={exports:{}};function ro(){}function so(){}so.resetWarningCache=ro;ao.exports=function(){function e(e,t,a,r,s,n){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:so,resetWarningCache:ro};return a.PropTypes=a,a}();const no=de(ao.exports);var io,oo=le,lo=(io=oo)&&"object"==typeof io&&"default"in io?io.default:io;function co(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var uo=!("undefined"==typeof window||!window.document||!window.document.createElement);const mo=de(function(e,t,a){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==a&&"function"!=typeof a)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var s,n=[];function i(){s=e(n.map(function(e){return e.props})),o.canUseDOM?t(s):a&&(s=a(s))}var o=function(e){var t,a;function o(){return e.apply(this,arguments)||this}a=e,(t=o).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,o.peek=function(){return s},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=s;return s=void 0,n=[],e};var l=o.prototype;return l.UNSAFE_componentWillMount=function(){n.push(this),i()},l.componentDidUpdate=function(){i()},l.componentWillUnmount=function(){var e=n.indexOf(this);n.splice(e,1),i()},l.render=function(){return lo.createElement(r,this.props)},o}(oo.PureComponent);return co(o,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),co(o,"canUseDOM",uo),o}});
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var po=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable;const xo=de(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(s){return!1}}()?Object.assign:function(e,t){for(var a,r,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),n=1;n<arguments.length;n++){for(var i in a=Object(arguments[n]))fo.call(a,i)&&(s[i]=a[i]);if(po){r=po(a);for(var o=0;o<r.length;o++)ho.call(a,r[o])&&(s[r[o]]=a[r[o]])}}return s});var vo="bodyAttributes",go="htmlAttributes",bo="titleAttributes",yo={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(yo).map(function(e){return yo[e]});var jo,wo,No,Co,So="charset",Eo="cssText",Ao="href",ko="http-equiv",_o="innerHTML",To="itemprop",Ro="name",Po="property",Do="rel",Oo="src",Mo="target",Fo={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Io="defaultTitle",Lo="defer",Vo="encodeSpecialCharacters",zo="onChangeClientState",Uo="titleTemplate",qo=Object.keys(Fo).reduce(function(e,t){return e[Fo[t]]=t,e},{}),$o=[yo.NOSCRIPT,yo.SCRIPT,yo.STYLE],Ho="data-react-helmet",Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),Wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ko=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a},Yo=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Jo=function(e){var t=tl(e,yo.TITLE),a=tl(e,Uo);if(a&&t)return a.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=tl(e,Io);return t||r||void 0},Xo=function(e){return tl(e,zo)||function(){}},Zo=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return Wo({},e,t)},{})},Qo=function(e,t){return t.filter(function(e){return void 0!==e[yo.BASE]}).map(function(e){return e[yo.BASE]}).reverse().reduce(function(t,a){if(!t.length)for(var r=Object.keys(a),s=0;s<r.length;s++){var n=r[s].toLowerCase();if(-1!==e.indexOf(n)&&a[n])return t.concat(a)}return t},[])},el=function(e,t,a){var r={};return a.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&il("Helmet: "+e+' should be of type "Array". Instead found type "'+Bo(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,a){var s={};a.filter(function(e){for(var a=void 0,n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],l=o.toLowerCase();-1===t.indexOf(l)||a===Do&&"canonical"===e[a].toLowerCase()||l===Do&&"stylesheet"===e[l].toLowerCase()||(a=l),-1===t.indexOf(o)||o!==_o&&o!==Eo&&o!==To||(a=o)}if(!a||!e[a])return!1;var c=e[a].toLowerCase();return r[a]||(r[a]={}),s[a]||(s[a]={}),!r[a][c]&&(s[a][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var n=Object.keys(s),i=0;i<n.length;i++){var o=n[i],l=xo({},r[o],s[o]);r[o]=l}return e},[]).reverse()},tl=function(e,t){for(var a=e.length-1;a>=0;a--){var r=e[a];if(r.hasOwnProperty(t))return r[t]}return null},al=(jo=Date.now(),function(e){var t=Date.now();t-jo>16?(jo=t,e(t)):setTimeout(function(){al(e)},0)}),rl=function(e){return clearTimeout(e)},sl="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||al:global.requestAnimationFrame||al,nl="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||rl:global.cancelAnimationFrame||rl,il=function(e){return console&&"function"==typeof console.warn&&void 0},ol=null,ll=function(e,t){var a=e.baseTag,r=e.bodyAttributes,s=e.htmlAttributes,n=e.linkTags,i=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,d=e.styleTags,u=e.title,m=e.titleAttributes;ul(yo.BODY,r),ul(yo.HTML,s),dl(u,m);var p={baseTag:ml(yo.BASE,a),linkTags:ml(yo.LINK,n),metaTags:ml(yo.META,i),noscriptTags:ml(yo.NOSCRIPT,o),scriptTags:ml(yo.SCRIPT,c),styleTags:ml(yo.STYLE,d)},f={},h={};Object.keys(p).forEach(function(e){var t=p[e],a=t.newTags,r=t.oldTags;a.length&&(f[e]=a),r.length&&(h[e]=p[e].oldTags)}),t&&t(),l(e,f,h)},cl=function(e){return Array.isArray(e)?e.join(""):e},dl=function(e,t){void 0!==e&&document.title!==e&&(document.title=cl(e)),ul(yo.TITLE,t)},ul=function(e,t){var a=document.getElementsByTagName(e)[0];if(a){for(var r=a.getAttribute(Ho),s=r?r.split(","):[],n=[].concat(s),i=Object.keys(t),o=0;o<i.length;o++){var l=i[o],c=t[l]||"";a.getAttribute(l)!==c&&a.setAttribute(l,c),-1===s.indexOf(l)&&s.push(l);var d=n.indexOf(l);-1!==d&&n.splice(d,1)}for(var u=n.length-1;u>=0;u--)a.removeAttribute(n[u]);s.length===n.length?a.removeAttribute(Ho):a.getAttribute(Ho)!==i.join(",")&&a.setAttribute(Ho,i.join(","))}},ml=function(e,t){var a=document.head||document.querySelector(yo.HEAD),r=a.querySelectorAll(e+"["+Ho+"]"),s=Array.prototype.slice.call(r),n=[],i=void 0;return t&&t.length&&t.forEach(function(t){var a=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===_o)a.innerHTML=t.innerHTML;else if(r===Eo)a.styleSheet?a.styleSheet.cssText=t.cssText:a.appendChild(document.createTextNode(t.cssText));else{var o=void 0===t[r]?"":t[r];a.setAttribute(r,o)}a.setAttribute(Ho,"true"),s.some(function(e,t){return i=t,a.isEqualNode(e)})?s.splice(i,1):n.push(a)}),s.forEach(function(e){return e.parentNode.removeChild(e)}),n.forEach(function(e){return a.appendChild(e)}),{oldTags:s,newTags:n}},pl=function(e){return Object.keys(e).reduce(function(t,a){var r=void 0!==e[a]?a+'="'+e[a]+'"':""+a;return t?t+" "+r:r},"")},fl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,a){return t[Fo[a]||a]=e[a],t},t)},hl=function(e,t,a){switch(e){case yo.TITLE:return{toComponent:function(){return e=t.title,a=t.titleAttributes,(r={key:e})[Ho]=!0,s=fl(a,r),[ue.createElement(yo.TITLE,s,e)];var e,a,r,s},toString:function(){return function(e,t,a,r){var s=pl(a),n=cl(t);return s?"<"+e+" "+Ho+'="true" '+s+">"+Yo(n,r)+"</"+e+">":"<"+e+" "+Ho+'="true">'+Yo(n,r)+"</"+e+">"}(e,t.title,t.titleAttributes,a)}};case vo:case go:return{toComponent:function(){return fl(t)},toString:function(){return pl(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,a){var r,s=((r={key:a})[Ho]=!0,r);return Object.keys(t).forEach(function(e){var a=Fo[e]||e;if(a===_o||a===Eo){var r=t.innerHTML||t.cssText;s.dangerouslySetInnerHTML={__html:r}}else s[a]=t[e]}),ue.createElement(e,s)})}(e,t)},toString:function(){return function(e,t,a){return t.reduce(function(t,r){var s=Object.keys(r).filter(function(e){return!(e===_o||e===Eo)}).reduce(function(e,t){var s=void 0===r[t]?t:t+'="'+Yo(r[t],a)+'"';return e?e+" "+s:s},""),n=r.innerHTML||r.cssText||"",i=-1===$o.indexOf(e);return t+"<"+e+" "+Ho+'="true" '+s+(i?"/>":">"+n+"</"+e+">")},"")}(e,t,a)}}}},xl=function(e){var t=e.baseTag,a=e.bodyAttributes,r=e.encode,s=e.htmlAttributes,n=e.linkTags,i=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,d=e.title,u=void 0===d?"":d,m=e.titleAttributes;return{base:hl(yo.BASE,t,r),bodyAttributes:hl(vo,a,r),htmlAttributes:hl(go,s,r),link:hl(yo.LINK,n,r),meta:hl(yo.META,i,r),noscript:hl(yo.NOSCRIPT,o,r),script:hl(yo.SCRIPT,l,r),style:hl(yo.STYLE,c,r),title:hl(yo.TITLE,{title:u,titleAttributes:m},r)}},vl=mo(function(e){return{baseTag:Qo([Ao,Mo],e),bodyAttributes:Zo(vo,e),defer:tl(e,Lo),encode:tl(e,Vo),htmlAttributes:Zo(go,e),linkTags:el(yo.LINK,[Do,Ao],e),metaTags:el(yo.META,[Ro,So,ko,Po,To],e),noscriptTags:el(yo.NOSCRIPT,[_o],e),onChangeClientState:Xo(e),scriptTags:el(yo.SCRIPT,[Oo,_o],e),styleTags:el(yo.STYLE,[Eo],e),title:Jo(e),titleAttributes:Zo(bo,e)}},function(e){ol&&nl(ol),e.defer?ol=sl(function(){ll(e,function(){ol=null})}):(ll(e),ol=null)},xl)(function(){return null}),gl=(wo=vl,Co=No=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!kr(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case yo.SCRIPT:case yo.NOSCRIPT:return{innerHTML:t};case yo.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,a=e.child,r=e.arrayTypeChildren,s=e.newChildProps,n=e.nestedChildren;return Wo({},r,((t={})[a.type]=[].concat(r[a.type]||[],[Wo({},s,this.mapNestedChildrenToProps(a,n))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,a,r=e.child,s=e.newProps,n=e.newChildProps,i=e.nestedChildren;switch(r.type){case yo.TITLE:return Wo({},s,((t={})[r.type]=i,t.titleAttributes=Wo({},n),t));case yo.BODY:return Wo({},s,{bodyAttributes:Wo({},n)});case yo.HTML:return Wo({},s,{htmlAttributes:Wo({},n)})}return Wo({},s,((a={})[r.type]=Wo({},n),a))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var a=Wo({},t);return Object.keys(e).forEach(function(t){var r;a=Wo({},a,((r={})[t]=e[t],r))}),a},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var a=this,r={};return ue.Children.forEach(e,function(e){if(e&&e.props){var s=e.props,n=s.children,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,a){return t[qo[a]||a]=e[a],t},t)}(Ko(s,["children"]));switch(a.warnOnInvalidChildren(e,n),e.type){case yo.LINK:case yo.META:case yo.NOSCRIPT:case yo.SCRIPT:case yo.STYLE:r=a.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:i,nestedChildren:n});break;default:t=a.mapObjectTypeChildren({child:e,newProps:t,newChildProps:i,nestedChildren:n})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,a=Ko(e,["children"]),r=Wo({},a);return t&&(r=this.mapChildrenToProps(t,r)),ue.createElement(wo,r)},Go(t,null,[{key:"canUseDOM",set:function(e){wo.canUseDOM=e}}]),t}(ue.Component),No.propTypes={base:no.object,bodyAttributes:no.object,children:no.oneOfType([no.arrayOf(no.node),no.node]),defaultTitle:no.string,defer:no.bool,encodeSpecialCharacters:no.bool,htmlAttributes:no.object,link:no.arrayOf(no.object),meta:no.arrayOf(no.object),noscript:no.arrayOf(no.object),onChangeClientState:no.func,script:no.arrayOf(no.object),style:no.arrayOf(no.object),title:no.string,titleAttributes:no.object,titleTemplate:no.string},No.defaultProps={defer:!0,encodeSpecialCharacters:!0},No.peek=wo.peek,No.rewind=function(){var e=wo.rewind();return e||(e=xl({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},Co);gl.renderStatic=gl.rewind;const bl=ue.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:un("rounded-xl border bg-card text-card-foreground shadow",e),...t}));bl.displayName="Card";const yl=ue.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:un("flex flex-col space-y-1.5 p-6",e),...t}));yl.displayName="CardHeader";const jl=ue.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:un("font-semibold leading-none tracking-tight",e),...t}));jl.displayName="CardTitle";const wl=ue.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:un("text-sm text-muted-foreground",e),...t}));wl.displayName="CardDescription";const Nl=ue.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:un("p-6 pt-0",e),...t}));Nl.displayName="CardContent";const Cl=ue.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:un("flex items-center p-6 pt-0",e),...t}));Cl.displayName="CardFooter";const Sl=A,El=k,Al=ue.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(h,{ref:r,className:un("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1","input-glass",e),...a,children:[t,s.jsx(x,{asChild:!0,children:s.jsx(Se,{className:"h-4 w-4 opacity-50"})})]}));Al.displayName=h.displayName;const kl=ue.forwardRef(({className:e,...t},a)=>s.jsx(v,{ref:a,className:un("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ee,{className:"h-4 w-4"})}));kl.displayName=v.displayName;const _l=ue.forwardRef(({className:e,...t},a)=>s.jsx(g,{ref:a,className:un("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Se,{className:"h-4 w-4"})}));_l.displayName=g.displayName;const Tl=ue.forwardRef(({className:e,children:t,position:a="popper",...r},n)=>s.jsx(b,{children:s.jsxs(y,{ref:n,className:un("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","card-glass","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[s.jsx(kl,{}),s.jsx(j,{className:un("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(_l,{})]})}));Tl.displayName=y.displayName;ue.forwardRef(({className:e,...t},a)=>s.jsx(w,{ref:a,className:un("py-1.5 pl-8 pr-2 text-sm font-semibold text-primary",e),...t})).displayName=w.displayName;const Rl=ue.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(N,{ref:r,className:un("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-surface focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(C,{children:s.jsx(Ae,{className:"h-4 w-4"})})}),s.jsx(S,{children:t})]}));Rl.displayName=N.displayName;ue.forwardRef(({className:e,...t},a)=>s.jsx(E,{ref:a,className:un("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=E.displayName;const Pl=[{name:"Argentina",code:"AR",phoneCode:"54",provinces:["Buenos Aires","Catamarca","Chaco","Chubut","Ciudad Autónoma de Buenos Aires","Córdoba","Corrientes","Entre Ríos","Formosa","Jujuy","La Pampa","La Rioja","Mendoza","Misiones","Neuquén","Río Negro","Salta","San Juan","San Luis","Santa Cruz","Santa Fe","Santiago del Estero","Tierra del Fuego","Tucumán"]},{name:"Bolivia",code:"BO",phoneCode:"591",provinces:["Beni","Chuquisaca","Cochabamba","La Paz","Oruro","Pando","Potosí","Santa Cruz","Tarija"]},{name:"Brasil",code:"BR",phoneCode:"55",provinces:["Acre","Alagoas","Amapá","Amazonas","Bahia","Ceará","Distrito Federal","Espírito Santo","Goiás","Maranhão","Mato Grosso","Mato Grosso do Sul","Minas Gerais","Pará","Paraíba","Paraná","Pernambuco","Piauí","Rio de Janeiro","Rio Grande do Norte","Rio Grande do Sul","Rondônia","Roraima","Santa Catarina","São Paulo","Sergipe","Tocantins"]},{name:"Chile",code:"CL",phoneCode:"56",provinces:["Arica y Parinacota","Tarapacá","Antofagasta","Atacama","Coquimbo","Valparaíso","Metropolitana de Santiago","Libertador General Bernardo O'Higgins","Maule","Ñuble","Biobío","La Araucanía","Los Ríos","Los Lagos","Aysén del General Carlos Ibáñez del Campo","Magallanes y de la Antártica Chilena"]},{name:"Colombia",code:"CO",phoneCode:"57",provinces:["Amazonas","Antioquia","Arauca","Atlántico","Bogotá","Bolívar","Boyacá","Caldas","Caquetá","Casanare","Cauca","Cesar","Chocó","Córdoba","Cundinamarca","Guainía","Guaviare","Huila","La Guajira","Magdalena","Meta","Nariño","Norte de Santander","Putumayo","Quindío","Risaralda","San Andrés y Providencia","Santander","Sucre","Tolima","Valle del Cauca","Vaupés","Vichada"]},{name:"Ecuador",code:"EC",phoneCode:"593",provinces:["Azuay","Bolívar","Cañar","Carchi","Chimborazo","Cotopaxi","El Oro","Esmeraldas","Galápagos","Guayas","Imbabura","Loja","Los Ríos","Manabí","Morona-Santiago","Napo","Orellana","Pastaza","Pichincha","Santa Elena","Santo Domingo de los Tsáchilas","Sucumbíos","Tungurahua","Zamora-Chinchipe"]},{name:"Paraguay",code:"PY",phoneCode:"595",provinces:["Asunción","Concepción","San Pedro","Cordillera","Guairá","Caaguazú","Caazapá","Itapúa","Misiones","Paraguarí","Alto Paraná","Central","Ñeembucú","Amambay","Canindeyú","Presidente Hayes","Boquerón","Alto Paraguay"]},{name:"Perú",code:"PE",phoneCode:"51",provinces:["Amazonas","Áncash","Apurímac","Arequipa","Ayacucho","Cajamarca","Callao","Cusco","Huancavelica","Huánuco","Ica","Junín","La Libertad","Lambayeque","Lima","Loreto","Madre de Dios","Moquegua","Pasco","Piura","Puno","San Martín","Tacna","Tumbes","Ucayali"]},{name:"Uruguay",code:"UY",phoneCode:"598",provinces:["Artigas","Canelones","Cerro Largo","Colonia","Durazno","Flores","Florida","Lavalleja","Maldonado","Montevideo","Paysandú","Río Negro","Rivera","Rocha","Salto","San José","Soriano","Tacuarembó","Treinta y Tres"]},{name:"Venezuela",code:"VE",phoneCode:"58",provinces:["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","Lara","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Vargas","Yaracuy","Zulia"]}],Dl=e=>{const t=e.length>=8,a=/[A-Z]/.test(e),r=/[!@#$%^&*(),.?":{}|<>]/.test(e);return{isValid:t&&a&&r,errors:{minLength:t?null:"La contraseña debe tener al menos 8 caracteres",hasUppercase:a?null:"Debe contener al menos una mayúscula",hasSymbol:r?null:"Debe contener al menos un símbolo"}}},Ol=e=>{const t=e.toLowerCase();return["menor","niño","niña","infantil","pedofil","animal","zoofil","idiota","estúpido","negro de mierda","judío","maricón","puto","puta madre"].some(e=>t.includes(e))},Ml=e=>{const t=e.toLowerCase();return["pago","dinero","precio","tarifa","cobro","prostitut","escort","servicio sexual","por plata","por dinero","webcam pago"].some(e=>t.includes(e))},Fl=e=>/(\+?\d{1,4}[\s-]?)?\(?\d{1,4}\)?[\s-]?\d{1,4}[\s-]?\d{1,9}/.test(e)||/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/.test(e)||/(whatsapp|wsp|wa\.me)/i.test(e),Il=({formData:e,updateFormData:t,nextStep:a})=>{const{toast:r}=br(),n=le.useMemo(()=>(e=>{const t=Pl.find(t=>t.name===e);return t?t.provinces:[]})(e.pais),[e.pais]),i=e=>{t({[e.target.id]:e.target.value})},o=(e,a)=>{const r={[e]:a};if("pais"===e){r.provincia="";const e=(e=>{const t=Pl.find(t=>t.name===e);return t?t.phoneCode:""})(a);e&&(r.telefono=`+${e}`)}t(r)};return s.jsxs(bl,{className:"w-full max-w-lg bg-surface border-secondary/30 text-text-primary",children:[s.jsxs(yl,{className:"text-center",children:[s.jsx(jl,{className:"text-3xl font-bold text-secondary",children:"1° PASO"}),s.jsx(wl,{className:"text-text-secondary",children:"Es rápido, fácil y el primer paso para conectar."})]}),s.jsx(Nl,{children:s.jsxs("form",{onSubmit:t=>{t.preventDefault();const s=["nombre_completo","alias","documento","pais","provincia","municipio","telefono","email"];for(const a of s)if(!e[a])return void r({variant:"destructive",title:"Campos incompletos",description:"Por favor, completa todos los campos."});if(n=e.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return void r({variant:"destructive",title:"Email inválido",description:"Por favor, ingresa un correo electrónico válido."});var n;const i=[e.nombre_completo,e.alias,e.municipio];for(const e of i)if(Ol(e)||Ml(e)||Fl(e))return void r({variant:"destructive",title:"Contenido no permitido",description:"Hemos detectado contenido inapropiado en uno de los campos. Por favor, revísalo."});a()},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"nombre_completo",className:"text-primary",children:"Nombre completo"}),s.jsx(Oi,{id:"nombre_completo",value:e.nombre_completo,onChange:i,required:!0,className:"input-glass"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"alias",className:"text-primary",children:"Alias (apodo)"}),s.jsx(Oi,{id:"alias",value:e.alias,onChange:i,required:!0,className:"input-glass"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"documento",className:"text-primary",children:"DNI / Cédula / Pasaporte"}),s.jsx(Oi,{id:"documento",value:e.documento,onChange:i,required:!0,className:"input-glass"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"pais",className:"text-primary",children:"País / Región"}),s.jsxs(Sl,{onValueChange:e=>o("pais",e),value:e.pais,required:!0,children:[s.jsx(Al,{id:"pais",className:"input-glass",children:s.jsx(El,{placeholder:"Selecciona tu país"})}),s.jsx(Tl,{children:Pl.map(e=>s.jsx(Rl,{value:e.name,children:e.name},e.code))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"provincia",className:"text-primary",children:"Provincia / Estado"}),s.jsxs(Sl,{onValueChange:e=>o("provincia",e),value:e.provincia,disabled:!e.pais,required:!0,children:[s.jsx(Al,{id:"provincia",className:"input-glass",children:s.jsx(El,{placeholder:"Selecciona tu provincia"})}),s.jsx(Tl,{children:n.map(e=>s.jsx(Rl,{value:e,children:e},e))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"municipio",className:"text-primary",children:"Municipio / Localidad"}),s.jsx(Oi,{id:"municipio",value:e.municipio,onChange:i,required:!0,className:"input-glass"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"telefono",className:"text-primary",children:"Teléfono"}),s.jsx(Oi,{id:"telefono",type:"tel",value:e.telefono,onChange:i,required:!0,className:"input-glass",placeholder:"+54 11 2345-6789"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Vi,{htmlFor:"email",className:"text-primary",children:"Correo electrónico"}),s.jsx(Oi,{id:"email",type:"email",value:e.email,onChange:i,required:!0,className:"input-glass"})]}),s.jsx(pn,{type:"submit",className:"w-full btn-action",children:"Continuar"})]})}),s.jsx(Cl,{className:"flex flex-col items-center",children:s.jsxs("p",{className:"mt-2 text-center text-sm text-text-secondary",children:["¿Ya tienes una cuenta?"," ",s.jsx(ar,{to:"/login",className:"font-medium text-primary hover:underline",children:"Inicia Sesión"})]})})]})},Ll=({isValid:e,text:t})=>s.jsxs("div",{className:"flex items-center text-xs "+(e?"text-green-400":"text-text-secondary"),children:[e?s.jsx(Te,{className:"w-3 h-3 mr-1.5"}):s.jsx(Re,{className:"w-3 h-3 mr-1.5"}),t]}),Vl=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M7.72 4.28a.2.2 0 0 0-.18.32l2.35 12.33a.2.2 0 0 0 .2.16h2.86a.2.2 0 0 0 .2-.16L15.48 4.6a.2.2 0 0 0-.19-.32h-3.1a.2.2 0 0 1-.2-.16L9.64 2.3a.2.2 0 0 0-.2-.16H6.5a.2.2 0 0 0-.2.16L3.95 16.9a.2.2 0 0 0 .2.16h2.82a.2.2 0 0 0 .2-.16l.7-3.66h.1a.2.2 0 0 0 .2-.16l.29-1.5a.2.2 0 0 0-.2-.25h-2.1a.2.2 0 0 1-.2-.16l.94-4.88a.2.2 0 0 1 .2-.16h2.92a.2.2 0 0 1 .2.16L7.72 4.28z"})}),zl=({formData:e,updateFormData:t,nextStep:a,prevStep:r})=>{const{toast:n}=br(),[i,o]=le.useState(!1),[l,c]=le.useState(!1),d=le.useMemo(()=>{const{errors:t}=Dl(e.password);return{minLength:!t.minLength,hasUppercase:!t.hasUppercase,hasSymbol:!t.hasSymbol}},[e.password]),u=e=>{t({[e.target.id]:e.target.value})};return s.jsxs(bl,{className:"w-full max-w-lg bg-surface border-secondary/30 text-text-primary",children:[s.jsxs(yl,{className:"text-center",children:[s.jsx(jl,{className:"text-3xl font-bold text-secondary",children:"2° PASO"}),s.jsx(wl,{className:"text-text-secondary",children:"Crea tu contraseña y valida tu cuenta."})]}),s.jsx(Nl,{children:s.jsxs("form",{onSubmit:t=>{t.preventDefault();const{isValid:r}=Dl(e.password);r?e.password===e.confirmPassword?(n({title:"¡Validación con PayPal exitosa!",description:"Se ha simulado un pago de 1 USD. Serás redirigido al último paso.",className:"bg-blue-600 text-white"}),setTimeout(()=>{a()},1500)):n({variant:"destructive",title:"Las contraseñas no coinciden",description:"Por favor, verifica tu contraseña."}):n({variant:"destructive",title:"Contraseña inválida",description:"Asegúrate de que tu contraseña cumpla los requisitos."})},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2 relative",children:[s.jsx(Vi,{htmlFor:"password",children:"Contraseña"}),s.jsx(Oi,{id:"password",type:i?"text":"password",value:e.password,onChange:u,required:!0,className:"input-glass pr-10"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-9 text-text-secondary",children:i?s.jsx(ke,{className:"w-4 h-4"}):s.jsx(_e,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2 relative",children:[s.jsx(Vi,{htmlFor:"confirmPassword",children:"Confirmar Contraseña"}),s.jsx(Oi,{id:"confirmPassword",type:l?"text":"password",value:e.confirmPassword,onChange:u,required:!0,className:"input-glass pr-10"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-9 text-text-secondary",children:l?s.jsx(ke,{className:"w-4 h-4"}):s.jsx(_e,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"pt-1 space-y-1",children:[s.jsx(Ll,{isValid:d.minLength,text:"8+ caracteres"}),s.jsx(Ll,{isValid:d.hasUppercase,text:"1 mayúscula"}),s.jsx(Ll,{isValid:d.hasSymbol,text:"1 símbolo"})]})]}),s.jsxs("div",{className:"space-y-4 border-t border-border-color pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-center text-primary",children:"Validación de Identidad"}),s.jsx("p",{className:"text-sm text-center text-text-secondary",children:"Para prevenir cuentas falsas y asegurar la calidad de nuestra comunidad, requerimos una validación única de 1 USD a través de PayPal. Esto no es una suscripción."}),s.jsx("p",{className:"text-xs text-center text-brand-red font-semibold pt-2",children:"(El titular de la cuenta de PayPal debe ser el mismo que el del perfil que se está creando)"}),s.jsxs(pn,{type:"submit",className:"w-full btn-action bg-[#0070BA] hover:bg-[#005ea6] text-white font-bold py-3 text-lg flex items-center justify-center gap-2",children:[s.jsx(Vl,{}),"Pagar 1 USD con PayPal"]})]}),s.jsx("div",{className:"flex justify-between items-center pt-4",children:s.jsx(pn,{type:"button",variant:"outline",onClick:r,children:"Atrás"})})]})})]})};function Ul(e){const t=le.useRef({value:e,previous:e});return le.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ql="Checkbox",[$l,Hl]=_(ql),[Bl,Gl]=$l(ql);function Wl(e){const{__scopeCheckbox:t,checked:a,children:r,defaultChecked:n,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=e,[p,f]=O({prop:a,defaultProp:n??!1,onChange:c,caller:ql}),[h,x]=le.useState(null),[v,g]=le.useState(null),b=le.useRef(!1),y=!h||(!!o||!!h.closest("form")),j={checked:p,disabled:i,setChecked:f,control:h,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:!ac(n)&&n,isFormControl:y,bubbleInput:v,setBubbleInput:g};return s.jsx(Bl,{scope:t,...j,children:tc(m)?m(j):r})}var Kl="CheckboxTrigger",Yl=le.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...r},n)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:x}=Gl(Kl,e),v=T(n,u),g=le.useRef(c);return le.useEffect(()=>{const e=null==i?void 0:i.form;if(e){const t=()=>m(g.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,m]),s.jsx(f.button,{type:"button",role:"checkbox","aria-checked":ac(c)?"mixed":c,"aria-required":d,"data-state":rc(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:R(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:R(a,e=>{m(e=>!!ac(e)||!e),x&&h&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});Yl.displayName=Kl;var Jl=le.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:r,checked:n,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...m}=e;return s.jsx(Wl,{__scopeCheckbox:a,checked:n,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>s.jsxs(s.Fragment,{children:[s.jsx(Yl,{...m,ref:t,__scopeCheckbox:a}),e&&s.jsx(ec,{__scopeCheckbox:a})]})})});Jl.displayName=ql;var Xl="CheckboxIndicator",Zl=le.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:r,...n}=e,i=Gl(Xl,a);return s.jsx(P,{present:r||ac(i.checked)||!0===i.checked,children:s.jsx(f.span,{"data-state":rc(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});Zl.displayName=Xl;var Ql="CheckboxBubbleInput",ec=le.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:r,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:m,bubbleInput:p,setBubbleInput:h}=Gl(Ql,e),x=T(a,h),v=Ul(i),g=D(r);le.useEffect(()=>{const e=p;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set,r=!n.current;if(v!==i&&a){const t=new Event("click",{bubbles:r});e.indeterminate=ac(i),a.call(e,!ac(i)&&i),e.dispatchEvent(t)}},[p,v,i,n]);const b=le.useRef(!ac(i)&&i);return s.jsx(f.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:d,value:u,form:m,...t,tabIndex:-1,ref:x,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function tc(e){return"function"==typeof e}function ac(e){return"indeterminate"===e}function rc(e){return ac(e)?"indeterminate":e?"checked":"unchecked"}ec.displayName=Ql;const sc=ue.forwardRef(({className:e,...t},a)=>s.jsx(Jl,{ref:a,className:un("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Zl,{className:un("flex items-center justify-center text-current"),children:s.jsx(Ae,{className:"h-4 w-4"})})}));sc.displayName=Jl.displayName;const nc=({formData:e,updateFormData:t,prevStep:a,handleFinalSubmit:r,loading:n})=>{const{toast:i}=br();return s.jsxs(bl,{className:"w-full max-w-lg bg-surface border-secondary/30 text-text-primary",children:[s.jsxs(yl,{className:"text-center",children:[s.jsx(jl,{className:"text-3xl font-bold text-secondary",children:"3° YA VALIDASTE TUS DATOS"}),s.jsx(wl,{className:"text-text-secondary",children:"Solo un paso más para unirte a la comunidad."})]}),s.jsx(Nl,{children:s.jsxs("form",{onSubmit:t=>{t.preventDefault(),e.agreedToTerms&&e.agreedToPrivacy&&e.agreedToSecurity?r():i({variant:"destructive",title:"Aceptación requerida",description:"Debes aceptar todos los términos y políticas para continuar."})},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(sc,{id:"agreedToTerms",checked:e.agreedToTerms,onCheckedChange:e=>t({agreedToTerms:e}),className:"mt-1"}),s.jsxs(Vi,{htmlFor:"agreedToTerms",className:"font-normal",children:["Acepto los ",s.jsx("a",{href:"/terms",target:"_blank",className:"text-primary hover:underline",children:"Términos y Condiciones"}),"."]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(sc,{id:"agreedToPrivacy",checked:e.agreedToPrivacy,onCheckedChange:e=>t({agreedToPrivacy:e}),className:"mt-1"}),s.jsxs(Vi,{htmlFor:"agreedToPrivacy",className:"font-normal",children:["Acepto las ",s.jsx("a",{href:"/privacy",target:"_blank",className:"text-primary hover:underline",children:"Políticas de Privacidad"}),"."]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(sc,{id:"agreedToSecurity",checked:e.agreedToSecurity,onCheckedChange:e=>t({agreedToSecurity:e}),className:"mt-1"}),s.jsxs(Vi,{htmlFor:"agreedToSecurity",className:"font-normal",children:["Acepto las ",s.jsx("a",{href:"/security",target:"_blank",className:"text-primary hover:underline",children:"Políticas de Seguridad"}),"."]})]})]}),s.jsx("div",{className:"text-center text-sm text-text-secondary pt-4",children:s.jsx("p",{children:"Crea tu cuenta y pasarás a completar tu perfil de búsquedas y tu primera publicación."})}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx(pn,{type:"button",variant:"outline",onClick:a,children:"Atrás"}),s.jsx(pn,{type:"submit",disabled:n,className:"btn-action",children:n?"Creando cuenta...":"Crear Cuenta"})]})]})})]})},ic=()=>{const{toast:e}=br(),t=_a(),{signUp:a,signIn:r}=wr(),[n,i]=le.useState(!1),[o,l]=le.useState(1),[c,d]=le.useState({nombre_completo:"",alias:"",documento:"",municipio:"",provincia:"",pais:"",telefono:"",email:"",password:"",confirmPassword:"",agreedToTerms:!1,agreedToPrivacy:!1,agreedToSecurity:!1}),u=()=>l(e=>e+1),m=()=>l(e=>e-1),p=e=>{d(t=>({...t,...e}))},f=async()=>{i(!0);const{agreedToTerms:s,agreedToPrivacy:n,agreedToSecurity:o,confirmPassword:l,...d}=c,{data:u,error:m}=await a(d);if(m)return e({variant:"destructive",title:"Error de registro",description:"User already registered"===m.message?"El email ya está en uso. Por favor, intenta con otro.":"Ocurrió un error al crear tu cuenta: "+m.message}),void i(!1);u.user?(e({title:"¡Cuenta creada exitosamente!",description:"Validación de 1 USD con PayPal completada. ¡Bienvenido!",className:"bg-primary text-background"}),await r(d.email,d.password),t("/profile")):e({variant:"destructive",title:"Error inesperado",description:"No se pudo crear el usuario. Por favor, intenta de nuevo."}),i(!1)},h=`Registro (Paso ${o||1} de 3) - AGARCH-AR`;return s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:h}),s.jsx("meta",{name:"description",content:"Crea tu cuenta en AGARCH-AR y empieza a conectar."})]}),s.jsx(Pe,{mode:"wait",children:s.jsx(be.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:(()=>{switch(o){case 1:default:return s.jsx(Il,{formData:c,updateFormData:p,nextStep:u});case 2:return s.jsx(zl,{formData:c,updateFormData:p,nextStep:u,prevStep:m});case 3:return s.jsx(nc,{formData:c,updateFormData:p,prevStep:m,handleFinalSubmit:f,loading:n})}})()},o)})]})},oc=[{icon:Oe,text:"Descubrir",path:"/"},{icon:Me,text:"Chats",path:"/chat"},{icon:Fe,text:"Mi Perfil",path:"/profile"},{icon:Ie,text:"Buscar",path:"/search"},{icon:Le,text:"Ajustes",path:"/settings"}],lc=()=>{const{user:e,profile:t,signOut:a}=wr(),r=_a(),n="admin"===(null==t?void 0:t.role),i={backgroundColor:"rgba(var(--primary), 0.2)",color:"rgb(var(--primary))",boxShadow:"inset 3px 0 0 0 rgb(var(--primary))"};return s.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-surface p-4 transition-all duration-300 shrink-0",children:[s.jsx(be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"text-2xl font-bold text-center py-4 text-brand-red uppercase",children:"AGARCH-AR"}),s.jsxs("nav",{className:"flex flex-col space-y-2 mt-8 flex-1",children:[oc.map(e=>s.jsxs(rr,{to:e.path,end:"/"===e.path,style:({isActive:e})=>e?i:{},className:"flex items-center px-4 py-3 text-text-secondary rounded-lg hover:bg-border-color hover:text-text-primary transition-colors",children:[s.jsx(e.icon,{className:"w-5 h-5 mr-4"}),s.jsx("span",{className:"font-medium",children:e.text})]},e.text)),n&&s.jsxs(rr,{to:"/admin",style:({isActive:e})=>e?i:{},className:"flex items-center px-4 py-3 text-text-secondary rounded-lg hover:bg-border-color hover:text-text-primary transition-colors",children:[s.jsx(ge,{className:"w-5 h-5 mr-4"}),s.jsx("span",{className:"font-medium",children:"Panel Admin"})]})]}),s.jsxs("div",{className:"mt-auto",children:[e&&s.jsxs("div",{className:"flex items-center p-2 mb-4",children:[s.jsx("img",{className:"w-10 h-10 rounded-full object-cover mr-3",alt:(null==t?void 0:t.alias)||"User avatar",src:(null==t?void 0:t.profile_picture_url)||"https://images.unsplash.com/photo-1639268230206-ef0e0f308a06"}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("p",{className:"font-semibold text-text-primary truncate",children:(null==t?void 0:t.alias)||"Usuario"}),s.jsx("p",{className:"text-sm text-text-secondary truncate",children:e.email})]})]}),s.jsxs(pn,{onClick:async()=>{await a(),r("/landing")},variant:"ghost",className:"w-full justify-start text-text-secondary hover:text-destructive",children:[s.jsx(De,{className:"w-5 h-5 mr-4"}),"Cerrar Sesión"]})]})]})},cc=B,dc=G,uc=I,mc=W,pc=ue.forwardRef(({className:e,inset:t,children:a,...r},n)=>s.jsxs(M,{ref:n,className:un("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[a,s.jsx(Ve,{className:"ml-auto h-4 w-4"})]}));pc.displayName=M.displayName;const fc=ue.forwardRef(({className:e,...t},a)=>s.jsx(F,{ref:a,className:un("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));fc.displayName=F.displayName;const hc=ue.forwardRef(({className:e,sideOffset:t=4,...a},r)=>s.jsx(I,{children:s.jsx(L,{ref:r,sideOffset:t,className:un("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));hc.displayName=L.displayName;const xc=ue.forwardRef(({className:e,inset:t,...a},r)=>s.jsx(V,{ref:r,className:un("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));xc.displayName=V.displayName;ue.forwardRef(({className:e,children:t,checked:a,...r},n)=>s.jsxs(z,{ref:n,className:un("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(U,{children:s.jsx(Ae,{className:"h-4 w-4"})})}),t]})).displayName=z.displayName;ue.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(q,{ref:r,className:un("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(U,{children:s.jsx(ze,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=q.displayName;const vc=ue.forwardRef(({className:e,inset:t,...a},r)=>s.jsx($,{ref:r,className:un("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));vc.displayName=$.displayName;const gc=ue.forwardRef(({className:e,...t},a)=>s.jsx(H,{ref:a,className:un("-mx-1 my-1 h-px bg-muted",e),...t}));gc.displayName=H.displayName;const bc={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},yc={date:Ue({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:Ue({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Ue({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},jc={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},wc={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Nc={code:"es",formatDistance:(e,t,a)=>{let r;const s=bc[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==a?void 0:a.addSuffix)?a.comparison&&a.comparison>0?"en "+r:"hace "+r:r},formatLong:yc,formatRelative:(e,t,a,r)=>1!==t.getHours()?wc[e]:jc[e],localize:{ordinalNumber:(e,t)=>Number(e)+"º",era:qe({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:qe({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:qe({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:qe({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:qe({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:$e({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:He({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:He({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:He({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:He({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:He({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}},Cc=()=>{const{user:e}=wr(),{toast:t}=br(),a=_a(),[r,n]=le.useState([]),[i,o]=le.useState(0),[l,c]=le.useState(!1),d=le.useRef(null),u=le.useCallback(async()=>{if(!e)return;c(!0);const{data:a,error:r}=await lr.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(10);r?t({variant:"destructive",title:"Error",description:"No se pudieron cargar las notificaciones."}):(n(a),o(a.filter(e=>!e.is_read).length)),c(!1)},[e,t]);le.useEffect(()=>{if(e){u();const a=lr.channel("public:notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${null==e?void 0:e.id}`},a=>{var r,s;(null==(r=null==a?void 0:a.new)?void 0:r.user_id)===e.id&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{u()},300),(null==(s=null==a?void 0:a.new)?void 0:s.message)&&t({title:"Nueva notificación",description:a.new.message}))}).subscribe();return()=>{d.current&&clearTimeout(d.current),lr.removeChannel(a)}}},[e,u,t]);return s.jsxs(cc,{onOpenChange:u,children:[s.jsx(dc,{asChild:!0,children:s.jsxs(pn,{variant:"ghost",className:"relative",children:[s.jsx(Be,{className:"h-6 w-6"}),i>0&&s.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:i})]})}),s.jsxs(hc,{className:"w-80 card-glass",align:"end",children:[s.jsxs(vc,{className:"flex justify-between items-center",children:["Notificaciones",i>0&&s.jsx(pn,{variant:"link",size:"sm",onClick:async()=>{const{error:t}=await lr.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1);t||u()},className:"p-0 h-auto text-xs",children:"Marcar como leídas"})]}),s.jsx(gc,{}),l?s.jsx("div",{className:"flex justify-center p-4",children:s.jsx(Ge,{className:"animate-spin"})}):0===r.length?s.jsx("p",{className:"text-center text-sm text-text-secondary p-4",children:"No tienes notificaciones."}):r.map(e=>s.jsx(xc,{onSelect:t=>{t.preventDefault(),(async e=>{if(!e.is_read){const{error:t}=await lr.from("notifications").update({is_read:!0}).eq("id",e.id);t||(o(e=>Math.max(0,e-1)),n(t=>t.map(t=>t.id===e.id?{...t,is_read:!0}:t)))}if("new_message"===e.type&&e.link){const t=e.link.split("/"),r=t[t.length-1];a("/chat",{state:{openChatWith:r}})}else e.link&&a(e.link)})(e)},className:"cursor-pointer focus:bg-accent/80 "+(e.is_read?"":"font-bold"),children:s.jsxs("div",{className:"flex items-start gap-3 py-2",children:[!e.is_read&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-1.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-text-primary",children:e.message}),s.jsx("p",{className:"text-xs text-text-secondary",children:We(new Date(e.created_at),{addSuffix:!0,locale:Nc})})]})]})},e.id))]})]})},Sc=[{icon:Oe,text:"Descubrir",path:"/"},{icon:Me,text:"Chats",path:"/chat"},{icon:Fe,text:"Perfil",path:"/profile"},{icon:Ie,text:"Buscar",path:"/search"},{icon:Le,text:"Ajustes",path:"/settings"}],Ec=()=>{const{profile:e}=wr(),t="admin"===(null==e?void 0:e.role),a={color:"rgb(var(--primary))",borderBottom:"2px solid rgb(var(--primary))"};return s.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-surface border-b border-border-color p-2 flex justify-between items-center z-40",children:[s.jsx("div",{className:"md:hidden flex-1 overflow-x-auto scrollbar-hide",children:s.jsxs("nav",{className:"flex flex-nowrap space-x-6 px-2 py-1",children:[Sc.map(e=>s.jsxs(rr,{to:e.path,end:"/"===e.path,style:({isActive:e})=>e?a:{},className:"flex flex-col items-center text-text-secondary hover:text-primary transition-colors pb-1 shrink-0",children:[s.jsx(e.icon,{className:"w-6 h-6"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:e.text})]},e.text)),t&&s.jsxs(rr,{to:"/admin",style:({isActive:e})=>e?a:{},className:"flex flex-col items-center text-text-secondary hover:text-primary transition-colors pb-1 shrink-0",children:[s.jsx(ge,{className:"w-6 h-6"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"Admin"})]})]})}),s.jsx("div",{className:"hidden md:flex flex-1 items-center justify-end",children:s.jsx(Cc,{})}),s.jsx("div",{className:"md:hidden",children:s.jsx(Cc,{})})]})},Ac=({children:e})=>s.jsxs("div",{className:"flex min-h-screen bg-background text-text-primary",children:[s.jsx(lc,{}),s.jsxs("div",{className:"flex-1 flex flex-col md:ml-64",children:[s.jsx(Ec,{}),s.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pt-24 md:pt-8 pb-24 md:pb-8",children:e})]})]});function kc(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]}),{});return le.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}const _c=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?le.useLayoutEffect:()=>{};function Tc(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}const Rc=le.forwardRef((e,t)=>{const{children:a,...r}=e,s=le.Children.toArray(a),n=s.find(Oc);if(n){const e=n.props.children,a=s.map(t=>t===n?le.Children.count(e)>1?le.Children.only(null):le.isValidElement(e)?e.props.children:null:t);return le.createElement(Pc,K({},r,{ref:t}),le.isValidElement(e)?le.cloneElement(e,void 0,a):null)}return le.createElement(Pc,K({},r,{ref:t}),a)});Rc.displayName="Slot";const Pc=le.forwardRef((e,t)=>{const{children:a,...r}=e;return le.isValidElement(a)?le.cloneElement(a,{...Mc(r,a.props),ref:t?Tc(t,a.ref):a.ref}):le.Children.count(a)>1?le.Children.only(null):null});Pc.displayName="SlotClone";const Dc=({children:e})=>le.createElement(le.Fragment,null,e);function Oc(e){return le.isValidElement(e)&&e.type===Dc}function Mc(e,t){const a={...t};for(const r in t){const s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{n(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}const Fc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const a=le.forwardRef((e,a)=>{const{asChild:r,...s}=e,n=r?Rc:t;return le.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),le.createElement(n,K({},s,{ref:a}))});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),Ic="Avatar",[Lc,Vc]=function(e,t=[]){let a=[];const r=()=>{const t=a.map(e=>le.createContext(e));return function(a){const r=(null==a?void 0:a[e])||t;return le.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){const s=le.createContext(r),n=a.length;function i(t){const{scope:a,children:r,...i}=t,o=(null==a?void 0:a[e][n])||s,l=le.useMemo(()=>i,Object.values(i));return le.createElement(o.Provider,{value:l},r)}return a=[...a,r],i.displayName=t+"Provider",[i,function(a,i){const o=(null==i?void 0:i[e][n])||s,l=le.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},kc(r,...t)]}(Ic),[zc,Uc]=Lc(Ic);const qc=le.forwardRef((e,t)=>{const{__scopeAvatar:a,...r}=e,[s,n]=le.useState("idle");return le.createElement(zc,{scope:a,imageLoadingStatus:s,onImageLoadingStatusChange:n},le.createElement(Fc.span,K({},r,{ref:t})))}),$c=le.forwardRef((e,t)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:s=()=>{},...n}=e,i=Uc("AvatarImage",a),o=function(e){const[t,a]=le.useState("idle");return _c(()=>{if(!e)return void a("error");let t=!0;const r=new window.Image,s=e=>()=>{t&&a(e)};return a("loading"),r.onload=s("loaded"),r.onerror=s("error"),r.src=e,()=>{t=!1}},[e]),t}(r),l=function(e){const t=le.useRef(e);return le.useEffect(()=>{t.current=e}),le.useMemo(()=>(...e)=>{var a;return null===(a=t.current)||void 0===a?void 0:a.call(t,...e)},[])}(e=>{s(e),i.onImageLoadingStatusChange(e)});return _c(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?le.createElement(Fc.img,K({},n,{ref:t,src:r})):null}),Hc=le.forwardRef((e,t)=>{const{__scopeAvatar:a,delayMs:r,...s}=e,n=Uc("AvatarFallback",a),[i,o]=le.useState(void 0===r);return le.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),i&&"loaded"!==n.imageLoadingStatus?le.createElement(Fc.span,K({},s,{ref:t})):null}),Bc=ue.forwardRef(({className:e,...t},a)=>s.jsx(qc,{ref:a,className:un("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Bc.displayName=qc.displayName;const Gc=ue.forwardRef(({className:e,...t},a)=>s.jsx($c,{ref:a,className:un("aspect-square h-full w-full",e),...t}));Gc.displayName=$c.displayName;const Wc=ue.forwardRef(({className:e,...t},a)=>s.jsx(Hc,{ref:a,className:un("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Wc.displayName=Hc.displayName;const Kc=({postId:e,onClose:t,commentsCount:a})=>{var r;const[n,i]=le.useState([]),[o,l]=le.useState(""),[c,d]=le.useState(!0),[u,m]=le.useState(!1),[p,f]=le.useState(a),{user:h,profile:x}=wr(),{toast:v}=br(),g=le.useRef(null),b=le.useCallback(async()=>{d(!0);const{data:t,error:a}=await lr.from("comentarios").select("\n            *,\n            profile:usuario_id (\n              alias,\n              profile_picture_url\n            )\n          ").eq("publicacion_id",e).order("creado_en",{ascending:!0});a?v({variant:"destructive",title:"Error al cargar comentarios",description:"No se pudieron obtener los comentarios."}):i(t||[]),d(!1)},[e,v]);le.useEffect(()=>{b()},[b]),le.useEffect(()=>{const t=lr.channel(`comments-for-post-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"comentarios",filter:`publicacion_id=eq.${e}`},e=>{b(),"INSERT"===e.eventType?f(e=>(e||0)+1):"DELETE"===e.eventType&&f(e=>Math.max(0,(e||0)-1))}).subscribe();return()=>{lr.removeChannel(t)}},[e,b]),le.useEffect(()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},[n]);const y=async t=>{if(t.preventDefault(),!o.trim()||u)return;m(!0);const{error:a}=await lr.from("comentarios").insert({publicacion_id:e,usuario_id:h.id,texto:o});a?v({variant:"destructive",title:"Error al publicar",description:"No se pudo enviar tu comentario."}):l(""),m(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",onClick:t,children:s.jsxs("div",{className:"bg-background rounded-2xl shadow-xl w-full max-w-lg h-[90vh] flex flex-col mx-4",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[s.jsx("h2",{className:"text-xl font-bold text-center flex-grow",children:"Comentarios"}),s.jsx(pn,{variant:"ghost",size:"icon",onClick:t,children:s.jsx(pe,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:[c?s.jsx("p",{className:"text-center text-text-secondary",children:"Cargando comentarios..."}):n.length>0?n.map(e=>{var t,a,r,n,i;return s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsxs(Bc,{className:"h-10 w-10",children:[s.jsx(Gc,{src:null==(t=e.profile)?void 0:t.profile_picture_url,alt:null==(a=e.profile)?void 0:a.alias}),s.jsx(Wc,{children:null==(n=null==(r=e.profile)?void 0:r.alias)?void 0:n[0]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-sm",children:null==(i=e.profile)?void 0:i.alias}),s.jsx("p",{className:"text-text-primary text-sm",children:e.texto})]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1 ml-2",children:We(new Date(e.creado_en),{addSuffix:!0,locale:Nc})})]})]},e.id)}):s.jsx("p",{className:"text-center text-text-secondary py-8",children:"Sé el primero en comentar."}),s.jsx("div",{ref:g})]}),s.jsx("div",{className:"p-4 border-t border-border mt-auto",children:s.jsxs("form",{onSubmit:y,className:"flex items-center space-x-2",children:[s.jsxs(Bc,{className:"h-10 w-10",children:[s.jsx(Gc,{src:null==x?void 0:x.profile_picture_url,alt:null==x?void 0:x.alias}),s.jsx(Wc,{children:null==(r=null==x?void 0:x.alias)?void 0:r[0]})]}),s.jsx(Mi,{value:o,onChange:e=>l(e.target.value),placeholder:"Escribe un comentario...",className:"flex-grow bg-muted border-none focus-visible:ring-primary",rows:1,onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y(e))}}),s.jsx(pn,{type:"submit",size:"icon",disabled:u||!o.trim(),children:s.jsx(Ke,{className:"h-5 w-5"})})]})})]})})},Yc=({post:e,onLikeToggle:t})=>{const{user:a}=wr(),{toast:r}=br(),n=_a(),[i,o]=le.useState(!1),[l,c]=le.useState(null==e?void 0:e.is_liked),[d,u]=le.useState(null==e?void 0:e.likes_count);if(!e||!e.author)return null;const{author:m,text:p,image_url:f,video_url:h,created_at:x,likes_count:v,comments_count:g,id:b}=e;return s.jsxs(s.Fragment,{children:[s.jsxs(be.div,{layout:!0,className:"card-glass p-4 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{m&&m.id&&n(`/profile/${m.id}`)},children:[s.jsxs(Bc,{children:[s.jsx(Gc,{src:m.profile_picture_url||"",alt:m.alias}),s.jsx(Wc,{children:m.alias?m.alias.charAt(0).toUpperCase():s.jsx(Ye,{})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-text-primary",children:m.alias||"Usuario Anónimo"}),s.jsx("p",{className:"text-xs text-text-secondary",children:We(new Date(x),{addSuffix:!0,locale:Nc})})]})]}),s.jsx("button",{className:"text-text-secondary hover:text-primary",children:s.jsx(Je,{})})]}),p&&s.jsx("p",{className:"text-text-primary mb-3 whitespace-pre-wrap break-words",children:p}),f&&s.jsx("div",{className:"mb-3 rounded-lg overflow-hidden cursor-pointer",children:s.jsx("img",{src:f,alt:"Contenido de la publicación",className:"rounded-md object-cover w-full"})}),h&&s.jsx("div",{className:"mb-3 rounded-lg overflow-hidden",children:s.jsx("video",{src:h,controls:!0,className:"w-full rounded-md"})}),s.jsx("div",{className:"flex items-center justify-between text-text-secondary pt-2 border-t border-border-color",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{className:"flex items-center gap-1.5 hover:text-secondary transition-colors "+(l?"text-secondary":""),onClick:async()=>{if(!a)return void r({variant:"destructive",title:"Debes iniciar sesión para dar me gusta."});const e=l;if(c(!e),u(t=>e?t-1:t+1),t(b,!e,e?v-1:v+1),e){const{error:e}=await lr.from("likes").delete().match({post_id:b,user_id:a.id});e&&(c(!0),u(e=>e+1),t(b,!0,v),r({variant:"destructive",title:"Error al quitar el Me Gusta"}))}else{const{error:e}=await lr.from("likes").insert({post_id:b,user_id:a.id});e&&(c(!1),u(e=>e-1),t(b,!1,v),r({variant:"destructive",title:"Error al dar Me Gusta"}))}},children:[s.jsx(Ce,{className:"w-5 h-5 "+(l?"fill-current":"")}),s.jsx("span",{className:"text-sm",children:d})]}),s.jsxs("button",{className:"flex items-center gap-1.5 hover:text-primary transition-colors",onClick:()=>o(!0),children:[s.jsx(Xe,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:g})]})]})})]}),i&&s.jsx(Kc,{postId:b,commentsCount:g,onClose:()=>o(!1)})]})},Jc=()=>{const{profile:e}=wr(),t=_a();return s.jsx("div",{className:"mb-6 p-4 rounded-lg card-glass",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:(null==e?void 0:e.profile_picture_url)||"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=100",alt:"Tu perfil",className:"w-10 h-10 rounded-full object-cover"}),s.jsx(Oi,{placeholder:"¿Qué estás buscando?",className:"flex-1 input-glass cursor-pointer",onClick:()=>t("/create-post"),readOnly:!0}),s.jsx("button",{onClick:()=>t("/create-post"),children:s.jsx(Ze,{className:"w-6 h-6 text-primary hover:text-green-300 transition-colors"})})]})})};function Xc(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]}),{});return le.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}function Zc(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}const Qc=le.forwardRef((e,t)=>{const{children:a,...r}=e,s=le.Children.toArray(a),n=s.find(ad);if(n){const e=n.props.children,a=s.map(t=>t===n?le.Children.count(e)>1?le.Children.only(null):le.isValidElement(e)?e.props.children:null:t);return le.createElement(ed,K({},r,{ref:t}),le.isValidElement(e)?le.cloneElement(e,void 0,a):null)}return le.createElement(ed,K({},r,{ref:t}),a)});Qc.displayName="Slot";const ed=le.forwardRef((e,t)=>{const{children:a,...r}=e;return le.isValidElement(a)?le.cloneElement(a,{...rd(r,a.props),ref:t?Zc(t,a.ref):a.ref}):le.Children.count(a)>1?le.Children.only(null):null});ed.displayName="SlotClone";const td=({children:e})=>le.createElement(le.Fragment,null,e);function ad(e){return le.isValidElement(e)&&e.type===td}function rd(e,t){const a={...t};for(const r in t){const s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{n(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}const sd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const a=le.forwardRef((e,a)=>{const{asChild:r,...s}=e,n=r?Qc:t;return le.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),le.createElement(n,K({},s,{ref:a}))});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),nd="Progress",id=100,[od,ld]=function(e,t=[]){let a=[];const r=()=>{const t=a.map(e=>le.createContext(e));return function(a){const r=(null==a?void 0:a[e])||t;return le.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){const s=le.createContext(r),n=a.length;function i(t){const{scope:a,children:r,...i}=t,o=(null==a?void 0:a[e][n])||s,l=le.useMemo(()=>i,Object.values(i));return le.createElement(o.Provider,{value:l},r)}return a=[...a,r],i.displayName=t+"Provider",[i,function(a,i){const o=(null==i?void 0:i[e][n])||s,l=le.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Xc(r,...t)]}(nd),[cd,dd]=od(nd),ud=le.forwardRef((e,t)=>{const{__scopeProgress:a,value:r,max:s,getValueLabel:n=md,...i}=e,o=hd(s)?s:id,l=xd(r,o)?r:null,c=fd(l)?n(l,o):void 0;return le.createElement(cd,{scope:a,value:l,max:o},le.createElement(sd.div,K({"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":fd(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":pd(l,o),"data-value":null!=l?l:void 0,"data-max":o},i,{ref:t})))});ud.propTypes={max(e,t,a){const r=e[t],s=String(r);return r&&!hd(r)?new Error(function(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`}(s,a)):null},value(e,t,a){const r=e[t],s=String(r),n=hd(e.max)?e.max:id;return null==r||xd(r,n)?null:new Error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(s,a))}};function md(e,t){return`${Math.round(e/t*100)}%`}function pd(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function fd(e){return"number"==typeof e}function hd(e){return fd(e)&&!isNaN(e)&&e>0}function xd(e,t){return fd(e)&&!isNaN(e)&&e<=t&&e>=0}const vd=ud,gd=le.forwardRef((e,t)=>{var a;const{__scopeProgress:r,...s}=e,n=dd("ProgressIndicator",r);return le.createElement(sd.div,K({"data-state":pd(n.value,n.max),"data-value":null!==(a=n.value)&&void 0!==a?a:void 0,"data-max":n.max},s,{ref:t}))}),bd=ue.forwardRef(({className:e,value:t,...a},r)=>s.jsx(vd,{ref:r,className:un("relative h-4 w-full overflow-hidden rounded-full bg-surface",e),...a,children:s.jsx(gd,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bd.displayName=vd.displayName;const yd=({storyGroup:e,onClose:t})=>{var a;const{user:r}=wr(),{toast:n}=br(),i=_a(),[o,l]=le.useState(0),[c,d]=le.useState(0),[u,m]=le.useState(!1),p=le.useRef(null),f=le.useRef(null),h=e.stories[o],x=(null==r?void 0:r.id)===e.user_id;le.useEffect(()=>(u?(p.current&&clearTimeout(p.current),f.current&&cancelAnimationFrame(f.current)):(()=>{p.current&&clearInterval(p.current),f.current&&cancelAnimationFrame(f.current);let e=performance.now();const t=a=>{const r=(a-e)/5e3*100;d(r),r<100&&(f.current=requestAnimationFrame(t))};f.current=requestAnimationFrame(t),p.current=setTimeout(()=>{v()},5e3)})(),()=>{p.current&&clearTimeout(p.current),f.current&&cancelAnimationFrame(f.current)}),[o,u]);const v=()=>{o<e.stories.length-1?(l(e=>e+1),d(0)):t()};return s.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",onClick:t,children:s.jsxs("div",{className:"relative w-full max-w-md h-full max-h-[90vh] bg-black rounded-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 z-10",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.stories.map((e,t)=>s.jsxs("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:[t<o&&s.jsx("div",{className:"h-full w-full bg-white"}),t===o&&s.jsx(bd,{value:c,className:"h-1 [&>div]:bg-white"})]},t))}),s.jsxs("div",{className:"flex items-center justify-between text-white",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>i(`/profile/${e.user_id}`),children:[s.jsxs(Bc,{children:[s.jsx(Gc,{src:e.profile_picture_url,alt:e.alias}),s.jsx(Wc,{children:null==(a=e.alias)?void 0:a[0]})]}),s.jsx("span",{className:"font-bold",children:e.alias})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>m(e=>!e),children:u?s.jsx(Qe,{}):s.jsx(et,{})}),x&&s.jsx("button",{onClick:async()=>{if(!x)return;const{error:e}=await lr.from("stories").delete().eq("id",h.id);e?n({variant:"destructive",title:"Error",description:"No se pudo eliminar la historia."}):(n({title:"Historia eliminada"}),t())},children:s.jsx(tt,{})}),s.jsx("button",{onClick:t,children:s.jsx(pe,{})})]})]})]}),"image"===h.media_type?s.jsx("img",{src:h.media_url,alt:"Story content",className:"w-full h-full object-contain"}):s.jsx("video",{src:h.media_url,autoPlay:!0,muted:!0,className:"w-full h-full object-contain"}),s.jsx("button",{onClick:()=>{o>0&&(l(e=>e-1),d(0))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 p-2 rounded-full text-white",children:s.jsx(at,{})}),s.jsx("button",{onClick:v,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 p-2 rounded-full text-white",children:s.jsx(Ve,{})})]})})},jd=({storyGroup:e,onSelect:t})=>{var a;return s.jsxs(be.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center space-y-2 cursor-pointer",onClick:t,children:[s.jsx("div",{className:"relative w-16 h-16 rounded-full ring-2 ring-primary ring-offset-2 ring-offset-background p-1",children:s.jsxs(Bc,{className:"w-full h-full",children:[s.jsx(Gc,{src:e.profile_picture_url,alt:e.alias}),s.jsx(Wc,{children:null==(a=e.alias)?void 0:a[0]})]})}),s.jsx("p",{className:"text-xs text-text-secondary truncate w-16 text-center",children:e.alias})]})},wd=()=>{const{user:e}=wr(),{toast:t}=br(),[a,r]=le.useState([]),[n,i]=le.useState(!0),[o,l]=le.useState(null),c=le.useRef(null),d=le.useCallback(async()=>{try{i(!0);const{data:a,error:s}=await lr.from("stories").select("\n          *,\n          profile:user_id (id, alias, profile_picture_url)\n        ").gt("created_at",new Date(Date.now()-864e5).toISOString()).order("created_at",{ascending:!1});if(s){const e=String(s.message||""),a=s.code||"";"42P01"===a||"42501"===a||e.toLowerCase().includes("permission")||e.toLowerCase().includes("does not exist")||t({variant:"destructive",title:"Error",description:"No se pudieron cargar las historias."}),r([])}else if(a){const t=(a||[]).reduce((e,t)=>(t.profile&&(e[t.user_id]||(e[t.user_id]={user_id:t.user_id,alias:t.profile.alias,profile_picture_url:t.profile.profile_picture_url,stories:[]}),e[t.user_id].stories.push(t)),e),{}),s=t[e.id];delete t[e.id];const n=Object.values(t),i=s?[s,...n]:n;r(i)}}finally{i(!1)}},[t,e.id]);return le.useEffect(()=>{d();const e=lr.channel("public:stories").on("postgres_changes",{event:"INSERT",schema:"public",table:"stories"},()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>d(),300)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"stories"},()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>d(),300)}).subscribe();return()=>{c.current&&clearTimeout(c.current),lr.removeChannel(e)}},[d]),n?s.jsx("div",{className:"flex items-center justify-center h-28 card-glass",children:s.jsx(Ge,{className:"w-8 h-8 animate-spin text-primary"})}):0===a.length?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"card-glass p-4",children:s.jsx("div",{className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-2",children:a.map(e=>s.jsx(jd,{storyGroup:e,onSelect:()=>l(e)},e.user_id))})}),o&&s.jsx(yd,{storyGroup:o,onClose:()=>l(null)})]})},Nd=()=>{wr();const{toast:e}=br(),[t,a]=le.useState([]),[r,n]=le.useState(!0),[i,o]=le.useState(null),[l,c]=le.useState(!1),[d,u]=le.useState(0),[m,p]=le.useState(!0),f=le.useCallback(async(t=!1)=>{t?(c(!0),u(0)):n(!0),o(null);try{const e=t?0:10*d,r=e+10-1,{data:s,error:n}=await lr.from("posts").select("*").order("created_at",{ascending:!1}).range(e,r);if(n)throw n;const i=await Promise.all(s.map(async e=>{const{data:t}=await lr.from("profiles").select("id, alias, profile_picture_url, is_vip, is_verified").eq("id",e.user_id).single(),{data:a}=await lr.from("post_likes").select("id, user_id").eq("post_id",e.id),{data:r}=await lr.from("comentarios").select("id, usuario_id, texto, creado_en").eq("post_id",e.id);return{...e,profiles:t,likes:a||[],comentarios:r||[]}}));a(t?i||[]:e=>[...e,...i||[]]),p(10===(i||[]).length)}catch(r){o(r),e({variant:"destructive",title:"Error de Conexión",description:"No se pudieron cargar las publicaciones. Revisa tu conexión e inténtalo de nuevo."})}finally{n(!1),c(!1)}},[e,d]),h=le.useMemo(()=>t,[t]);le.useEffect(()=>{f(!0)},[]),le.useEffect(()=>{let e;const t=lr.channel("public-posts-realtime").on("postgres_changes",{event:"*",schema:"public",table:"posts"},()=>{clearTimeout(e),e=setTimeout(()=>{f(!0)},1e3)}).on("postgres_changes",{event:"*",schema:"public",table:"post_likes"},()=>{clearTimeout(e),e=setTimeout(()=>{f(!0)},500)}).on("postgres_changes",{event:"*",schema:"public",table:"comentarios"},()=>{clearTimeout(e),e=setTimeout(()=>{f(!0)},500)}).subscribe(e=>{"CHANNEL_ERROR"===e&&o(new Error("Error de conexión en tiempo real."))});return()=>{clearTimeout(e),lr.removeChannel(t)}},[f]);const x=le.useCallback(()=>{f(!0)},[f]),v=le.useCallback((e,t,r)=>{a(a=>a.map(a=>a.id===e?{...a,is_liked:t,likes_count:r}:a))},[]),g=le.useCallback(()=>{!r&&m&&(u(e=>e+1),f())},[r,m,f]);return s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Descubrir - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Descubre publicaciones de otros usuarios en AGARCH-AR."})]}),s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(wd,{}),s.jsx(Jc,{onPostCreated:x}),r&&!l?s.jsx("div",{className:"flex justify-center items-center py-10",children:s.jsx(Ge,{className:"w-12 h-12 animate-spin text-primary"})}):i?s.jsxs("div",{className:"text-center py-10 card-glass",children:[s.jsx(rt,{className:"mx-auto h-12 w-12 text-destructive"}),s.jsx("h3",{className:"mt-2 text-lg font-semibold text-text-primary",children:"Error de Conexión"}),s.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"No se pudieron cargar las publicaciones."}),s.jsxs(pn,{onClick:()=>f(!0),className:"mt-4 btn-action",children:[s.jsx(st,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]}):h.length>0?s.jsxs("div",{className:"space-y-4",children:[h.map(e=>s.jsx(Yc,{post:e,onLikeToggle:v},e.id)),m&&s.jsx("div",{className:"text-center py-4",children:s.jsx(pn,{onClick:g,disabled:r,variant:"outline",className:"btn-outline-action",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"w-4 h-4 mr-2 animate-spin"}),"Cargando..."]}):"Cargar más"})})]}):s.jsxs("div",{className:"text-center py-10 card-glass",children:[s.jsx(nt,{className:"mx-auto h-12 w-12 text-text-secondary"}),s.jsx("h3",{className:"mt-2 text-lg font-semibold text-text-primary",children:"No hay publicaciones"}),s.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Sé el primero en compartir algo."})]})]})]})},Cd=({editMode:e,onEditToggle:t,onSave:a,onOpenUploadModal:r,saveLoading:n})=>s.jsxs(be.div,{className:"mt-6 flex flex-wrap gap-2 justify-center w-full",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsxs(pn,{onClick:t,variant:e?"secondary":"default",className:"flex-1",children:[e?s.jsx(pe,{className:"mr-2 h-4 w-4"}):s.jsx(it,{className:"mr-2 h-4 w-4"}),e?"Cancelar":"Editar Perfil"]}),e?s.jsxs(pn,{onClick:a,disabled:n,className:"flex-1 bg-green-500 hover:bg-green-600",children:[n?s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(ot,{className:"mr-2 h-4 w-4"}),"Guardar"]}):s.jsxs(cc,{children:[s.jsx(dc,{asChild:!0,children:s.jsxs(pn,{variant:"outline",className:"flex-1",children:[s.jsx(lt,{className:"mr-2 h-4 w-4"}),"Crear"]})}),s.jsxs(hc,{align:"end",className:"card-glass",children:[s.jsxs(mc,{children:[s.jsxs(pc,{children:[s.jsx(Ze,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Subir Foto"})]}),s.jsx(uc,{children:s.jsxs(fc,{className:"card-glass",children:[s.jsxs(xc,{onClick:()=>r("camera-gallery"),children:[s.jsx(lt,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Tomar Foto"})]}),s.jsxs(xc,{onClick:()=>r("gallery"),children:[s.jsx(Ze,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Desde Galería"})]})]})})]}),s.jsxs(mc,{children:[s.jsxs(pc,{children:[s.jsx(ct,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Subir Shoot"})]}),s.jsx(uc,{children:s.jsxs(fc,{className:"card-glass",children:[s.jsxs(xc,{onClick:()=>r("camera-video"),children:[s.jsx(lt,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Grabar Video"})]}),s.jsxs(xc,{onClick:()=>r("video"),children:[s.jsx(ct,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Desde Galería"})]})]})})]})]})]})]}),Sd=({profile:e,onClose:t})=>{wr();const{toast:a}=br(),r=_a(),[n,i]=le.useState(""),[o,l]=le.useState(!1);return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",onClick:t,children:s.jsxs("div",{className:"card-glass rounded-2xl shadow-xl w-full max-w-md flex flex-col mx-4",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border-color",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Enviar mensaje a ",e.alias]}),s.jsx(pn,{variant:"ghost",size:"icon",onClick:t,children:s.jsx(pe,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-4",children:s.jsx(Mi,{value:n,onChange:e=>i(e.target.value),placeholder:"Escribe tu primer mensaje...",className:"input-glass min-h-[120px]",rows:4})}),s.jsx("div",{className:"p-4 border-t border-border-color flex justify-end",children:s.jsxs(pn,{onClick:async()=>{if(!n.trim())return void a({variant:"destructive",title:"El mensaje no puede estar vacío."});l(!0);const{data:s,error:i}=await lr.rpc("handle_user_interaction",{target_user_id:e.id,initial_message:n});if(l(!1),i)a({variant:"destructive",title:"Error al enviar mensaje",description:i.message});else{const[n,i]=s.split(":");a({title:i}),"success"===n&&(t(),r("/chat",{state:{openChatWith:e.id}}))}},disabled:o,className:"btn-action",children:[o?s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Ke,{className:"mr-2 h-4 w-4"}),o?"Enviando...":"Enviar"]})})]})})},Ed=({profile:e})=>{const{user:t}=wr(),{toast:a}=br(),[r,n]=le.useState(null),[i,o]=le.useState(!0),[l,c]=le.useState(!1);le.useEffect(()=>{(async()=>{if(!t||!e)return;o(!0);const{data:a,error:r}=await lr.from("likes").select("id, user_id, liked_user_id").eq("user_id",t.id).eq("liked_user_id",e.id).maybeSingle();r||n(a),o(!1)})()},[t,e]);return i?s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsxs(pn,{disabled:!0,children:[s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Cargando..."]})}):s.jsxs(s.Fragment,{children:[s.jsxs(be.div,{className:"mt-6 flex flex-wrap gap-2 justify-center w-full",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsxs(pn,{onClick:()=>c(!0),className:"flex-1 bg-green-500 hover:bg-green-600",children:[s.jsx(Me,{className:"mr-2 h-4 w-4"})," Mensaje"]}),s.jsxs(pn,{onClick:async()=>{o(!0);try{if(r){const{error:r}=await lr.from("likes").delete().eq("user_id",t.id).eq("liked_user_id",e.id);if(r)throw r;n(null),a({title:"Me gusta removido"})}else{const{error:r}=await lr.from("likes").insert({user_id:t.id,liked_user_id:e.id});if(r)throw r;n({user_id:t.id,liked_user_id:e.id}),a({title:"¡Me gusta enviado!"})}}catch(s){a({variant:"destructive",title:"Error",description:"Ocurrió un error al procesar la solicitud."})}finally{o(!1)}},className:"flex-1 "+(r?"bg-red-500 hover:bg-red-600":""),children:[s.jsx(Ce,{className:"mr-2 h-4 w-4 "+(r?"fill-current":"")}),"Me gusta"]})]}),l&&s.jsx(Sd,{profile:e,onClose:()=>c(!1)})]})},Ad=({profile:e,profileData:t,editMode:a,isOwnProfile:r,onInputChange:n,onEditToggle:i,onSave:o,onOpenUploadModal:l,saveLoading:c})=>s.jsx(be.div,{className:"card-glass p-6 rounded-b-xl",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},children:s.jsxs("div",{className:"relative flex flex-col items-center",children:[s.jsxs(Bc,{className:"w-32 h-32 border-4 border-primary shadow-lg",children:[s.jsx(Gc,{src:t.profile_picture_url,alt:t.alias}),s.jsx(Wc,{className:"text-4xl bg-gradient-to-br from-primary to-secondary text-primary-foreground",children:t.alias?t.alias.charAt(0).toUpperCase():s.jsx(Fe,{})})]}),r&&s.jsx(pn,{variant:"outline",size:"icon",className:"absolute bottom-0 right-1/3 transform translate-x-1/2 rounded-full w-10 h-10 bg-background/80",onClick:()=>l("profile"),children:s.jsx(lt,{className:"w-5 h-5"})}),s.jsxs("div",{className:"mt-4 text-center w-full",children:[a?s.jsx("div",{className:"flex justify-center items-center gap-2",children:s.jsx(Oi,{id:"alias",value:t.alias||"",onChange:n,className:"text-3xl font-bold text-center w-auto bg-transparent border-b-2 border-primary focus:ring-0"})}):s.jsx("h1",{className:"text-4xl font-bold gradient-text",children:t.alias}),s.jsx("p",{className:"text-text-secondary mt-1",children:t.location||"Ubicación no especificada"})]}),r?s.jsx(Cd,{editMode:a,onEditToggle:i,onSave:o,onOpenUploadModal:l,saveLoading:c}):s.jsx(Ed,{profile:e})]})}),kd=({label:e,value:t})=>s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-primary",children:e}),s.jsx("p",{className:"text-text-primary capitalize",children:t||"No especificado"})]}),_d=({data:e})=>{var t;return s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary mb-2",children:"Sobre mí"}),s.jsx("p",{className:"text-text-primary whitespace-pre-wrap",children:e.bio||"Aún no has agregado una descripción."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(kd,{label:"Género",value:e.gender}),s.jsx(kd,{label:"Orientación",value:e.sexual_orientation}),s.jsx(kd,{label:"Estado",value:e.relationship_status}),s.jsx(kd,{label:"Intereses",value:null==(t=e.interests)?void 0:t.join(", ")})]})]})},Td=({data:e,onInputChange:t,onSelectChange:a,onInterestsChange:r})=>{const n="bg-surface text-text-primary border-border-color";return s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"bio",className:"text-primary",children:"Sobre mí"}),s.jsx(Mi,{id:"bio",name:"bio",value:e.bio||"",onChange:t,placeholder:"Cuéntanos sobre ti...",className:"input-glass mt-1",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"gender",className:"text-primary",children:"Género"}),s.jsxs(Sl,{value:e.gender||"",onValueChange:e=>a("gender",e),children:[s.jsx(Al,{className:"input-glass mt-1",children:s.jsx(El,{placeholder:"Selecciona tu género"})}),s.jsxs(Tl,{className:n,children:[s.jsx(Rl,{value:"Hombre",children:"Hombre"}),s.jsx(Rl,{value:"Mujer",children:"Mujer"}),s.jsx(Rl,{value:"No binario",children:"No binario"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"sexual_orientation",className:"text-primary",children:"Orientación Sexual"}),s.jsxs(Sl,{value:e.sexual_orientation||"",onValueChange:e=>a("sexual_orientation",e),children:[s.jsx(Al,{className:"input-glass mt-1",children:s.jsx(El,{placeholder:"Selecciona tu orientación"})}),s.jsxs(Tl,{className:n,children:[s.jsx(Rl,{value:"Heterosexual",children:"Heterosexual"}),s.jsx(Rl,{value:"Homosexual",children:"Homosexual"}),s.jsx(Rl,{value:"Bisexual",children:"Bisexual"}),s.jsx(Rl,{value:"Pansexual",children:"Pansexual"}),s.jsx(Rl,{value:"Asexual",children:"Asexual"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"relationship_status",className:"text-primary",children:"Estado sentimental"}),s.jsxs(Sl,{value:e.relationship_status||"",onValueChange:e=>a("relationship_status",e),children:[s.jsx(Al,{className:"input-glass mt-1",children:s.jsx(El,{placeholder:"¿Qué buscas?"})}),s.jsxs(Tl,{className:n,children:[s.jsx(Rl,{value:"Soltero/a",children:"Soltero/a"}),s.jsx(Rl,{value:"En una relación",children:"En una relación"}),s.jsx(Rl,{value:"Es complicado",children:"Es complicado"}),s.jsx(Rl,{value:"Buscando algo casual",children:"Algo casual"}),s.jsx(Rl,{value:"Amistad",children:"Amistad"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"interests",className:"text-primary",children:"Intereses (separados por comas)"}),s.jsx(Oi,{id:"interests",name:"interests",value:Array.isArray(e.interests)?e.interests.join(", "):"",onChange:r,placeholder:"Música, viajes, arte...",className:"input-glass mt-1"})]})]})]})},Rd=({profile:e,isOwnProfile:t,onSave:a,onUpdate:r})=>{const[n,i]=le.useState(!1);return e?s.jsxs("div",{className:"card-glass p-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-bold text-primary",children:"Información"}),t&&s.jsx(pn,{onClick:()=>n?a():i(!0),variant:"ghost",size:"icon",children:n?s.jsx(ot,{className:"h-5 w-5 text-green-500"}):s.jsx(dt,{className:"h-5 w-5"})})]}),n?s.jsx(Td,{data:e,onInputChange:t=>r({...e,[t.target.name]:t.target.value}),onSelectChange:(t,a)=>r({...e,[t]:a}),onInterestsChange:t=>r({...e,interests:t.target.value.split(",").map(e=>e.trim())})}):s.jsx(_d,{data:e})]}):null},Pd=({photos:e,editMode:t,onOpenUploadModal:a,onRemovePhoto:r})=>s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-glass p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Galería de Fotos"}),t&&((null==e?void 0:e.length)||0)<5&&s.jsxs(pn,{onClick:()=>a("gallery"),className:"btn-action",children:[s.jsx(ut,{className:"w-4 h-4 mr-2"}),"Subir Foto"]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[null==e?void 0:e.map((e,a)=>s.jsxs("div",{className:"relative group aspect-square",children:[s.jsx("img",{src:e,alt:`Foto de galería ${a+1}`,className:"w-full h-full object-cover rounded-lg"}),t&&s.jsx("button",{onClick:()=>r(e),className:"absolute top-1 right-1 w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(pe,{className:"w-4 h-4"})})]},a)),t&&((null==e?void 0:e.length)||0)<5&&s.jsxs("button",{onClick:()=>a("gallery"),className:"aspect-square border-2 border-dashed border-border-color rounded-lg flex flex-col items-center justify-center text-text-secondary hover:border-primary hover:text-primary transition-colors",children:[s.jsx(mt,{className:"w-8 h-8"}),s.jsx("span",{className:"text-sm mt-1",children:"Añadir"})]})]}),!t&&0===(null==e?void 0:e.length)&&s.jsx("p",{className:"text-text-secondary",children:"Aún no has subido fotos a tu galería."})]}),Dd=({videos:e,editMode:t,onOpenUploadModal:a,onRemoveVideo:r})=>s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-glass p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Galería de Videos"}),t&&((null==e?void 0:e.length)||0)<2&&s.jsxs(pn,{onClick:a,className:"btn-action",children:[s.jsx(ut,{className:"w-4 h-4 mr-2"}),"Subir Video"]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[null==e?void 0:e.map((e,a)=>s.jsxs("div",{className:"relative group aspect-video",children:[s.jsx("video",{src:e,className:"w-full h-full object-cover rounded-lg bg-black",controls:!0}),t&&s.jsx("button",{onClick:()=>r(e),className:"absolute top-1 right-1 w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity z-10",children:s.jsx(pe,{className:"w-4 h-4"})})]},a)),t&&((null==e?void 0:e.length)||0)<2&&s.jsxs("button",{onClick:a,className:"aspect-video border-2 border-dashed border-border-color rounded-lg flex flex-col items-center justify-center text-text-secondary hover:border-primary hover:text-primary transition-colors",children:[s.jsx(ct,{className:"w-8 h-8"}),s.jsx("span",{className:"text-sm mt-1",children:"Añadir Video"})]})]}),!t&&0===(null==e?void 0:e.length)&&s.jsx("p",{className:"text-text-secondary",children:"Aún no has subido videos a tu perfil."})]}),Od=()=>{const{user:e}=wr(),{toast:t}=br(),[a,r]=le.useState(!1),[s,n]=le.useState(0);return{uploadFile:async(a,s,i,o)=>{if(!a||!e){const e=new Error("No se ha seleccionado un archivo o no estás autenticado.");return t({variant:"destructive",title:"Error de subida",description:e.message}),void o(null,e)}r(!0),n(0),t({title:"Iniciando subida...",description:`El archivo ${a.name} se está subiendo.`});const l=a.name.split(".").pop(),c=`${e.id}/${i}/${fr()}.${l}`;try{const{error:e}=await lr.storage.from(s).upload(c,a,{cacheControl:"3600",upsert:!1,contentType:a.type});if(e)throw e;const{data:r}=lr.storage.from(s).getPublicUrl(c);if(!r.publicUrl)throw new Error("No se pudo obtener la URL pública del archivo subido.");t({title:"¡Éxito!",description:"El archivo se ha subido correctamente."}),o(r.publicUrl,null)}catch(d){t({variant:"destructive",title:"Error al subir el archivo",description:d.message}),o(null,d)}finally{r(!1),n(0)}},uploadFiles:async(a,s,i)=>{if(!a||0===a.length||!e)return t({variant:"destructive",title:"Error",description:"No se han seleccionado archivos o no estás autenticado."}),null;r(!0),n(0);const o=a.map(t=>{const a=t.name.split(".").pop(),r=`${e.id}/${i}/${fr()}.${a}`;return lr.storage.from(s).upload(r,t,{cacheControl:"3600",upsert:!1,contentType:t.type})});try{const e=await Promise.all(o),a=[];for(const t of e){if(t.error)throw t.error;const{data:e}=lr.storage.from(s).getPublicUrl(t.data.path);if(!e.publicUrl)throw new Error("No se pudo obtener la URL pública del archivo subido.");a.push(e.publicUrl)}return a.length>0&&t({title:"¡Éxito!",description:`${a.length} archivo(s) subido(s) correctamente.`}),a}catch(l){return t({variant:"destructive",title:"Error al subir archivos",description:l.message}),null}finally{r(!1),n(0)}},isUploading:a,progress:s}},Md=({onUploadSuccess:e,useCamera:t=!1,uploading:a,children:r})=>{const{toast:n}=br(),i=le.useRef(null),[o,l]=le.useState(!1),c=()=>{var e;o||a||null==(e=i.current)||e.click()};return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"file",ref:i,onChange:async t=>{const a=t.target.files[0];if(a)if((e=>e.type.startsWith("image/")?!(e.size>5242880&&(n({variant:"destructive",title:"Archivo demasiado grande",description:"El tamaño máximo por imagen es de 5MB."}),1)):(n({variant:"destructive",title:"Tipo de archivo no válido",description:"Solo se permiten archivos de imagen (JPG, PNG, WebP)."}),!1))(a)){l(!0);try{let t=a;a.size>1048576&&(t=await(async e=>new Promise(t=>{const a=document.createElement("canvas"),r=a.getContext("2d"),s=new Image;s.onload=()=>{const n=1920,i=1080;let{width:o,height:l}=s;o>l?o>n&&(l=l*n/o,o=n):l>i&&(o=o*i/l,l=i),a.width=o,a.height=l,r.drawImage(s,0,0,o,l),a.toBlob(a=>{const r=new File([a],e.name,{type:"image/jpeg",lastModified:Date.now()});t(r)},"image/jpeg",.8)},s.onerror=()=>{t(e)},s.src=URL.createObjectURL(e)}))(a)),await e(t)}catch(r){n({variant:"destructive",title:"Error al procesar imagen",description:"No se pudo procesar la imagen. Intenta de nuevo."})}finally{l(!1),t.target.value=null}}else t.target.value=null},className:"hidden",accept:"image/png, image/jpeg, image/webp",capture:t?"user":void 0,disabled:a||o,onError:()=>{n({variant:"destructive",title:"Error de cámara",description:"No se pudo acceder a la cámara. Verifica los permisos."})}}),r?ue.cloneElement(r,{onClick:c,disabled:a||o}):s.jsxs("div",{className:"mt-4 p-4 border border-dashed border-border-color rounded-lg text-center",children:[s.jsx(pt,{className:"mx-auto h-10 w-10 text-yellow-400"}),s.jsx("h3",{className:"mt-2 text-sm font-semibold text-text-primary",children:"Recordatorio de Normas"}),s.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"PROHIBIDO fotos de menores, contenido ilegal, o pornografía infantil. Las cuentas que infrinjan estas normas serán eliminadas permanentemente."}),s.jsx(pn,{onClick:c,disabled:a||o,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:a||o?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Procesando...":"Subiendo..."]}):s.jsxs(s.Fragment,{children:[t?s.jsx(lt,{className:"mr-2 h-4 w-4"}):s.jsx(ut,{className:"mr-2 h-4 w-4"}),t?"Tomar Foto":"Seleccionar Imagen"]})})]})]})},Fd=({onUploadSuccess:e,useCamera:t=!1,uploading:a,progress:r,children:n})=>{const{toast:i}=br(),o=le.useRef(null),[l,c]=le.useState(!1),d=()=>{var e;l||a||null==(e=o.current)||e.click()};return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"file",ref:o,onChange:async t=>{const a=t.target.files[0];if(a)if((e=>["video/mp4","video/webm","video/quicktime","video/x-msvideo"].includes(e.type)?!(e.size>20971520&&(i({variant:"destructive",title:"Video demasiado grande",description:"El tamaño máximo por video es de 20MB."}),1)):(i({variant:"destructive",title:"Tipo de archivo no válido",description:"Solo se permiten archivos de video (MP4, WebM, MOV, AVI)."}),!1))(a)){c(!0);try{const r=await(e=>new Promise(t=>{const a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=()=>{window.URL.revokeObjectURL(a.src),a.duration>16?(i({variant:"destructive",title:"Video demasiado largo",description:"La duración máxima del video es de 15 segundos."}),t(!1)):t(!0)},a.onerror=()=>{window.URL.revokeObjectURL(a.src),i({variant:"destructive",title:"Error al validar video",description:"No se pudo validar el archivo de video."}),t(!1)},a.src=URL.createObjectURL(e)}))(a);if(!r)return void(t.target.value=null);let s=a;a.size>10485760&&(s=await(async e=>e)(a)),await e(s)}catch(r){i({variant:"destructive",title:"Error al procesar video",description:"No se pudo procesar el video. Intenta de nuevo."})}finally{c(!1),t.target.value=null}}else t.target.value=null},className:"hidden",accept:"video/mp4,video/webm,video/quicktime,video/x-msvideo",capture:t?"user":void 0,disabled:a||l,onError:()=>{i({variant:"destructive",title:"Error de cámara",description:"No se pudo acceder a la cámara. Verifica los permisos."})}}),n?ue.cloneElement(n,{onClick:d,disabled:a||l}):s.jsxs("div",{className:"mt-4 p-4 border border-dashed border-border-color rounded-lg text-center",children:[s.jsx(pt,{className:"mx-auto h-10 w-10 text-yellow-400"}),s.jsx("h3",{className:"mt-2 text-sm font-semibold text-text-primary",children:"Recordatorio de Normas"}),s.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"PROHIBIDO videos de menores, contenido ilegal, o pornografía infantil. Las cuentas que infrinjan estas normas serán eliminadas permanentemente."}),s.jsx(pn,{onClick:d,disabled:a||l,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:a||l?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Procesando...":"Subiendo..."]}):s.jsxs(s.Fragment,{children:[t?s.jsx(lt,{className:"mr-2 h-4 w-4"}):s.jsx(ct,{className:"mr-2 h-4 w-4"}),t?"Grabar Video (máx 15s)":"Seleccionar Video (máx 15s)"]})}),(a||l)&&s.jsxs("div",{className:"mt-4",children:[s.jsx(bd,{value:r||0,className:"w-full"}),s.jsx("p",{className:"text-xs text-text-secondary mt-2",children:l?"Procesando video...":`Subiendo... ${r||0}%`})]})]})]})},Id=({isOpen:e,onClose:t,onUpload:a,uploading:r,progress:n})=>{const i=(e,t)=>{a(e,t)};return s.jsx(Ui,{open:e,onOpenChange:t,children:s.jsxs(Gi,{className:"card-glass",children:[s.jsxs(Wi,{children:[s.jsx(Yi,{className:"text-2xl font-bold text-primary",children:"Subir Contenido"}),s.jsx(Ji,{children:"Selecciona el tipo de contenido que deseas subir. Recuerda seguir las normas de la comunidad."})]}),s.jsxs("div",{className:"py-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Md,{onUploadSuccess:e=>i(e,"gallery"),useCamera:!1,uploading:r,children:s.jsxs(pn,{variant:"outline",className:"w-full h-24 flex flex-col",children:[s.jsx(ut,{className:"w-8 h-8 mb-2"}),s.jsx("span",{children:"Subir Foto"})]})}),s.jsx(Md,{onUploadSuccess:e=>i(e,"camera-gallery"),useCamera:!0,uploading:r,children:s.jsxs(pn,{variant:"outline",className:"w-full h-24 flex flex-col",children:[s.jsx(lt,{className:"w-8 h-8 mb-2"}),s.jsx("span",{children:"Tomar Foto"})]})}),s.jsx(Fd,{onUploadSuccess:e=>i(e,"video"),useCamera:!1,uploading:r,progress:n,children:s.jsxs(pn,{variant:"outline",className:"w-full h-24 flex flex-col",children:[s.jsx(ct,{className:"w-8 h-8 mb-2"}),s.jsx("span",{children:"Subir Video"})]})}),s.jsx(Fd,{onUploadSuccess:e=>i(e,"camera-video"),useCamera:!0,uploading:r,progress:n,children:s.jsxs(pn,{variant:"outline",className:"w-full h-24 flex flex-col",children:[s.jsx(lt,{className:"w-8 h-8 mb-2"}),s.jsx("span",{children:"Grabar Video"})]})})]})]})})},Ld=()=>{const{id:e}=function(){let{matches:e}=le.useContext(Ca),t=e[e.length-1];return t?t.params:{}}(),{user:t,profile:a,loading:r,refreshProfile:n}=wr(),{toast:i}=br(),o=_a(),{uploadFile:l,isUploading:c,progress:d}=Od(),[u,m]=le.useState(null),[p,f]=le.useState(!0),[h,x]=le.useState(!1),[v,g]=le.useState(!1),[b,y]=le.useState(!1),[j,w]=le.useState(null),[N,C]=le.useState(!1),S=le.useCallback(async e=>{f(!0);const{data:t,error:a}=await lr.from("profiles").select("*").eq("id",e).single();a||!t?(i({variant:"destructive",title:"Error",description:"No se pudo cargar el perfil."}),o("/discover")):(m(t),w(t)),f(!1)},[i,o]);le.useEffect(()=>{if(r)return;const s=e||(null==t?void 0:t.id);s?(g(s===t.id),s===t.id&&a?(m(a),w(a),f(!1)):S(s)):o("/login")},[e,t,a,r,S,o]),le.useEffect(()=>{a&&v&&(m(a),w(a))},[a,v]);const E=async()=>{x(!0);const e={alias:j.alias,bio:j.bio,gender:j.gender,sexual_orientation:j.sexual_orientation,relationship_status:j.relationship_status,interests:j.interests},{error:a}=await lr.from("profiles").update(e).eq("id",t.id);x(!1),a?i({variant:"destructive",title:"Error",description:"No se pudo actualizar tu perfil."}):(i({title:"¡Éxito!",description:"Tu perfil ha sido actualizado."}),y(!1),await n())},A=()=>{C(!0)},k=async(e,a)=>{const r="photo"===a?"photos":"videos",s=(u[r]||[]).filter(t=>t!==e),{error:o}=await lr.from("profiles").update({[r]:s}).eq("id",t.id);o?i({variant:"destructive",title:"Error",description:`No se pudo eliminar la ${a}.`}):(i({title:"Eliminado",description:`La ${a} ha sido eliminada.`}),await n())};return p||!j?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(Ge,{className:"w-12 h-12 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsxs("title",{children:[j.alias||"Perfil"," - AGARCH-AR"]}),s.jsx("meta",{name:"description",content:`Explora el perfil de ${j.alias||"un usuario"}.`})]}),s.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-8",children:[s.jsx(Ad,{profile:u,profileData:j,editMode:b,isOwnProfile:v,onInputChange:e=>{const{id:t,value:a}=e.target;w(e=>({...e,[t]:a}))},onEditToggle:()=>y(!b),onSave:E,onOpenUploadModal:A,saveLoading:h}),s.jsx(Rd,{profile:j,isOwnProfile:v,onUpdate:w,onSave:E}),s.jsx(Pd,{photos:(null==u?void 0:u.photos)||[],editMode:b,onOpenUploadModal:A,onRemovePhoto:e=>k(e,"photo")}),s.jsx(Dd,{videos:(null==u?void 0:u.videos)||[],editMode:b,onOpenUploadModal:A,onRemoveVideo:e=>k(e,"video")})]}),s.jsx(Id,{isOpen:N,onClose:()=>C(!1),onUpload:(e,a)=>{if(!e)return;let r,s,o;"profile"===a?(r="avatars",s="profile_picture_url",o="photo"):a.includes("gallery")?(r="profile-photos",s="photos",o="photo"):(r="profile-videos",s="videos",o="video"),l(e,"media",r,async(e,a)=>{if(a)i({variant:"destructive",title:"Error de subida",description:a.message});else if(e){let a;if("photos"===s||"videos"===s){const t=u[s]||[];a={[s]:[...t,e]}}else a={[s]:e};const{error:r}=await lr.from("profiles").update(a).eq("id",t.id);r?i({variant:"destructive",title:"Error",description:`No se pudo guardar la ${o}.`}):(i({title:"¡Éxito!",description:`Tu ${o} ha sido actualizada.`}),await n(),C(!1))}})},uploading:c,progress:d})]})},Vd=({convo:e,onSelect:t,isActive:a})=>{var r;return s.jsxs(be.div,{layout:!0,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center p-4 hover:bg-surface/80 cursor-pointer transition-colors border-b border-border-color "+(a?"bg-primary/10":""),onClick:t,children:[s.jsxs(Bc,{children:[s.jsx(Gc,{src:e.profile_picture_url,alt:e.alias}),s.jsx(Wc,{children:null==(r=e.alias)?void 0:r[0]})]}),s.jsx("div",{className:"ml-4 flex-grow",children:s.jsx("h4",{className:"font-semibold",children:e.alias})})]})},zd=({conversations:e,activeChat:t,handleSelectChat:a})=>s.jsxs(be.div,{layout:!0,initial:{x:-300},animate:{x:0},className:`w-full md:w-1/3 card-glass flex-col ${t&&"hidden md:flex"}`,children:[s.jsxs("div",{className:"p-4 border-b border-border-color",children:[s.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Chats"}),s.jsxs("div",{className:"relative mt-4",children:[s.jsx(Oi,{placeholder:"Buscar chats...",className:"input-glass pl-10"}),s.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary"})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto scrollbar-hide",children:s.jsx(Pe,{children:e.length>0?e.map(e=>s.jsx(Vd,{convo:e,onSelect:()=>a(e),isActive:(null==t?void 0:t.id)===e.id},e.id)):s.jsxs("div",{className:"text-center p-8 text-text-secondary",children:[s.jsx(Xe,{className:"w-12 h-12 mx-auto mb-2"}),s.jsx("p",{children:"No tienes conversaciones aún."})]})})})]}),Ud=({message:e,currentUser:t})=>{var a;const r=e.sender_id===t.id,n=r?"bg-primary text-background rounded-br-none":"bg-surface text-text-primary rounded-bl-none",i=t=>{if(!t)return null;if(t.startsWith("blob:"))return e.media_urls[0].type&&e.media_urls[0].type.startsWith("video/")?s.jsx("video",{src:t,controls:!0,className:"rounded-lg max-w-full h-auto"}):s.jsx("img",{src:t,alt:"Imagen adjunta",className:"rounded-lg max-w-full h-auto"});const a=t.split(".").pop().toLowerCase().split("?")[0];return["jpg","jpeg","png","gif","webp"].includes(a)?s.jsx("img",{src:t,alt:"Imagen adjunta",className:"rounded-lg max-w-full h-auto"}):["mp4","webm","mov","m4v"].includes(a)?s.jsx("video",{src:t,controls:!0,className:"rounded-lg max-w-full h-auto"}):null};return s.jsx(be.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex "+(r?"justify-end":"justify-start"),children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${n} shadow-md`,children:[e.isOptimistic&&s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx(Ge,{className:"w-8 h-8 animate-spin text-white"})}),e.media_urls&&e.media_urls.length>0&&s.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${Math.min(e.media_urls.length,2)}, 1fr)`},children:e.media_urls.map((t,a)=>s.jsxs("div",{className:"rounded-lg overflow-hidden relative",children:[i(t),e.id.toString().startsWith("temp-")&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(Ge,{className:"w-6 h-6 animate-spin text-white"})})]},a))}),e.content&&s.jsx("p",{className:"whitespace-pre-wrap break-words mt-2",children:e.content}),"audio"===e.message_type&&(null==(a=e.media_urls)?void 0:a[0])&&s.jsx("div",{className:"flex items-center",children:s.jsx("audio",{src:e.media_urls[0],controls:!0,className:"w-full"})}),"audio"===e.message_type&&!e.media_urls&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ge,{className:"w-4 h-4 animate-spin"})," ",s.jsx("p",{children:"Subiendo audio..."})]}),s.jsx("p",{className:"text-xs opacity-70 mt-1 text-right",children:(t=>{if(!t||e.id.toString().startsWith("temp-"))return"Enviando...";let a;return a=t.endsWith("Z")||t.includes("+")?new Date(t):new Date(t+"Z"),ft(a,"p",{locale:Nc})})(e.sent_at)})]})})},qd=({onRecordingComplete:e,profile:t,isRecording:a,setIsRecording:r})=>{const{toast:n}=br(),[i,o]=le.useState(0),l=le.useRef(null),c=le.useRef(null),d=le.useRef([]),u=le.useRef(null),m=(null==t?void 0:t.is_vip)?120:60,p=le.useCallback(()=>{c.current&&(clearInterval(c.current),c.current=null),u.current&&(u.current.getTracks().forEach(e=>e.stop()),u.current=null),l.current&&(l.current=null),d.current=[],r(!1),o(0)},[r]),f=le.useCallback(t=>{l.current&&"recording"===l.current.state?(l.current.onstop=()=>{if(t&&d.current.length>0){const t=new Blob(d.current,{type:"audio/webm"});e(t,i)}p()},l.current.stop()):p()},[p,e,i]);le.useEffect(()=>{if(!a)return;return(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});u.current=e,d.current=[];const t=new MediaRecorder(e,{mimeType:"audio/webm"});l.current=t,t.ondataavailable=e=>{e.data.size>0&&d.current.push(e.data)},t.start(),o(0),c.current=setInterval(()=>{o(e=>e+1>=m?(f(!0),e):e+1)},1e3)}catch(e){n({variant:"destructive",title:"Error de micrófono",description:"No se pudo acceder al micrófono. Asegúrate de dar permiso."}),p()}})(),()=>{l.current&&"recording"===l.current.state&&l.current.stop(),p()}},[a,m,n,p,f]);const h=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"flex items-center justify-between w-full bg-background p-2 rounded-lg space-x-4",children:[s.jsx(pn,{variant:"ghost",size:"icon",onClick:()=>f(!1),className:"text-red-500",children:s.jsx(tt,{})}),s.jsxs("div",{className:"flex items-center text-red-500 flex-grow justify-center",children:[s.jsx(ht,{className:"animate-pulse mr-2"}),s.jsxs("span",{children:[h(i)," / ",h(m)]})]}),s.jsx(pn,{onClick:()=>f(!0),className:"btn-action",children:s.jsx(Ke,{})})]})},$d=({file:e,onRemove:t})=>{const[a,r]=le.useState(null);return le.useEffect(()=>{if(e.type.startsWith("image/")){const t=new FileReader;t.onloadend=()=>r(t.result),t.readAsDataURL(e)}else e.type.startsWith("video/")&&r("video")},[e]),s.jsxs("div",{className:"relative w-20 h-20 rounded-md overflow-hidden",children:["video"===a?s.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:s.jsx(ct,{className:"w-8 h-8 text-white"})}):a&&s.jsx("img",{src:a,alt:e.name,className:"w-full h-full object-cover"}),s.jsx(pn,{size:"icon",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6",onClick:t,children:s.jsx(pe,{className:"h-4 w-4"})})]})},Hd=({activeChat:e,setActiveChat:t,loadingMessages:a,messages:r,messagesEndRef:n,profile:i,handleAudioUpload:o,handleFilesUpload:l,isUploading:c,uploadProgress:d,sendMessage:u})=>{var m;const{user:p}=wr(),{toast:f}=br(),[h,x]=le.useState(""),[v,g]=le.useState([]),[b,y]=le.useState(!1),j=le.useRef(null),w=le.useRef(null);le.useEffect(()=>{if(j.current){j.current.style.height="auto";const e=j.current.scrollHeight;j.current.style.height=`${Math.min(e,128)}px`}},[h]);const N=async()=>{!h.trim()&&0===v.length||c||e&&p&&i&&(!i.is_vip&&h.length>100?f({variant:"destructive",title:"Límite alcanzado",description:"Los usuarios básicos solo pueden enviar mensajes de hasta 100 caracteres."}):(v.length>0?await l(v,h):await u({recipient_id:e.id,sender_id:p.id,content:h,message_type:"text"}),x(""),g([])))},C=e=>{if(null==i?void 0:i.is_vip)return!0;const t=e.filter(e=>e.type.startsWith("image/")).length,a=e.filter(e=>e.type.startsWith("video/")).length,r=v.filter(e=>e.type.startsWith("image/")).length,s=v.filter(e=>e.type.startsWith("video/")).length;return r+t>2?(f({variant:"destructive",title:"Límite de fotos alcanzado",description:"Los usuarios básicos solo pueden adjuntar 2 fotos por mensaje."}),!1):!(s+a>1)||(f({variant:"destructive",title:"Límite de videos alcanzado",description:"Los usuarios básicos solo pueden adjuntar 1 video por mensaje."}),!1)},S=e=>{C([e])&&g(t=>[...t,e])},E=e=>{w.current&&(w.current.accept="image"===e?"image/*":"video/*",w.current.multiple=!0,w.current.click())};return s.jsxs(be.div,{layout:!0,initial:{x:300},animate:{x:0},className:`w-full md:w-2/3 card-glass flex flex-col ${!e&&"hidden md:flex"}`,children:[s.jsx("input",{type:"file",ref:w,className:"hidden",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);C(t)&&g(e=>[...e,...t]),e.target.value=null}}),e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 border-b border-border-color flex items-center space-x-4 shrink-0",children:[s.jsx(pn,{variant:"ghost",className:"md:hidden",onClick:()=>t(null),children:s.jsx(xt,{})}),s.jsxs(Bc,{children:[s.jsx(Gc,{src:e.profile_picture_url,alt:e.alias}),s.jsx(Wc,{children:null==(m=e.alias)?void 0:m[0]})]}),s.jsx("div",{children:s.jsx("h3",{className:"text-xl font-bold",children:e.alias})})]}),s.jsx("div",{className:"flex-grow p-4 overflow-y-auto scrollbar-hide flex flex-col-reverse",children:a?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx(Ge,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pe,{children:r.map(e=>s.jsx(Ud,{message:e,currentUser:p},e.id))}),s.jsx("div",{ref:n})]})}),s.jsx("div",{className:"p-4 border-t border-border-color shrink-0",children:b?s.jsx(qd,{onRecordingComplete:o,profile:i,isRecording:b,setIsRecording:y}):s.jsxs(s.Fragment,{children:[c&&s.jsxs("div",{className:"mb-2",children:[s.jsxs("p",{className:"text-sm text-text-secondary mb-1",children:["Subiendo archivos... ",Math.round(d),"%"]}),s.jsx(bd,{value:d,className:"w-full h-2"})]}),v.length>0&&!c&&s.jsx("div",{className:"mb-2 p-2 bg-surface/50 rounded-lg",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:v.map((e,t)=>s.jsx($d,{file:e,onRemove:()=>(e=>{g(t=>t.filter((t,a)=>a!==e))})(t)},t))})}),s.jsxs("div",{className:"flex items-end space-x-2",children:[s.jsxs(cc,{children:[s.jsx(dc,{asChild:!0,children:s.jsx(pn,{type:"button",variant:"ghost",className:"btn-action self-end !p-2 !h-10 !w-10",disabled:c,children:s.jsx(vt,{size:24})})}),s.jsxs(hc,{className:"card-glass mb-2",children:[s.jsxs(xc,{onClick:()=>E("image"),children:[s.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Subir Foto"]}),s.jsxs(xc,{onClick:()=>E("video"),children:[s.jsx(ct,{className:"mr-2 h-4 w-4"}),"Subir Video"]}),s.jsx(Md,{useCamera:!0,onUploadSuccess:S,uploading:c,children:s.jsxs(xc,{onSelect:e=>e.preventDefault(),children:[s.jsx(lt,{className:"mr-2 h-4 w-4"}),"Tomar Foto"]})}),s.jsx(Fd,{useCamera:!0,onUploadSuccess:S,uploading:c,children:s.jsxs(xc,{onSelect:e=>e.preventDefault(),children:[s.jsx(lt,{className:"mr-2 h-4 w-4"}),"Grabar Video"]})})]})]}),s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Mi,{ref:j,value:h,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:"Escribe un mensaje...",className:"input-glass pr-10 resize-none overflow-y-auto",rows:"1",maxLength:(null==i?void 0:i.is_vip)?void 0:100,disabled:c}),!(null==i?void 0:i.is_vip)&&s.jsx("div",{className:"absolute right-3 bottom-2 text-xs text-text-secondary",children:100-h.length})]}),h.trim()||v.length>0?s.jsx(pn,{type:"button",onClick:N,variant:"ghost",className:"btn-action self-end !p-2 !h-10 !w-10",disabled:c,children:c?s.jsx(Ge,{className:"w-4 h-4 animate-spin"}):s.jsx(Ke,{size:24})}):s.jsx(pn,{type:"button",variant:"ghost",className:"btn-action self-end !p-2 !h-10 !w-10",onClick:()=>y(!0),disabled:c,children:s.jsx(ht,{size:24})})]})]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-secondary text-center p-4",children:[s.jsx(Xe,{className:"w-24 h-24 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold",children:"Selecciona un chat"}),s.jsx("p",{children:"Elige una conversación para empezar a chatear."})]})]})},Bd=()=>{const{user:e,profile:t}=wr(),{toast:a}=br(),r=Aa(),n=_a(),{uploadFiles:i,isUploading:o,progress:l}=Od(),[c,d]=le.useState([]),[u,m]=le.useState(()=>{try{const e=localStorage.getItem("agarch-active-chat");return e?JSON.parse(e):null}catch{return null}}),[p,f]=le.useState([]),[h,x]=le.useState(!0),[v,g]=le.useState(!1),b=le.useRef(null),y=le.useRef(null),j=le.useRef(null);le.useEffect(()=>{u?localStorage.setItem("agarch-active-chat",JSON.stringify(u)):localStorage.removeItem("agarch-active-chat")},[u]);const w=le.useCallback(async()=>{var t,s,i;if(null==e?void 0:e.id){x(!0);try{const{data:o,error:l}=await lr.from("messages").select("sender_id, recipient_id, sent_at").or(`sender_id.eq.${e.id},recipient_id.eq.${e.id}`).order("sent_at",{ascending:!1}).limit(500);if(l){return["42P01","42501"].includes(l.code)||(null==(t=l.message)?void 0:t.toLowerCase().includes("does not exist"))||(null==(s=l.message)?void 0:s.toLowerCase().includes("permission"))||a({variant:"destructive",title:"Error",description:"No se pudieron cargar las conversaciones."}),void d([])}const c=new Map;(o||[]).forEach(t=>{const a=t.sender_id===e.id?t.recipient_id:t.sender_id;a&&!c.has(a)&&c.set(a,t.sent_at)});const u=Array.from(c.keys());if(0===u.length)return void d([]);const{data:m,error:p}=await lr.from("profiles").select("id, alias, profile_picture_url, is_vip").in("id",u);if(p)return void d([]);const f=(m||[]).map(e=>({...e,lastMessageAt:c.get(e.id)})).sort((e,t)=>new Date(t.lastMessageAt)-new Date(e.lastMessageAt));d(f);const h=null==(i=r.state)?void 0:i.openChatWith;if(h){const e=f.find(e=>e.id===h);e&&(N(e),n(r.pathname,{replace:!0,state:{}}))}}catch(o){d([])}finally{x(!1)}}},[null==e?void 0:e.id,r.state,n,a]);le.useEffect(()=>{(null==e?void 0:e.id)&&w()},[w]);const N=le.useCallback(async t=>{if((null==e?void 0:e.id)&&(null==t?void 0:t.id)&&(null==u?void 0:u.id)!==t.id){m(t),g(!0),f([]);try{const{data:r,error:s}=await lr.from("messages").select("*").or(`and(sender_id.eq.${e.id},recipient_id.eq.${t.id}),and(sender_id.eq.${t.id},recipient_id.eq.${e.id})`).order("sent_at",{ascending:!0});s?(a({variant:"destructive",title:"Error",description:"No se pudieron cargar los mensajes."}),f([])):f(r||[])}catch(r){f([])}finally{g(!1)}}},[null==e?void 0:e.id,null==u?void 0:u.id,a]),C=le.useCallback(t=>{if(!(null==e?void 0:e.id)||!(null==u?void 0:u.id)||!(null==t?void 0:t.new))return;const a=t.new;(a.sender_id===e.id&&a.recipient_id===u.id||a.sender_id===u.id&&a.recipient_id===e.id)&&(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{f(e=>{const t=a.temp_id;if(t){const r=e.findIndex(e=>e.id===t||e.temp_id===t);if(-1!==r){const t=[...e];return t[r]=a,t}}return e.some(e=>e.id===a.id)?e:[...e,a]})},100))},[null==e?void 0:e.id,null==u?void 0:u.id]);le.useEffect(()=>{if(!(null==e?void 0:e.id))return;y.current&&lr.removeChannel(y.current);const t=lr.channel(`chat-messages-${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},C).subscribe();return y.current=t,()=>{y.current&&lr.removeChannel(y.current),j.current&&clearTimeout(j.current)}},[null==e?void 0:e.id,C]),le.useEffect(()=>{p.length>0&&setTimeout(()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})},100)},[p]);const S=le.useCallback(async t=>{if(!(null==e?void 0:e.id)||!(null==u?void 0:u.id))return;const r=`temp-${fr()}`,s={...t,id:r,temp_id:r,sent_at:(new Date).toISOString(),sender_id:e.id,recipient_id:u.id,isOptimistic:!0};f(e=>[...e,s]);try{const{error:s}=await lr.from("messages").insert({...t,sender_id:e.id,recipient_id:u.id,temp_id:r});s&&(a({variant:"destructive",title:"Error",description:"No se pudo enviar el mensaje."}),f(e=>e.filter(e=>e.id!==r)))}catch(n){f(e=>e.filter(e=>e.id!==r))}},[null==e?void 0:e.id,null==u?void 0:u.id,a]),E=le.useCallback(async(t,r="")=>{if(!(null==t?void 0:t.length)||!(null==e?void 0:e.id)||!(null==u?void 0:u.id))return;const s=`temp-${fr()}`,n={id:s,temp_id:s,recipient_id:u.id,sender_id:e.id,content:r,message_type:"media",media_urls:t.map(e=>URL.createObjectURL(e)),sent_at:(new Date).toISOString(),isOptimistic:!0};f(e=>[...e,n]);try{const n=await i(t,"media","chat-media");if((null==n?void 0:n.length)>0){const{error:t}=await lr.from("messages").insert({recipient_id:u.id,sender_id:e.id,content:r,message_type:"media",media_urls:n,temp_id:s});t&&(a({variant:"destructive",title:"Error",description:"No se pudo enviar el mensaje con archivos."}),f(e=>e.filter(e=>e.id!==s)))}else a({variant:"destructive",title:"Error",description:"Error al subir archivos."}),f(e=>e.filter(e=>e.id!==s))}catch(o){f(e=>e.filter(e=>e.id!==s))}},[null==e?void 0:e.id,null==u?void 0:u.id,i,a]),A=le.useCallback(async(t,r)=>{if(t&&(null==e?void 0:e.id)&&(null==u?void 0:u.id))try{const e=await i([t],"media","chat-audio");(null==e?void 0:e.length)>0?await S({message_type:"audio",media_urls:e,audio_duration_seconds:Math.round(r||0)}):a({variant:"destructive",title:"Error",description:"Error al subir audio."})}catch(s){a({variant:"destructive",title:"Error",description:"Error al subir audio."})}},[null==e?void 0:e.id,null==u?void 0:u.id,i,S,a]);return h?s.jsxs("div",{className:"flex flex-col justify-center items-center h-[calc(100vh-88px)] gap-4",children:[s.jsx(Ge,{className:"w-12 h-12 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Cargando conversaciones..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Chat - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Comunícate directamente con otros usuarios en AGARCH-AR."})]}),s.jsxs("div",{className:"h-[calc(100vh-88px)] md:h-auto md:aspect-[4/3] max-h-[calc(100vh-100px)] flex flex-col md:flex-row gap-4",children:[s.jsx(zd,{conversations:c,activeChat:u,handleSelectChat:N}),s.jsx(Hd,{activeChat:u,setActiveChat:m,loadingMessages:v,messages:p,messagesEndRef:b,profile:t,handleAudioUpload:A,handleFilesUpload:E,isUploading:o,uploadProgress:l,sendMessage:S})]}),!h&&0===c.length&&!u&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[s.jsx(Xe,{className:"w-16 h-16 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tienes conversaciones"}),s.jsx("p",{className:"text-muted-foreground",children:'Envía "Me gusta" a otros usuarios desde Descubrir para comenzar a chatear.'})]})]})};var Gd="AlertDialog",[Wd,Kd]=_(Gd,[Y]),Yd=Y(),Jd=e=>{const{__scopeAlertDialog:t,...a}=e,r=Yd(t);return s.jsx(m,{...r,...a,modal:!0})};Jd.displayName=Gd;var Xd=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,n=Yd(a);return s.jsx(p,{...n,...r,ref:t})});Xd.displayName="AlertDialogTrigger";var Zd=e=>{const{__scopeAlertDialog:t,...a}=e,r=Yd(t);return s.jsx(u,{...r,...a})};Zd.displayName="AlertDialogPortal";var Qd=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,n=Yd(a);return s.jsx(i,{...n,...r,ref:t})});Qd.displayName="AlertDialogOverlay";var eu="AlertDialogContent",[tu,au]=Wd(eu),ru=X("AlertDialogContent"),su=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:r,...n}=e,i=Yd(a),l=le.useRef(null),c=T(t,l),d=le.useRef(null);return s.jsx(J,{contentName:eu,titleName:nu,docsSlug:"alert-dialog",children:s.jsx(tu,{scope:a,cancelRef:d,children:s.jsxs(o,{role:"alertdialog",...i,...n,ref:c,onOpenAutoFocus:R(n.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=d.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[s.jsx(ru,{children:r}),s.jsx(mu,{contentRef:l})]})})})});su.displayName=eu;var nu="AlertDialogTitle",iu=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,n=Yd(a);return s.jsx(c,{...n,...r,ref:t})});iu.displayName=nu;var ou="AlertDialogDescription",lu=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,n=Yd(a);return s.jsx(d,{...n,...r,ref:t})});lu.displayName=ou;var cu=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,n=Yd(a);return s.jsx(l,{...n,...r,ref:t})});cu.displayName="AlertDialogAction";var du="AlertDialogCancel",uu=le.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,{cancelRef:n}=au(du,a),i=Yd(a),o=T(t,n);return s.jsx(l,{...i,...r,ref:o})});uu.displayName=du;var mu=({contentRef:e})=>{const t=`\`${eu}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${eu}\` by passing a \`${ou}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${eu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return le.useEffect(()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))},[t,e]),null},pu=Qd,fu=su,hu=cu,xu=uu,vu=iu,gu=lu;const bu=Jd,yu=Xd,ju=Zd,wu=ue.forwardRef(({className:e,...t},a)=>s.jsx(pu,{className:un("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));wu.displayName=pu.displayName;const Nu=ue.forwardRef(({className:e,...t},a)=>s.jsxs(ju,{children:[s.jsx(wu,{}),s.jsx(fu,{ref:a,className:un("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-slate-800 dark:bg-slate-950",e),...t})]}));Nu.displayName=fu.displayName;const Cu=({className:e,...t})=>s.jsx("div",{className:un("flex flex-col space-y-2 text-center sm:text-left",e),...t});Cu.displayName="AlertDialogHeader";const Su=({className:e,...t})=>s.jsx("div",{className:un("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Su.displayName="AlertDialogFooter";const Eu=ue.forwardRef(({className:e,...t},a)=>s.jsx(vu,{ref:a,className:un("text-lg font-semibold",e),...t}));Eu.displayName=vu.displayName;const Au=ue.forwardRef(({className:e,...t},a)=>s.jsx(gu,{ref:a,className:un("text-sm text-slate-500 dark:text-slate-400",e),...t}));Au.displayName=gu.displayName;const ku=ue.forwardRef(({className:e,...t},a)=>s.jsx(hu,{ref:a,className:un(mn(),e),...t}));ku.displayName=hu.displayName;const _u=ue.forwardRef(({className:e,...t},a)=>s.jsx(xu,{ref:a,className:un(mn({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));_u.displayName=xu.displayName;const Tu=()=>{const{profile:e,refreshProfile:t}=wr(),{toast:a}=br(),[r,n]=le.useState(!1);return s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-glass",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Ubicación"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(gt,{className:"text-cyan-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Actualizar mi ubicación"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Usa tu ubicación actual para encontrar perfiles cercanos."})]})]}),s.jsx(pn,{onClick:()=>{navigator.geolocation?(n(!0),navigator.geolocation.getCurrentPosition(async r=>{const{latitude:s,longitude:i}=r.coords;if("number"!=typeof s||"number"!=typeof i)return a({variant:"destructive",title:"Error al obtener ubicación",description:"No se pudieron obtener coordenadas válidas."}),void n(!1);const{error:o}=await lr.from("profiles").update({latitud:s,longitud:i,updated_at:(new Date).toISOString()}).eq("id",e.id);o?a({variant:"destructive",title:"Error al guardar ubicación",description:o.message}):(a({title:"¡Éxito!",description:"Tu ubicación ha sido actualizada correctamente."}),await t()),n(!1)},e=>{a({variant:"destructive",title:"Error al obtener ubicación",description:"No se pudo obtener tu ubicación. Asegúrate de haber concedido los permisos."}),n(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):a({variant:"destructive",title:"Geolocalización no disponible",description:"Tu navegador no soporta la geolocalización."})},disabled:r,className:"btn-action",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizando..."]}):"Actualizar Ubicación"})]})})]})},Ru=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:s.jsx("path",{d:"M7.72 4.28a.2.2 0 0 0-.18.32l2.35 12.33a.2.2 0 0 0 .2.16h2.86a.2.2 0 0 0 .2-.16L15.48 4.6a.2.2 0 0 0-.19-.32h-3.1a.2.2 0 0 1-.2-.16L9.64 2.3a.2.2 0 0 0-.2-.16H6.5a.2.2 0 0 0-.2.16L3.95 16.9a.2.2 0 0 0 .2.16h2.82a.2.2 0 0 0 .2-.16l.7-3.66h.1a.2.2 0 0 0 .2-.16l.29-1.5a.2.2 0 0 0-.2-.25h-2.1a.2.2 0 0 1-.2-.16l.94-4.88a.2.2 0 0 1 .2-.16h2.92a.2.2 0 0 1 .2.16L7.72 4.28z"})}),Pu=()=>{const{profile:e,signOut:t,deleteAccount:a,refreshProfile:r,loading:n}=wr(),{toast:i}=br(),o=_a(),[l,c]=le.useState(""),[d,u]=le.useState(!1),[m,p]=le.useState({}),[f,h]=le.useState({}),[x,v]=le.useState(!1),[g,b]=le.useState(null);if(le.useEffect(()=>{try{e&&!n&&(p({visibility:e.visibility||"public"}),h({notifications_new_match:e.notifications_new_match??!0,notifications_new_message:e.notifications_new_message??!0,notifications_promotions:e.notifications_promotions??!0,notification_sound:e.notification_sound||"sound"}),b(null))}catch(t){b("Error al cargar la configuración")}},[e,n]),n)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"loading-spinner"})});if(!e)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Error al cargar configuración"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"No se pudo cargar tu perfil"}),s.jsx(pn,{onClick:()=>window.location.reload(),className:"btn-action",children:"Reintentar"})]})});const y=async t=>{v(!0);try{const{error:a}=await lr.from("profiles").update(t).eq("id",e.id);return a?(i({variant:"destructive",title:"Error",description:`No se pudieron guardar los cambios. ${a.message}`}),v(!1),!1):(i({title:"¡Éxito!",description:"Tus ajustes se han guardado."}),await r(),v(!1),!0)}catch(a){return i({variant:"destructive",title:"Error",description:"Error inesperado al guardar configuración."}),v(!1),!1}};return s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Ajustes - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Gestiona tu cuenta, privacidad y notificaciones en AGARCH-AR."})]}),s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 text-white",children:[s.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Ajustes"}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-glass",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Cuenta"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Du,{icon:s.jsx(bt,{className:"text-yellow-400"}),title:"Membresía",description:(null==e?void 0:e.is_vip)?"Eres un miembro VIP":"Membresía Gratuita",children:!(null==e?void 0:e.is_vip)&&s.jsxs(pn,{onClick:()=>{i({title:"🚧 Función en desarrollo",description:"Esta característica estará disponible pronto. ¡Puedes solicitarla en tu próximo prompt! 🚀"})},className:"btn-action bg-[#0070BA] hover:bg-[#005ea6] text-white font-bold",children:[s.jsx(Ru,{}),"Hacerse VIP con PayPal"]})}),s.jsx(Du,{icon:s.jsx(ge,{className:"text-green-400"}),title:"Verificación",description:(null==e?void 0:e.is_verified)?"Tu cuenta ha sido verificada.":"Cuenta no verificada."}),s.jsx(Du,{icon:s.jsx(yt,{className:"text-blue-400"}),title:"Pagos y Suscripciones",description:"Gestiona tus pagos con PayPal.",children:s.jsx(pn,{onClick:()=>o("/payments"),variant:"outline",className:"btn-outline-action",children:"Gestionar"})})]})]}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-glass",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Privacidad y Seguridad"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ui,{children:[s.jsx(qi,{asChild:!0,children:s.jsx(Du,{icon:s.jsx(_e,{className:"text-purple-400"}),title:"Visibilidad del Perfil",description:"Controla quién puede ver tu perfil.",children:s.jsx(pn,{variant:"outline",className:"btn-outline-action",children:"Ajustar"})})}),s.jsxs(Gi,{className:"card-glass bg-surface",children:[s.jsxs(Wi,{children:[s.jsx(Yi,{className:"text-primary",children:"Visibilidad del Perfil"}),s.jsx(Ji,{children:"Elige quién puede ver tu perfil en la plataforma."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsx(Vi,{htmlFor:"visibility-select",children:"Quiero que mi perfil sea visible para:"}),s.jsxs(Sl,{id:"visibility-select",value:m.visibility,onValueChange:e=>p({...m,visibility:e}),children:[s.jsx(Al,{className:"input-glass",children:s.jsx(El,{})}),s.jsxs(Tl,{children:[s.jsx(Rl,{value:"public",children:"Todos"}),s.jsx(Rl,{value:"verified_members",children:"Solo miembros verificados"}),s.jsx(Rl,{value:"matches",children:"Solo mis matches"})]})]})]}),s.jsxs(Ki,{children:[s.jsx(Hi,{asChild:!0,children:s.jsx(pn,{type:"button",variant:"secondary",className:"btn-secondary-action",children:"Cancelar"})}),s.jsx(Hi,{asChild:!0,children:s.jsx(pn,{onClick:()=>y(m),disabled:x,className:"btn-action",children:x?"Guardando...":"Guardar"})})]})]})]}),s.jsxs(Ui,{children:[s.jsx(qi,{asChild:!0,children:s.jsx(Du,{icon:s.jsx(Be,{className:"text-orange-400"}),title:"Notificaciones",description:"Elige qué y cómo recibir notificaciones.",children:s.jsx(pn,{variant:"outline",className:"btn-outline-action",children:"Configurar"})})}),s.jsxs(Gi,{className:"card-glass bg-surface",children:[s.jsxs(Wi,{children:[s.jsx(Yi,{className:"text-primary",children:"Notificaciones"}),s.jsx(Ji,{children:"Gestiona las alertas que recibes."})]}),s.jsxs("div",{className:"py-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{className:"text-base font-medium text-text-primary",children:"Alertas"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sc,{id:"notif-match",checked:f.notifications_new_match,onCheckedChange:e=>h(t=>({...t,notifications_new_match:e}))}),s.jsx(Vi,{htmlFor:"notif-match",children:"Nuevos Matches"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sc,{id:"notif-message",checked:f.notifications_new_message,onCheckedChange:e=>h(t=>({...t,notifications_new_message:e}))}),s.jsx(Vi,{htmlFor:"notif-message",children:"Nuevos Mensajes"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sc,{id:"notif-promo",checked:f.notifications_promotions,onCheckedChange:e=>h(t=>({...t,notifications_promotions:e}))}),s.jsx(Vi,{htmlFor:"notif-promo",children:"Ofertas y Promociones"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{className:"text-base font-medium text-text-primary",children:"Modo de alerta"}),s.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[s.jsxs("button",{onClick:()=>h(e=>({...e,notification_sound:"sound"})),className:un("flex flex-col items-center p-2 rounded-lg border-2","sound"===f.notification_sound?"border-primary bg-primary/20":"border-border-color hover:bg-surface/80"),children:[s.jsx(jt,{})," ",s.jsx("span",{className:"text-sm mt-1",children:"Sonido"})]}),s.jsxs("button",{onClick:()=>h(e=>({...e,notification_sound:"vibrate"})),className:un("flex flex-col items-center p-2 rounded-lg border-2","vibrate"===f.notification_sound?"border-primary bg-primary/20":"border-border-color hover:bg-surface/80"),children:[s.jsx(wt,{})," ",s.jsx("span",{className:"text-sm mt-1",children:"Vibración"})]}),s.jsxs("button",{onClick:()=>h(e=>({...e,notification_sound:"silent"})),className:un("flex flex-col items-center p-2 rounded-lg border-2","silent"===f.notification_sound?"border-primary bg-primary/20":"border-border-color hover:bg-surface/80"),children:[s.jsx(Nt,{})," ",s.jsx("span",{className:"text-sm mt-1",children:"Silencio"})]})]})]})]}),s.jsxs(Ki,{children:[s.jsx(Hi,{asChild:!0,children:s.jsx(pn,{type:"button",variant:"secondary",className:"btn-secondary-action",children:"Cancelar"})}),s.jsx(Hi,{asChild:!0,children:s.jsx(pn,{onClick:()=>y(f),disabled:x,className:"btn-action",children:x?"Guardando...":"Guardar"})})]})]})]}),s.jsx(Du,{icon:s.jsx(pt,{className:"text-brand-red"}),title:"Denuncia, o reporta un problema",description:"Ayúdanos a mantener la comunidad segura.",children:s.jsx(pn,{onClick:()=>o("/contact"),variant:"outline",className:"btn-outline-action border-brand-red text-brand-red hover:bg-brand-red/10",children:"Reportar"})})]})]}),s.jsx(Tu,{}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-glass",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Acciones de la Cuenta"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(bu,{children:[s.jsx(yu,{asChild:!0,children:s.jsxs(pn,{variant:"outline",className:"w-full justify-between btn-outline-action",children:[s.jsx("span",{children:"Cerrar Sesión"}),s.jsx(De,{className:"w-4 h-4"})]})}),s.jsxs(Nu,{className:"card-glass bg-surface",children:[s.jsxs(Cu,{children:[s.jsx(Eu,{className:"text-primary",children:"¿Estás seguro?"}),s.jsx(Au,{className:"text-text-secondary",children:"Podrás volver a iniciar sesión en cualquier momento."})]}),s.jsxs(Su,{children:[s.jsx(_u,{className:"btn-secondary-action",children:"Cancelar"}),s.jsx(ku,{onClick:t,className:"btn-action",children:"Cerrar Sesión"})]})]})]}),s.jsxs(bu,{children:[s.jsx(yu,{asChild:!0,children:s.jsxs(pn,{variant:"destructive",className:"w-full justify-between",children:[s.jsx("span",{children:"Eliminar mi Cuenta"}),s.jsx(tt,{className:"w-4 h-4"})]})}),s.jsxs(Nu,{className:"card-glass bg-surface",children:[s.jsxs(Cu,{children:[s.jsx(Eu,{className:"text-destructive",children:"¿Estás absolutamente seguro?"}),s.jsxs(Au,{className:"text-text-secondary",children:["Esta acción es irreversible. Todos tus datos, perfil, fotos y publicaciones serán eliminados permanentemente. Esta información no se podrá recuperar.",s.jsx("br",{}),s.jsx("br",{}),"Para confirmar, escribe ",s.jsx("strong",{children:"eliminar"})," a continuación:"]})]}),s.jsx(Oi,{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"eliminar",className:"input-glass bg-surface/50 my-4"}),s.jsxs(Su,{children:[s.jsx(_u,{className:"btn-secondary-action",onClick:()=>c(""),children:"Cancelar"}),s.jsx(ku,{onClick:async()=>{if("eliminar"===l.toLowerCase()){u(!0);try{await a()}catch(e){i({variant:"destructive",title:"Error",description:"No se pudo eliminar la cuenta. Intenta de nuevo."})}finally{u(!1)}}else i({variant:"destructive",title:"Confirmación incorrecta",description:"Por favor, escribe 'eliminar' para confirmar."})},disabled:"eliminar"!==l.toLowerCase()||d,className:"bg-destructive hover:bg-red-700",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Eliminando..."]}):"Sí, eliminar mi cuenta"})]})]})]})]})]})]})]})},Du=({icon:e,title:t,description:a,children:r})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[e,s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:t}),s.jsx("p",{className:"text-sm text-text-secondary",children:a})]})]}),r]});function Ou(e,t,{checkForDefaultPrevented:a=!0}={}){return function(r){if(null==e||e(r),!1===a||!r.defaultPrevented)return null==t?void 0:t(r)}}function Mu(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]}),{});return le.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}function Fu(e,t,{checkForDefaultPrevented:a=!0}={}){return function(r){if(null==e||e(r),!1===a||!r.defaultPrevented)return null==t?void 0:t(r)}}function Iu(e,t=[]){let a=[];const r=()=>{const t=a.map(e=>le.createContext(e));return function(a){const r=(null==a?void 0:a[e])||t;return le.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){const s=le.createContext(r),n=a.length;function i(t){const{scope:a,children:r,...i}=t,o=(null==a?void 0:a[e][n])||s,l=le.useMemo(()=>i,Object.values(i));return le.createElement(o.Provider,{value:l},r)}return a=[...a,r],i.displayName=t+"Provider",[i,function(a,i){const o=(null==i?void 0:i[e][n])||s,l=le.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Lu(r,...t)]}function Lu(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]}),{});return le.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}function Vu(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function zu(...e){return le.useCallback(Vu(...e),e)}const Uu=le.forwardRef((e,t)=>{const{children:a,...r}=e,s=le.Children.toArray(a),n=s.find(Hu);if(n){const e=n.props.children,a=s.map(t=>t===n?le.Children.count(e)>1?le.Children.only(null):le.isValidElement(e)?e.props.children:null:t);return le.createElement(qu,K({},r,{ref:t}),le.isValidElement(e)?le.cloneElement(e,void 0,a):null)}return le.createElement(qu,K({},r,{ref:t}),a)});Uu.displayName="Slot";const qu=le.forwardRef((e,t)=>{const{children:a,...r}=e;return le.isValidElement(a)?le.cloneElement(a,{...Bu(r,a.props),ref:t?Vu(t,a.ref):a.ref}):le.Children.count(a)>1?le.Children.only(null):null});qu.displayName="SlotClone";const $u=({children:e})=>le.createElement(le.Fragment,null,e);function Hu(e){return le.isValidElement(e)&&e.type===$u}function Bu(e,t){const a={...t};for(const r in t){const s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{n(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}const Gu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const a=le.forwardRef((e,a)=>{const{asChild:r,...s}=e,n=r?Uu:t;return le.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),le.createElement(n,K({},s,{ref:a}))});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function Wu(e){const t=le.useRef(e);return le.useEffect(()=>{t.current=e}),le.useMemo(()=>(...e)=>{var a;return null===(a=t.current)||void 0===a?void 0:a.call(t,...e)},[])}function Ku({prop:e,defaultProp:t,onChange:a=()=>{}}){const[r,s]=function({defaultProp:e,onChange:t}){const a=le.useState(e),[r]=a,s=le.useRef(r),n=Wu(t);return le.useEffect(()=>{s.current!==r&&(n(r),s.current=r)},[r,s,n]),a}({defaultProp:t,onChange:a}),n=void 0!==e,i=n?e:r,o=Wu(a);return[i,le.useCallback(t=>{if(n){const a="function"==typeof t?t(e):t;a!==e&&o(a)}else s(t)},[n,e,s,o])]}const Yu="rovingFocusGroup.onEntryFocus",Ju={bubbles:!1,cancelable:!0},Xu="RovingFocusGroup",[Zu,Qu,em]=function(e){const t=e+"CollectionProvider",[a,r]=Iu(t),[s,n]=a(t,{collectionRef:{current:null},itemMap:new Map}),i=e+"CollectionSlot",o=e+"CollectionItemSlot",l="data-radix-collection-item";return[{Provider:e=>{const{scope:t,children:a}=e,r=ue.useRef(null),n=ue.useRef(new Map).current;return ue.createElement(s,{scope:t,itemMap:n,collectionRef:r},a)},Slot:ue.forwardRef((e,t)=>{const{scope:a,children:r}=e,s=zu(t,n(i,a).collectionRef);return ue.createElement(Uu,{ref:s},r)}),ItemSlot:ue.forwardRef((e,t)=>{const{scope:a,children:r,...s}=e,i=ue.useRef(null),c=zu(t,i),d=n(o,a);return ue.useEffect(()=>(d.itemMap.set(i,{ref:i,...s}),()=>{d.itemMap.delete(i)})),ue.createElement(Uu,{[l]:"",ref:c},r)})},function(t){const a=n(e+"CollectionConsumer",t);return ue.useCallback(()=>{const e=a.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${l}]`));return Array.from(a.itemMap.values()).sort((e,a)=>t.indexOf(e.ref.current)-t.indexOf(a.ref.current))},[a.collectionRef,a.itemMap])},r]}(Xu),[tm,am]=Iu(Xu,[em]),[rm,sm]=tm(Xu),nm=le.forwardRef((e,t)=>le.createElement(Zu.Provider,{scope:e.__scopeRovingFocusGroup},le.createElement(Zu.Slot,{scope:e.__scopeRovingFocusGroup},le.createElement(im,K({},e,{ref:t}))))),im=le.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:s=!1,dir:n,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,...d}=e,u=le.useRef(null),m=zu(t,u),p=Z(n),[f=null,h]=Ku({prop:i,defaultProp:o,onChange:l}),[x,v]=le.useState(!1),g=Wu(c),b=Qu(a),y=le.useRef(!1),[j,w]=le.useState(0);return le.useEffect(()=>{const e=u.current;if(e)return e.addEventListener(Yu,g),()=>e.removeEventListener(Yu,g)},[g]),le.createElement(rm,{scope:a,orientation:r,dir:p,loop:s,currentTabStopId:f,onItemFocus:le.useCallback(e=>h(e),[h]),onItemShiftTab:le.useCallback(()=>v(!0),[]),onFocusableItemAdd:le.useCallback(()=>w(e=>e+1),[]),onFocusableItemRemove:le.useCallback(()=>w(e=>e-1),[])},le.createElement(Gu.div,K({tabIndex:x||0===j?-1:0,"data-orientation":r},d,{ref:m,style:{outline:"none",...e.style},onMouseDown:Fu(e.onMouseDown,()=>{y.current=!0}),onFocus:Fu(e.onFocus,e=>{const t=!y.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(Yu,Ju);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);cm([e.find(e=>e.active),e.find(e=>e.id===f),...e].filter(Boolean).map(e=>e.ref.current))}}y.current=!1}),onBlur:Fu(e.onBlur,()=>v(!1))})))}),om=le.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:s=!1,tabStopId:n,...i}=e,o=Q(),l=n||o,c=sm("RovingFocusGroupItem",a),d=c.currentTabStopId===l,u=Qu(a),{onFocusableItemAdd:m,onFocusableItemRemove:p}=c;return le.useEffect(()=>{if(r)return m(),()=>p()},[r,m,p]),le.createElement(Zu.ItemSlot,{scope:a,id:l,focusable:r,active:s},le.createElement(Gu.span,K({tabIndex:d?0:-1,"data-orientation":c.orientation},i,{ref:t,onMouseDown:Fu(e.onMouseDown,e=>{r?c.onItemFocus(l):e.preventDefault()}),onFocus:Fu(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Fu(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void c.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,a){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,a);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:lm[r]}(e,c.orientation,c.dir);if(void 0!==t){e.preventDefault();let s=u().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const n=s.indexOf(e.currentTarget);s=c.loop?(r=n+1,(a=s).map((e,t)=>a[(r+t)%a.length])):s.slice(n+1)}setTimeout(()=>cm(s))}var a,r})})))}),lm={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cm(e){const t=document.activeElement;for(const a of e){if(a===t)return;if(a.focus(),document.activeElement!==t)return}}const dm=nm,um=om;function mm(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}const pm=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?le.useLayoutEffect:()=>{};const fm=e=>{const{present:t,children:a}=e,r=function(e){const[t,a]=le.useState(),r=le.useRef({}),s=le.useRef(e),n=le.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return le.useReducer((e,a)=>{const r=t[e][a];return null!=r?r:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return le.useEffect(()=>{const e=hm(r.current);n.current="mounted"===o?e:"none"},[o]),pm(()=>{const t=r.current,a=s.current;if(a!==e){const r=n.current,i=hm(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(a&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),pm(()=>{if(t){const e=e=>{const a=hm(r.current).includes(e.animationName);e.target===t&&a&&oe.flushSync(()=>l("ANIMATION_END"))},a=e=>{e.target===t&&(n.current=hm(r.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:le.useCallback(e=>{e&&(r.current=getComputedStyle(e)),a(e)},[])}}(t),s="function"==typeof a?a({present:r.isPresent}):le.Children.only(a),n=function(...e){return le.useCallback(mm(...e),e)}(r.ref,s.ref);return"function"==typeof a||r.isPresent?le.cloneElement(s,{ref:n}):null};function hm(e){return(null==e?void 0:e.animationName)||"none"}fm.displayName="Presence";const xm=le.forwardRef((e,t)=>{const{children:a,...r}=e,s=le.Children.toArray(a),n=s.find(bm);if(n){const e=n.props.children,a=s.map(t=>t===n?le.Children.count(e)>1?le.Children.only(null):le.isValidElement(e)?e.props.children:null:t);return le.createElement(vm,K({},r,{ref:t}),le.isValidElement(e)?le.cloneElement(e,void 0,a):null)}return le.createElement(vm,K({},r,{ref:t}),a)});xm.displayName="Slot";const vm=le.forwardRef((e,t)=>{const{children:a,...r}=e;return le.isValidElement(a)?le.cloneElement(a,{...ym(r,a.props),ref:t?mm(t,a.ref):a.ref}):le.Children.count(a)>1?le.Children.only(null):null});vm.displayName="SlotClone";const gm=({children:e})=>le.createElement(le.Fragment,null,e);function bm(e){return le.isValidElement(e)&&e.type===gm}function ym(e,t){const a={...t};for(const r in t){const s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{n(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}const jm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const a=le.forwardRef((e,a)=>{const{asChild:r,...s}=e,n=r?xm:t;return le.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),le.createElement(n,K({},s,{ref:a}))});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function wm(e){const t=le.useRef(e);return le.useEffect(()=>{t.current=e}),le.useMemo(()=>(...e)=>{var a;return null===(a=t.current)||void 0===a?void 0:a.call(t,...e)},[])}function Nm({prop:e,defaultProp:t,onChange:a=()=>{}}){const[r,s]=function({defaultProp:e,onChange:t}){const a=le.useState(e),[r]=a,s=le.useRef(r),n=wm(t);return le.useEffect(()=>{s.current!==r&&(n(r),s.current=r)},[r,s,n]),a}({defaultProp:t,onChange:a}),n=void 0!==e,i=n?e:r,o=wm(a);return[i,le.useCallback(t=>{if(n){const a="function"==typeof t?t(e):t;a!==e&&o(a)}else s(t)},[n,e,s,o])]}const Cm="Tabs",[Sm,Em]=function(e,t=[]){let a=[];const r=()=>{const t=a.map(e=>le.createContext(e));return function(a){const r=(null==a?void 0:a[e])||t;return le.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){const s=le.createContext(r),n=a.length;function i(t){const{scope:a,children:r,...i}=t,o=(null==a?void 0:a[e][n])||s,l=le.useMemo(()=>i,Object.values(i));return le.createElement(o.Provider,{value:l},r)}return a=[...a,r],i.displayName=t+"Provider",[i,function(a,i){const o=(null==i?void 0:i[e][n])||s,l=le.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Mu(r,...t)]}(Cm,[am]),Am=am(),[km,_m]=Sm(Cm),Tm=le.forwardRef((e,t)=>{const{__scopeTabs:a,value:r,onValueChange:s,defaultValue:n,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Z(o),[u,m]=Nm({prop:r,onChange:s,defaultProp:n});return le.createElement(km,{scope:a,baseId:Q(),value:u,onValueChange:m,orientation:i,dir:d,activationMode:l},le.createElement(jm.div,K({dir:d,"data-orientation":i},c,{ref:t})))});function Rm(e,t){return`${e}-trigger-${t}`}function Pm(e,t){return`${e}-content-${t}`}const Dm=le.forwardRef((e,t)=>{const{__scopeTabs:a,loop:r=!0,...s}=e,n=_m("TabsList",a),i=Am(a);return le.createElement(dm,K({asChild:!0},i,{orientation:n.orientation,dir:n.dir,loop:r}),le.createElement(jm.div,K({role:"tablist","aria-orientation":n.orientation},s,{ref:t})))}),Om=le.forwardRef((e,t)=>{const{__scopeTabs:a,value:r,disabled:s=!1,...n}=e,i=_m("TabsTrigger",a),o=Am(a),l=Rm(i.baseId,r),c=Pm(i.baseId,r),d=r===i.value;return le.createElement(um,K({asChild:!0},o,{focusable:!s,active:d}),le.createElement(jm.button,K({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l},n,{ref:t,onMouseDown:Ou(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:Ou(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:Ou(e.onFocus,()=>{const e="manual"!==i.activationMode;d||s||!e||i.onValueChange(r)})})))}),Mm=le.forwardRef((e,t)=>{const{__scopeTabs:a,value:r,forceMount:s,children:n,...i}=e,o=_m("TabsContent",a),l=Rm(o.baseId,r),c=Pm(o.baseId,r),d=r===o.value,u=le.useRef(d);return le.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),le.createElement(fm,{present:s||d},({present:a})=>le.createElement(jm.div,K({"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!a,id:c,tabIndex:0},i,{ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0}}),a&&n))}),Fm=Tm,Im=ue.forwardRef(({className:e,...t},a)=>s.jsx(Dm,{ref:a,className:un("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Im.displayName=Dm.displayName;const Lm=ue.forwardRef(({className:e,...t},a)=>s.jsx(Om,{ref:a,className:un("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Lm.displayName=Om.displayName;const Vm=ue.forwardRef(({className:e,...t},a)=>s.jsx(Mm,{ref:a,className:un("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Vm.displayName=Mm.displayName;const zm=()=>{const{user:e}=wr(),{toast:t}=br(),a=_a(),{uploadFile:r,uploading:n,progress:i,setProgress:o}=Od(),[l,c]=le.useState("post"),[d,u]=le.useState(""),[m,p]=le.useState(!1),f=async(e,a)=>{let s;if(p(!0),e)return s="story"===l?"image"===a?"stories":"story-videos":"image"===a?"posts":"post-videos",void r(e,"media",s,async(e,r)=>{if(r)return t({variant:"destructive",title:"Error de subida",description:r.message}),void p(!1);e&&("story"===l?await x(e,a):await h(e,a)),p(!1)});"story"===l?await x(null,a):await h(null,a),p(!1)},h=async(r,s)=>{if(!d.trim()&&!r)return void t({variant:"destructive",title:"Error",description:"La publicación no puede estar vacía."});const n={user_id:e.id,text:d,...r&&"image"===s&&{image_url:r},...r&&"video"===s&&{video_url:r}},{error:i}=await lr.from("posts").insert(n);i?t({variant:"destructive",title:"Error",description:"No se pudo crear la publicación."}):(t({title:"¡Publicación creada con éxito!"}),a("/discover"))},x=async(r,s)=>{if(!r)return void t({variant:"destructive",title:"Error",description:"Debes seleccionar un archivo para tu historia."});const{error:n}=await lr.from("stories").insert({user_id:e.id,media_url:r,media_type:s});n?t({variant:"destructive",title:"Error",description:"No se pudo crear la historia."}):(t({title:"¡Historia creada con éxito!"}),a("/discover"))},v=m||n;return s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Crear - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Crea una nueva publicación o historia en AGARCH-AR."})]}),s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs(bl,{className:"card-glass",children:[s.jsx(yl,{children:s.jsx(jl,{className:"text-2xl font-bold text-center text-primary",children:"Crear"})}),s.jsx(Nl,{children:s.jsxs(Fm,{value:l,onValueChange:c,className:"w-full",children:[s.jsxs(Im,{className:"grid w-full grid-cols-2",children:[s.jsxs(Lm,{value:"post",children:[s.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Publicación"]}),s.jsxs(Lm,{value:"story",children:[s.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Historia"]})]}),s.jsx(Vm,{value:"post",children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx(Mi,{placeholder:"¿Qué estás pensando?",value:d,onChange:e=>u(e.target.value),className:"input-glass min-h-[100px]",disabled:v}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Añadir a tu publicación:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Md,{onUploadSuccess:e=>f(e,"image"),uploading:n}),s.jsx(Fd,{onUploadSuccess:e=>f(e,"video"),uploading:n,progress:i})]})]}),s.jsxs(pn,{onClick:()=>f(null,"text"),disabled:v||!d.trim(),className:"w-full btn-action",children:[m?s.jsx(Ge,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Publicar"]})]})}),s.jsx(Vm,{value:"story",children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx("p",{className:"text-sm text-center text-text-secondary",children:"Las historias desaparecen después de 24 horas."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Md,{onUploadSuccess:e=>f(e,"image"),uploading:n}),s.jsx(Fd,{onUploadSuccess:e=>f(e,"video"),uploading:n,progress:i})]})]})})]})})]})})]})},Um=()=>{const{user:e}=wr(),t=_a(),{toast:a}=br(),[r,n]=le.useState([]),[i,o]=le.useState(!0);return le.useEffect(()=>{(async()=>{if(!e)return void o(!1);o(!0);const{data:t,error:r}=await lr.from("payments").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});r?a({variant:"destructive",title:"Error al cargar pagos",description:"No se pudo obtener tu historial de transacciones."}):n(t),o(!1)})()},[e,a]),i?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"loading-spinner"})}):s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:"Pagos y Suscripciones - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Revisa tu historial de pagos y suscripciones en AGARCH-AR."})]}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-primary",children:"Pagos y Suscripciones"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Aquí puedes ver un historial de todas tus transacciones."})]}),s.jsxs(pn,{variant:"ghost",onClick:()=>t(-1),className:"text-primary hover:bg-primary/10",children:[s.jsx(xt,{className:"w-4 h-4 mr-2"}),"Volver"]})]}),s.jsx("div",{className:"card-glass",children:s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-primary mb-4",children:"Historial de Transacciones"}),0===r.length?s.jsxs("div",{className:"text-center py-10",children:[s.jsx(St,{className:"mx-auto h-12 w-12 text-text-secondary"}),s.jsx("h3",{className:"mt-2 text-sm font-semibold text-text-primary",children:"Sin transacciones"}),s.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Aún no has realizado ningún pago."})]}):s.jsx("ul",{className:"divide-y divide-border-color",children:r.map(e=>s.jsxs("li",{className:"flex items-center justify-between py-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full "+("completed"===e.status?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:"completed"===e.status?s.jsx(Te,{className:"h-6 w-6"}):s.jsx(Et,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-text-primary",children:e.description}),s.jsx("p",{className:"text-sm text-text-secondary",children:ft(new Date(e.created_at),"d 'de' MMMM, yyyy",{locale:Nc})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-text-primary",children:[e.amount.toFixed(2)," ",e.currency]}),s.jsx("p",{className:"text-sm capitalize text-text-secondary",children:e.payment_method})]})]},e.id))})]})})]})]})};function qm(e,[t,a]){return Math.min(a,Math.max(t,e))}var $m=le.createContext(void 0);var Hm=["PageUp","PageDown"],Bm=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Gm={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Wm="Slider",[Km,Ym,Jm]=ee(Wm),[Xm,Zm]=_(Wm,[Jm]),[Qm,ep]=Xm(Wm),tp=le.forwardRef((e,t)=>{const{name:a,min:r=0,max:n=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:h,...x}=e,v=le.useRef(new Set),g=le.useRef(0),b="horizontal"===o?sp:np,[y=[],j]=O({prop:u,defaultProp:d,onChange:e=>{var t;null==(t=[...v.current][g.current])||t.focus(),m(e)}}),w=le.useRef(y);function N(e,t,{commit:a}={commit:!1}){const s=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const a=Math.pow(10,t);return Math.round(e*a)/a}(Math.round((e-r)/i)*i+r,s),l=qm(o,[r,n]);j((e=[])=>{const r=function(e=[],t,a){const r=[...e];return r[a]=t,r.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const a=function(e){return e.slice(0,-1).map((t,a)=>e[a+1]-t)}(e);return Math.min(...a)>=t}return!0}(r,c*i)){g.current=r.indexOf(l);const t=String(r)!==String(e);return t&&a&&p(r),t?r:e}return e})}return s.jsx(Qm,{scope:e.__scopeSlider,name:a,disabled:l,min:r,max:n,valueIndexToChangeRef:g,thumbs:v.current,values:y,orientation:o,form:h,children:s.jsx(Km.Provider,{scope:e.__scopeSlider,children:s.jsx(Km.Slot,{scope:e.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:R(x.onPointerDown,()=>{l||(w.current=y)}),min:r,max:n,inverted:f,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const a=e.map(e=>Math.abs(e-t)),r=Math.min(...a);return a.indexOf(r)}(y,e);N(e,t)},onSlideMove:l?void 0:function(e){N(e,g.current)},onSlideEnd:l?void 0:function(){const e=w.current[g.current];y[g.current]!==e&&p(y)},onHomeKeyDown:()=>!l&&N(r,0,{commit:!0}),onEndKeyDown:()=>!l&&N(n,y.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){const a=Hm.includes(e.key)||e.shiftKey&&Bm.includes(e.key)?10:1,r=g.current;N(y[r]+i*a*t,r,{commit:!0})}}})})})})});tp.displayName=Wm;var[ap,rp]=Xm(Wm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sp=le.forwardRef((e,t)=>{const{min:a,max:r,dir:n,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[m,p]=le.useState(null),f=T(t,e=>p(e)),h=le.useRef(void 0),x=function(e){const t=le.useContext($m);return e||t||"ltr"}(n),v="ltr"===x,g=v&&!i||!v&&i;function b(e){const t=h.current||m.getBoundingClientRect(),s=xp([0,t.width],g?[a,r]:[r,a]);return h.current=t,s(e-t.left)}return s.jsx(ap,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:s.jsx(ip,{dir:x,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);null==o||o(t)},onSlideMove:e=>{const t=b(e.clientX);null==l||l(t)},onSlideEnd:()=>{h.current=void 0,null==c||c()},onStepKeyDown:e=>{const t=Gm[g?"from-left":"from-right"].includes(e.key);null==d||d({event:e,direction:t?-1:1})}})})}),np=le.forwardRef((e,t)=>{const{min:a,max:r,inverted:n,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=le.useRef(null),m=T(t,u),p=le.useRef(void 0),f=!n;function h(e){const t=p.current||u.current.getBoundingClientRect(),s=xp([0,t.height],f?[r,a]:[a,r]);return p.current=t,s(e-t.top)}return s.jsx(ap,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:s.jsx(ip,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=h(e.clientY);null==i||i(t)},onSlideMove:e=>{const t=h(e.clientY);null==o||o(t)},onSlideEnd:()=>{p.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=Gm[f?"from-bottom":"from-top"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})}),ip=le.forwardRef((e,t)=>{const{__scopeSlider:a,onSlideStart:r,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=ep(Wm,a);return s.jsx(f.span,{...d,ref:t,onKeyDown:R(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):Hm.concat(Bm).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:R(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():r(e)}),onPointerMove:R(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)}),onPointerUp:R(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),op="SliderTrack",lp=le.forwardRef((e,t)=>{const{__scopeSlider:a,...r}=e,n=ep(op,a);return s.jsx(f.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...r,ref:t})});lp.displayName=op;var cp="SliderRange",dp=le.forwardRef((e,t)=>{const{__scopeSlider:a,...r}=e,n=ep(cp,a),i=rp(cp,a),o=le.useRef(null),l=T(t,o),c=n.values.length,d=n.values.map(e=>hp(e,n.min,n.max)),u=c>1?Math.min(...d):0,m=100-Math.max(...d);return s.jsx(f.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:m+"%"}})});dp.displayName=cp;var up="SliderThumb",mp=le.forwardRef((e,t)=>{const a=Ym(e.__scopeSlider),[r,n]=le.useState(null),i=T(t,e=>n(e)),o=le.useMemo(()=>r?a().findIndex(e=>e.ref.current===r):-1,[a,r]);return s.jsx(pp,{...e,ref:i,index:o})}),pp=le.forwardRef((e,t)=>{const{__scopeSlider:a,index:r,name:n,...i}=e,o=ep(up,a),l=rp(up,a),[c,d]=le.useState(null),u=T(t,e=>d(e)),m=!c||(o.form||!!c.closest("form")),p=D(c),h=o.values[r],x=void 0===h?0:hp(h,o.min,o.max),v=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(r,o.values.length),g=null==p?void 0:p[l.size],b=g?function(e,t,a){const r=e/2,s=xp([0,50],[0,r]);return(r-s(t)*a)*a}(g,x,l.direction):0;return le.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${b}px)`},children:[s.jsx(Km.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(f.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:void 0===h?{display:"none"}:e.style,onFocus:R(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),m&&s.jsx(fp,{name:n??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},r)]})});mp.displayName=up;var fp=le.forwardRef(({__scopeSlider:e,value:t,...a},r)=>{const n=le.useRef(null),i=T(n,r),o=Ul(t);return le.useEffect(()=>{const e=n.current;if(!e)return;const a=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==t&&r){const a=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(a)}},[o,t]),s.jsx(f.input,{style:{display:"none"},...a,ref:i,defaultValue:t})});function hp(e,t,a){return qm(100/(a-t)*(e-t),[0,100])}function xp(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(a-e[0])}}fp.displayName="RadioBubbleInput";var vp=tp,gp=lp,bp=dp,yp=mp;const jp=ue.forwardRef(({className:e,...t},a)=>s.jsxs(vp,{ref:a,className:un("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(gp,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-slate-100 dark:bg-slate-800",children:s.jsx(bp,{className:"absolute h-full bg-slate-900 dark:bg-green-500"})}),s.jsx(yp,{className:"block h-5 w-5 rounded-full border-2 border-slate-900 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-green-500 dark:bg-slate-950 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300"}),s.jsx(yp,{className:"block h-5 w-5 rounded-full border-2 border-slate-900 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-green-500 dark:bg-slate-950 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300"})]}));jp.displayName=vp.displayName;const wp=({profile:e})=>{const t=_a(),a=(e=>{if(!e)return"";const t=new Date,a=new Date(e);let r=t.getFullYear()-a.getFullYear();const s=t.getMonth()-a.getMonth();return(s<0||0===s&&t.getDate()<a.getDate())&&r--,r})(e.birth_date);return s.jsxs(be.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"relative aspect-[3/4] rounded-xl overflow-hidden cursor-pointer group card-glass",onClick:()=>{t(`/profile/${e.id}`)},children:[s.jsx("img",{alt:e.alias||"Profile picture",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",src:e.profile_picture_url||`https://source.unsplash.com/random/400x600?portrait&sig=${e.id}`}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),e.is_vip&&s.jsxs("div",{className:"absolute top-3 right-3 bg-yellow-400/20 backdrop-blur-sm text-yellow-300 px-2 py-1 rounded-full flex items-center gap-1 text-xs font-bold",children:[s.jsx(At,{className:"w-3 h-3"}),s.jsx("span",{children:"VIP"})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[s.jsxs("h3",{className:"text-xl font-bold truncate",children:[e.alias,a&&`, ${a}`]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-300 mt-1",children:[s.jsx(gt,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:e.municipio||"Ubicación desconocida"})]})]})]})},Np=()=>{const{toast:e}=br(),{user:t,profile:a}=wr(),[r,n]=le.useState({keyword:"",gender:"Todos",sexualOrientation:"Todas",relationshipStatus:"Todos",ageRange:[18,70],distance:500,intentions:[]}),[i,o]=le.useState([]),[l,c]=le.useState(!1),[d,u]=le.useState(!1),[m,p]=le.useState(null),[f,h]=le.useState(0),[x,v]=le.useState(!0),g=le.useCallback((e,t)=>{n(a=>({...a,[e]:t}))},[]),b=le.useCallback(e=>{n(t=>{const a=t.intentions.includes(e)?t.intentions.filter(t=>t!==e):[...t.intentions,e];return{...t,intentions:a}})},[]),y=le.useCallback(async(s=!1)=>{if(t){s||(c(!0),u(!0),o([]),h(0)),p(null);try{!((null==a?void 0:a.latitud)&&(null==a?void 0:a.longitud))&&r.distance<500&&e({title:"Ubicación no disponible",description:"Para una búsqueda por distancia más precisa, activa tu ubicación en Ajustes."});let n=lr.from("profiles").select("*").neq("id",t.id).order("created_at",{ascending:!1});"Todos"!==r.gender&&(n=n.eq("gender",r.gender)),"Todas"!==r.sexualOrientation&&(n=n.eq("sexual_orientation",r.sexualOrientation)),"Todos"!==r.relationshipStatus&&(n=n.eq("relationship_status",r.relationshipStatus)),r.keyword.trim()&&(n=n.or(`alias.ilike.%${r.keyword.trim()}%,bio.ilike.%${r.keyword.trim()}%`));const i=s?20*f:0,l=i+20-1;n=n.range(i,l);const{data:c,error:d}=await n;if(d)throw d;let u=c||[];r.intentions.length>0&&(u=u.filter(e=>e.preferences&&r.intentions.some(t=>e.preferences.includes(t)))),18===r.ageRange[0]&&70===r.ageRange[1]||(u=u.filter(e=>{if(!e.birth_date)return!0;const t=(new Date).getFullYear()-new Date(e.birth_date).getFullYear();return t>=r.ageRange[0]&&t<=r.ageRange[1]})),o(s?e=>[...e,...u]:u),v(20===u.length)}catch(n){p(n.message),e({variant:"destructive",title:"Error en la búsqueda",description:"No se pudieron obtener los resultados. Intenta de nuevo."})}finally{c(!1)}}else e({variant:"destructive",title:"Error",description:"Debes iniciar sesión para buscar."})},[t,a,r,f,e]),j=le.useCallback(()=>{!l&&x&&(h(e=>e+1),y(!0))},[l,x,y]),w=le.useMemo(()=>i,[i]),N="bg-surface text-text-primary border-border-color";return s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Buscador Avanzado - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Encuentra perfiles con filtros avanzados en AGARCH-AR."})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsxs(be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:w-1/3 xl:w-1/4 card-glass p-6 rounded-lg self-start",children:[s.jsxs("h1",{className:"text-2xl font-bold mb-1 flex items-center gap-2",children:[s.jsx(Ie,{className:"text-primary"}),"Buscador Avanzado"]}),s.jsx("p",{className:"text-text-secondary mb-6",children:"Usa los filtros para encontrar exactamente lo que buscas."}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"keyword",className:"text-primary font-semibold",children:"Palabra clave"}),s.jsx(Oi,{id:"keyword",placeholder:"Alias, interés, en la bio...",className:"input-glass mt-2",value:r.keyword,onChange:e=>g("keyword",e.target.value)})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"gender",className:"text-primary font-semibold",children:"Busco"}),s.jsxs(Sl,{value:r.gender,onValueChange:e=>g("gender",e),children:[s.jsx(Al,{id:"gender",className:"input-glass mt-2",children:s.jsx(El,{placeholder:"Seleccionar género"})}),s.jsxs(Tl,{className:N,children:[s.jsx(Rl,{value:"Todos",children:"Todos"}),s.jsx(Rl,{value:"Hombre",children:"Hombres"}),s.jsx(Rl,{value:"Mujer",children:"Mujeres"}),s.jsx(Rl,{value:"No binario",children:"No binarios"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"sexualOrientation",className:"text-primary font-semibold",children:"Orientación Sexual"}),s.jsxs(Sl,{value:r.sexualOrientation,onValueChange:e=>g("sexualOrientation",e),children:[s.jsx(Al,{id:"sexualOrientation",className:"input-glass mt-2",children:s.jsx(El,{placeholder:"Seleccionar orientación"})}),s.jsxs(Tl,{className:N,children:[s.jsx(Rl,{value:"Todas",children:"Todas"}),s.jsx(Rl,{value:"Heterosexual",children:"Heterosexual"}),s.jsx(Rl,{value:"Homosexual",children:"Homosexual"}),s.jsx(Rl,{value:"Bisexual",children:"Bisexual"}),s.jsx(Rl,{value:"Pansexual",children:"Pansexual"}),s.jsx(Rl,{value:"Asexual",children:"Asexual"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"relationshipStatus",className:"text-primary font-semibold",children:"Estado Civil"}),s.jsxs(Sl,{value:r.relationshipStatus,onValueChange:e=>g("relationshipStatus",e),children:[s.jsx(Al,{id:"relationshipStatus",className:"input-glass mt-2",children:s.jsx(El,{placeholder:"Seleccionar estado"})}),s.jsxs(Tl,{className:N,children:[s.jsx(Rl,{value:"Todos",children:"Todos"}),s.jsx(Rl,{value:"Soltero",children:"Soltero/a"}),s.jsx(Rl,{value:"En relación",children:"En relación"}),s.jsx(Rl,{value:"Casado",children:"Casado/a"}),s.jsx(Rl,{value:"Divorciado",children:"Divorciado/a"}),s.jsx(Rl,{value:"Viudo",children:"Viudo/a"})]})]})]}),s.jsxs("div",{children:[s.jsxs(Vi,{className:"text-primary font-semibold",children:["Rango de edad: ",r.ageRange[0]," - ",r.ageRange[1]," años"]}),s.jsx(jp,{defaultValue:r.ageRange,min:18,max:99,step:1,onValueChange:e=>g("ageRange",e),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsxs(Vi,{className:"text-primary font-semibold",children:["Distancia: hasta ",r.distance," km"]}),s.jsx(jp,{defaultValue:[r.distance],min:1,max:500,step:1,onValueChange:([e])=>g("distance",e),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Vi,{className:"text-primary font-semibold",children:"Intenciones"}),s.jsx("div",{className:"space-y-2 mt-2",children:[{id:"casual",label:"De Trampa / Casual"},{id:"sexo",label:"Solo encuentros para sexo"},{id:"chat",label:"Solo chats"},{id:"relacion",label:"Relación seria"}].map(e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sc,{id:e.id,checked:r.intentions.includes(e.id),onCheckedChange:()=>b(e.id)}),s.jsx("label",{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.label})]},e.id))})]}),s.jsxs(pn,{onClick:()=>y(),className:"w-full btn-action",disabled:l,children:[l?s.jsx(Ge,{className:"animate-spin mr-2"}):s.jsx(Ie,{className:"mr-2"}),l?"Buscando...":"Buscar perfiles"]})]})]}),s.jsxs("div",{className:"flex-1",children:[l&&!d&&s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"loading-spinner"})}),m&&s.jsxs("div",{className:"text-center py-16 card-glass rounded-lg flex flex-col items-center",children:[s.jsx(nt,{className:"w-16 h-16 text-primary mb-4"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Error en la búsqueda"}),s.jsx("p",{className:"text-text-secondary mt-2 mb-4",children:m}),s.jsxs(pn,{onClick:()=>y(),className:"btn-action",children:[s.jsx(st,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]}),!l&&d&&0===w.length&&!m&&s.jsxs("div",{className:"text-center py-16 card-glass rounded-lg flex flex-col items-center",children:[s.jsx(nt,{className:"w-16 h-16 text-primary mb-4"}),s.jsx("h2",{className:"text-xl font-semibold",children:"No se encontraron perfiles"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Intenta ajustar tus filtros de búsqueda para obtener más resultados."})]}),!l&&w.length>0&&s.jsxs(be.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:w.map(e=>s.jsx(wp,{profile:e},e.id))}),x&&s.jsx("div",{className:"text-center py-4",children:s.jsx(pn,{onClick:j,disabled:l,variant:"outline",className:"btn-outline-action",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"w-4 h-4 mr-2 animate-spin"}),"Cargando..."]}):"Cargar más"})})]}),!l&&!d&&!m&&s.jsxs("div",{className:"text-center py-16 card-glass rounded-lg flex flex-col items-center",children:[s.jsx(Ie,{className:"w-16 h-16 text-primary mb-4"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Comienza tu búsqueda"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Utiliza los filtros para encontrar a alguien especial."})]})]})]})]})},Cp=()=>{const{user:e,profile:t,refreshProfile:a}=wr(),{toast:r}=br(),n=_a(),[i,o]=le.useState({alias:"",birth_date:"",gender:"",bio:"",sexual_orientation:"",relationship_status:"",interests:[]}),[l,c]=le.useState(!1);le.useEffect(()=>{t&&o({alias:t.alias||"",birth_date:t.birth_date||"",gender:t.gender||"",bio:t.bio||"",sexual_orientation:t.sexual_orientation||"",relationship_status:t.relationship_status||"",interests:t.interests||[]})},[t]),le.useEffect(()=>{(null==t?void 0:t.alias)&&n("/discover",{replace:!0})},[t,n]);const d=e=>{o({...i,[e.target.id]:e.target.value})};return s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Completa tu Perfil - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Un último paso. Completa tu perfil para empezar a conectar en AGARCH-AR."})]}),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg mx-auto card-glass p-8 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Casi listo..."}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Completa estos últimos datos para empezar a usar la app."})]}),s.jsxs("form",{onSubmit:async t=>{t.preventDefault(),c(!0);const{error:s}=await lr.from("profiles").update({...i,updated_at:(new Date).toISOString()}).eq("id",e.id);s?r({variant:"destructive",title:"Error",description:"No se pudo actualizar tu perfil. "+s.message}):(r({title:"¡Perfil completado!",description:"¡Todo listo para empezar a conectar!"}),await a(),n("/discover")),c(!1)},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"alias",className:"text-primary",children:"Alias"}),s.jsx(Oi,{id:"alias",value:i.alias,onChange:d,required:!0,className:"input-glass"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"birth_date",className:"text-primary",children:"Fecha de Nacimiento"}),s.jsx(Oi,{id:"birth_date",type:"date",value:i.birth_date,onChange:d,required:!0,className:"input-glass"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"gender",className:"text-primary",children:"Género"}),s.jsxs(Sl,{onValueChange:e=>((e,t)=>{o({...i,[e]:t})})("gender",e),value:i.gender,children:[s.jsx(Al,{id:"gender",className:"input-glass",children:s.jsx(El,{placeholder:"Selecciona tu género"})}),s.jsxs(Tl,{className:"bg-surface text-text-primary border-border-color",children:[s.jsx(Rl,{value:"Hombre",children:"Hombre"}),s.jsx(Rl,{value:"Mujer",children:"Mujer"}),s.jsx(Rl,{value:"No binario",children:"No binario"})]})]})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"bio",className:"text-primary",children:"Biografía"}),s.jsx(Mi,{id:"bio",value:i.bio,onChange:d,placeholder:"Cuéntanos un poco sobre ti...",className:"input-glass"})]}),s.jsx(pn,{type:"submit",disabled:l,className:"w-full btn-action",children:l?s.jsx(Ge,{className:"animate-spin"}):"Guardar y Continuar"})]})]})})]})},Sp=()=>{const{profile:e,loading:t}=wr();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"loading-spinner"})}):(null==e?void 0:e.alias)?s.jsx(Ac,{children:s.jsxs(Ba,{children:[s.jsx($a,{path:"/",element:s.jsx(Ua,{to:"/discover",replace:!0})}),s.jsx($a,{path:"/discover",element:s.jsx(Nd,{})}),s.jsx($a,{path:"/search",element:s.jsx(Np,{})}),s.jsx($a,{path:"/profile/:id",element:s.jsx(Ld,{})}),s.jsx($a,{path:"/profile",element:s.jsx(Ld,{})}),s.jsx($a,{path:"/chat",element:s.jsx(Bd,{})}),s.jsx($a,{path:"/chat/:matchId",element:s.jsx(Bd,{})}),s.jsx($a,{path:"/settings",element:s.jsx(Pu,{})}),s.jsx($a,{path:"/create-post",element:s.jsx(zm,{})}),s.jsx($a,{path:"/payments",element:s.jsx(Um,{})}),s.jsx($a,{path:"*",element:s.jsx(Ua,{to:"/discover",replace:!0})})]})}):s.jsx(Ua,{to:"/complete-profile",replace:!0})},Ep=()=>s.jsxs("div",{className:"min-h-screen bg-background text-text-primary flex flex-col items-center justify-center p-4 overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-5",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516528387618-afa90b13e000?q=80&w=1974&auto=format&fit=crop')"}}),s.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm"}),s.jsx(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"relative z-10 w-full max-w-md",children:s.jsx(qa,{})})]}),Ap=()=>{const[e,t]=le.useState(""),[a,r]=le.useState(!1),{toast:n}=br();return s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:"Recuperar Cuenta - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Recupera el acceso a tu cuenta de AGARCH-AR."})]}),s.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(kt,{className:"mx-auto h-12 w-12 text-primary"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-text-primary",children:"¿Olvidaste tu contraseña?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"No te preocupes. Ingresa tu email y te enviaremos un enlace para que la recuperes."})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),r(!0);const a=`${window.location.origin}/update-password`,{error:s}=await lr.auth.resetPasswordForEmail(e,{redirectTo:a});n(s?{variant:"destructive",title:"Error",description:s.message}:{title:"Correo enviado",description:"Revisa tu bandeja de entrada para restablecer tu contraseña.",className:"bg-primary text-background"}),r(!1)},children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"email",className:"sr-only",children:"Correo electrónico"}),s.jsx(Oi,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input-glass",placeholder:"Correo electrónico",value:e,onChange:e=>t(e.target.value)})]}),s.jsx("div",{children:s.jsx(pn,{type:"submit",className:"w-full btn-action",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Enviando..."]}):"Enviar enlace de recuperación"})})]}),s.jsx("div",{className:"text-sm text-center",children:s.jsxs(ar,{to:"/login",className:"font-medium text-primary hover:text-green-400 flex items-center justify-center gap-2",children:[s.jsx(xt,{className:"w-4 h-4"}),"Volver a Iniciar Sesión"]})})]})]})},kp=()=>{const[e,t]=le.useState(""),[a,r]=le.useState(""),[n,i]=le.useState(!1),[o,l]=le.useState(!1),[c,d]=le.useState(!1),u=_a(),{toast:m}=br();le.useEffect(()=>{const{data:{subscription:e}}=lr.auth.onAuthStateChange((e,t)=>{});return()=>{e.unsubscribe()}},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:"Actualizar Contraseña - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Actualiza tu contraseña de AGARCH-AR."})]}),s.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(_t,{className:"mx-auto h-12 w-12 text-primary"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-text-primary",children:"Crea tu nueva contraseña"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Elige una contraseña segura que no hayas usado antes."})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),e!==a)return void m({variant:"destructive",title:"Error",description:"Las contraseñas no coinciden."});if(e.length<6)return void m({variant:"destructive",title:"Error",description:"La contraseña debe tener al menos 6 caracteres."});i(!0);const{error:r}=await lr.auth.updateUser({password:e});r?m({variant:"destructive",title:"Error al actualizar",description:r.message}):(m({title:"Contraseña actualizada",description:"Tu contraseña ha sido cambiada con éxito. Ya puedes iniciar sesión.",className:"bg-primary text-background"}),u("/login")),i(!1)},children:[s.jsxs("div",{className:"relative",children:[s.jsx(Vi,{htmlFor:"password",children:"Nueva Contraseña"}),s.jsx(Oi,{id:"password",name:"password",type:o?"text":"password",required:!0,className:"input-glass",placeholder:"••••••••",value:e,onChange:e=>t(e.target.value)}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-9 text-text-secondary",children:o?s.jsx(ke,{size:20}):s.jsx(_e,{size:20})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Vi,{htmlFor:"confirm-password",children:"Confirmar Nueva Contraseña"}),s.jsx(Oi,{id:"confirm-password",name:"confirm-password",type:c?"text":"password",required:!0,className:"input-glass",placeholder:"••••••••",value:a,onChange:e=>r(e.target.value)}),s.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-9 text-text-secondary",children:c?s.jsx(ke,{size:20}):s.jsx(_e,{size:20})})]}),s.jsx("div",{children:s.jsx(pn,{type:"submit",className:"w-full btn-action",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Actualizando..."]}):"Actualizar Contraseña"})})]})]})]})},_p=()=>{const{user:e}=wr(),{toast:t}=br(),a=_a(),[r,n]=le.useState({email:(null==e?void 0:e.email)||"",reported_profile_alias:"",subject:"",message:""}),[i,o]=le.useState([]),[l,c]=le.useState(!1),d=e=>{const{id:t,value:a}=e.target;"message"===t&&a.length>200||n(e=>({...e,[t]:a}))};return s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:"Contacto y Denuncias - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Reporta un problema o contacta con el soporte de AGARCH-AR."})]}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto card-glass p-6 sm:p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-primary",children:"Denuncia o Reporta un Problema"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Tu seguridad es nuestra prioridad. Usa este formulario para reportar cualquier inconveniente."})]}),s.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),c(!0),!r.subject||!r.message)return t({variant:"destructive",title:"Campos incompletos",description:"Por favor, rellena el asunto y el mensaje."}),void c(!1);let n=[];if(i.length>0)for(const e of i){const a=e.name.split(".").pop(),r=`${`${fr()}.${a}`}`,{data:s,error:i}=await lr.storage.from("report_images").upload(r,e);if(i)return t({variant:"destructive",title:"Error al subir imagen",description:`No se pudo subir ${e.name}.`}),void c(!1);const{data:o}=lr.storage.from("report_images").getPublicUrl(r);n.push(o.publicUrl)}const{error:o}=await lr.from("reports").insert({user_id:null==e?void 0:e.id,email:r.email,reported_profile_alias:r.reported_profile_alias,subject:r.subject,message:r.message,image_urls:n});o?t({variant:"destructive",title:"Error al enviar",description:"No se pudo enviar tu mensaje. Inténtalo de nuevo."}):(t({title:"Mensaje Enviado",description:"Gracias por tu reporte. Lo revisaremos pronto.",className:"bg-primary text-background"}),a(e?"/settings":"/")),c(!1)},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"email",className:"text-primary",children:"Tu Email"}),s.jsx(Oi,{id:"email",type:"email",value:r.email,onChange:d,placeholder:"tu@email.com",required:!0,disabled:!!e,className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"reported_profile_alias",className:"text-primary",children:"Nombre o alias del perfil denunciado"}),s.jsx(Oi,{id:"reported_profile_alias",type:"text",value:r.reported_profile_alias,onChange:d,placeholder:"Ej: aliasdelperfil",className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"subject",className:"text-primary",children:"Asunto"}),s.jsx(Oi,{id:"subject",type:"text",value:r.subject,onChange:d,placeholder:"Ej: Reporte de perfil inapropiado",required:!0,className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"message",className:"text-primary",children:"Mensaje"}),s.jsx(Mi,{id:"message",value:r.message,onChange:d,placeholder:"Describe el problema en detalle. Incluye nombres de usuario o cualquier dato relevante.",required:!0,className:"input-glass mt-1",rows:6,maxLength:200}),s.jsxs("p",{className:"text-xs text-text-secondary text-right mt-1",children:[r.message.length,"/",200]})]}),s.jsxs("div",{children:[s.jsx(Vi,{className:"text-primary",children:"Adjuntar capturas (máx. 2)"}),s.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-border-color px-6 py-10 input-glass",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Tt,{className:"mx-auto h-12 w-12 text-text-secondary","aria-hidden":"true"}),s.jsxs("div",{className:"mt-4 flex text-sm leading-6 text-text-secondary",children:[s.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-semibold text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 hover:text-primary/80",children:[s.jsx("span",{children:"Sube tus archivos"}),s.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const a=Array.from(e.target.files);if(i.length+a.length>2)return void t({variant:"destructive",title:"Límite de archivos excedido",description:"Puedes subir un máximo de 2 imágenes."});o(e=>[...e,...a])}},disabled:i.length>=2})]}),s.jsx("p",{className:"pl-1",children:"o arrástralos aquí"})]}),s.jsx("p",{className:"text-xs leading-5 text-text-secondary",children:"PNG, JPG, GIF hasta 10MB"})]})}),i.length>0&&s.jsx("div",{className:"mt-4 space-y-2",children:i.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-surface/50",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rt,{className:"h-5 w-5 text-text-secondary"}),s.jsx("span",{className:"text-sm text-text-primary truncate",children:e.name})]}),s.jsx(pn,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{o(t=>t.filter((t,a)=>a!==e))})(t),className:"text-text-secondary hover:text-destructive",children:s.jsx(pe,{className:"h-4 w-4"})})]},t))})]}),s.jsx(pn,{type:"submit",disabled:l,className:"w-full btn-action",children:l?"Enviando...":"Enviar Reporte"})]})]})]})};const Tp=()=>s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Registro Publicitario - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Crea tu cuenta de anunciante para publicitar en AGARCH-AR."})]}),s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Registro Publicitario"}),s.jsx("p",{className:"text-text-secondary mb-8",children:"Esta sección está en construcción. Aquí podrás crear tu cuenta para mostrar anuncios a nuestra comunidad."}),s.jsxs("div",{className:"card-glass p-8 rounded-lg",children:[s.jsx("p",{className:"text-lg font-semibold",children:"🚧 ¡Próximamente! 🚧"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Estamos trabajando para traerte la mejor plataforma de anuncios."})]}),s.jsx(pn,{asChild:!0,variant:"outline",className:"mt-8 group",children:s.jsxs(ar,{to:"/landing",children:[s.jsx(xt,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Volver al Inicio"]})})]})})]}),Rp=()=>s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Login de Anunciante - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Inicia sesión en tu cuenta de anunciante de AGARCH-AR."})]}),s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Portal de Anunciantes"}),s.jsx("p",{className:"text-text-secondary mb-8",children:"Esta sección está en construcción. Aquí podrás iniciar sesión para gestionar tus campañas publicitarias."}),s.jsxs("div",{className:"card-glass p-8 rounded-lg",children:[s.jsx("p",{className:"text-lg font-semibold",children:"🚧 ¡Próximamente! 🚧"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"El portal para anunciantes estará disponible muy pronto."})]}),s.jsx(pn,{asChild:!0,variant:"outline",className:"mt-8 group",children:s.jsxs(ar,{to:"/landing",children:[s.jsx(xt,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Volver al Inicio"]})})]})})]}),Pp=()=>s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Términos, Condiciones y Seguridad - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Conoce las reglas de nuestra comunidad y cómo protegemos tu seguridad."})]}),s.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:s.jsxs("div",{className:"w-full max-w-2xl text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Términos, Condiciones y Seguridad"}),s.jsx("p",{className:"text-text-secondary mb-8",children:"Esta sección está en construcción. Aquí encontrarás toda la información sobre las reglas de la comunidad y nuestras políticas de seguridad."}),s.jsxs("div",{className:"card-glass p-8 rounded-lg text-left",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Puntos Clave (Próximamente)"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[s.jsx("li",{children:"Política de Uso Aceptable"}),s.jsx("li",{children:"Proceso de Verificación de Perfil"}),s.jsx("li",{children:"Normas de la Comunidad"}),s.jsx("li",{children:"Política de Privacidad y Manejo de Datos"}),s.jsx("li",{children:"Procedimientos de Reporte y Moderación"})]})]}),s.jsx(pn,{asChild:!0,variant:"outline",className:"mt-8 group",children:s.jsxs(ar,{to:"/landing",children:[s.jsx(xt,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Volver al Inicio"]})})]})})]}),Dp=[{icon:Pt,text:"Dashboard",path:"/admin"},{icon:we,text:"Usuarios",path:"/admin/users"},{icon:Dt,text:"Publicidad",path:"/admin/ads"}],Op=()=>{const{logout:e}=wr(),t=_a(),a={backgroundColor:"rgba(var(--primary), 0.2)",color:"rgb(var(--primary))",boxShadow:"inset 3px 0 0 0 rgb(var(--primary))"};return s.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-surface p-4 shrink-0",children:[s.jsx("div",{className:"text-2xl font-bold text-center py-4 text-brand-red uppercase",children:"ADMIN"}),s.jsx("nav",{className:"flex flex-col space-y-2 mt-8 flex-1",children:Dp.map(e=>s.jsxs(rr,{to:e.path,end:"/admin"===e.path,style:({isActive:e})=>e?a:{},className:"flex items-center px-4 py-3 text-text-secondary rounded-lg hover:bg-border-color hover:text-text-primary transition-colors",children:[s.jsx(e.icon,{className:"w-5 h-5 mr-4"}),s.jsx("span",{className:"font-medium",children:e.text})]},e.text))}),s.jsx("div",{className:"mt-auto",children:s.jsxs(pn,{onClick:async()=>{await e(),t("/landing")},variant:"ghost",className:"w-full justify-start text-text-secondary hover:text-destructive",children:[s.jsx(De,{className:"w-5 h-5 mr-4"}),"Cerrar Sesión"]})})]})},Mp=({children:e})=>s.jsxs("div",{className:"flex min-h-screen bg-background text-text-primary",children:[s.jsx(Op,{}),s.jsx("div",{className:"flex-1 flex flex-col",children:s.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:e})})]}),Fp=({title:e,value:t,icon:a,loading:r})=>s.jsxs("div",{className:"card-glass p-6 rounded-lg flex items-center space-x-4",children:[s.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:a}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-text-secondary",children:e}),r?s.jsx("div",{className:"h-10 w-20 bg-gray-700/50 animate-pulse rounded-md mt-1"}):s.jsx("p",{className:"text-4xl font-bold mt-1 text-primary",children:t})]})]}),Ip=()=>{const[e,t]=le.useState(null),[a,r]=le.useState(!0),{toast:n}=br();return le.useEffect(()=>{(async()=>{r(!0);const{data:e,error:a}=await lr.from("admin_dashboard_stats").select("*").single();a?n({variant:"destructive",title:"Error al cargar estadísticas",description:"No se pudieron obtener los datos del dashboard."}):t(e),r(!1)})()},[n]),s.jsxs(s.Fragment,{children:[s.jsxs(bs,{children:[s.jsx("title",{children:"Admin Dashboard - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Panel de administración para gestionar usuarios, anuncios y ver estadísticas."})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-primary mb-4",children:"Dashboard de Administración"}),s.jsx("p",{className:"text-text-secondary",children:"Bienvenido al centro de control de la aplicación."}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Fp,{title:"Usuarios Totales",value:(null==e?void 0:e.total_profiles)??"--",icon:s.jsx(we,{className:"w-8 h-8 text-primary"}),loading:a}),s.jsx(Fp,{title:"Usuarios VIP",value:(null==e?void 0:e.vip_profiles)??"--",icon:s.jsx(je,{className:"w-8 h-8 text-primary"}),loading:a}),s.jsx(Fp,{title:"Anuncios Activos",value:(null==e?void 0:e.active_ads)??"--",icon:s.jsx(Dt,{className:"w-8 h-8 text-primary"}),loading:a})]}),s.jsxs("div",{className:"mt-8 card-glass p-6 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Acciones Rápidas"}),s.jsx("p",{className:"text-text-secondary",children:"🚧 ¡Más funcionalidades y gráficos próximamente! 🚧"})]})]})]})},Lp=()=>{const[e,t]=le.useState([]),[a,r]=le.useState(!0),[n,i]=le.useState(null),[o,l]=le.useState(""),[c,d]=le.useState(0),[u,m]=le.useState(0),{toast:p}=br();le.useEffect(()=>{f()},[c,o]);const f=async()=>{r(!0);let e=lr.from("profiles").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(10*c,10*(c+1)-1);o&&(e=e.or(`email.ilike.%${o}%,alias.ilike.%${o}%,nombre_completo.ilike.%${o}%`));const{data:a,error:s,count:n}=await e;s?p({variant:"destructive",title:"Error",description:"No se pudieron cargar los usuarios."}):(t(a),m(n)),r(!1)},h=()=>{i(null)},x=async()=>{const{id:e,...t}=n,{error:a}=await lr.from("profiles").update(t).eq("id",e);a?p({variant:"destructive",title:"Error",description:"No se pudo actualizar el usuario."}):(p({title:"Éxito",description:"Usuario actualizado correctamente."}),i(null),f())},v=(e,t)=>{i({...n,[t]:e.target.value})};return s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Gestión de Usuarios"}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),d(0),f()},className:"flex gap-2 mb-4",children:[s.jsx(Oi,{placeholder:"Buscar por email, alias o nombre...",value:o,onChange:e=>l(e.target.value)}),s.jsxs(pn,{type:"submit",children:[s.jsx(Ie,{className:"h-4 w-4 mr-2"})," Buscar"]})]}),s.jsxs("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[s.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Alias"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nombre Completo"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Rol"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Verificado"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"VIP"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Acciones"})]})}),s.jsx("tbody",{children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"text-center p-4",children:"Cargando..."})}):e.map(e=>s.jsx("tr",{className:"bg-white border-b hover:bg-gray-50",children:(null==n?void 0:n.id)===e.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{value:n.alias,onChange:e=>v(e,"alias")})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{value:n.email,onChange:e=>v(e,"email")})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{value:n.nombre_completo,onChange:e=>v(e,"nombre_completo")})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{value:n.role,onChange:e=>v(e,"role")})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{type:"checkbox",checked:n.is_verified,onChange:e=>i({...n,is_verified:e.target.checked})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Oi,{type:"checkbox",checked:n.is_vip,onChange:e=>i({...n,is_vip:e.target.checked})})}),s.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[s.jsx(pn,{size:"sm",onClick:x,children:s.jsx(ot,{className:"h-4 w-4"})}),s.jsx(pn,{size:"sm",variant:"outline",onClick:h,children:s.jsx(pe,{className:"h-4 w-4"})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:e.alias}),s.jsx("td",{className:"px-6 py-4",children:e.email}),s.jsx("td",{className:"px-6 py-4",children:e.nombre_completo}),s.jsx("td",{className:"px-6 py-4",children:e.role}),s.jsx("td",{className:"px-6 py-4",children:e.is_verified?"Sí":"No"}),s.jsx("td",{className:"px-6 py-4",children:e.is_vip?"Sí":"No"}),s.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[s.jsx(pn,{size:"sm",variant:"outline",onClick:()=>(e=>{i({...e})})(e),children:s.jsx(it,{className:"h-4 w-4"})}),s.jsx(pn,{size:"sm",variant:"destructive",onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar a este usuario de forma permanente? Esta acción no se puede deshacer.")){const{error:t}=await lr.rpc("delete_user_by_id_admin",{user_id_to_delete:e});t?p({variant:"destructive",title:"Error",description:`No se pudo eliminar el usuario: ${t.message}`}):(p({title:"Éxito",description:"Usuario eliminado correctamente."}),f())}})(e.id),children:s.jsx(tt,{className:"h-4 w-4"})})]})]})},e.id))})]})}),s.jsxs("div",{className:"flex justify-between items-center p-4",children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["Mostrando ",10*c+1," a ",Math.min(10*(c+1),u)," de ",u," usuarios"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(pn,{onClick:()=>d(e=>Math.max(0,e-1)),disabled:0===c,children:[s.jsx(at,{className:"h-4 w-4"})," Anterior"]}),s.jsxs(pn,{onClick:()=>d(e=>e+1),disabled:10*(c+1)>=u,children:["Siguiente ",s.jsx(Ve,{className:"h-4 w-4"})]})]})]})]})]})},Vp=()=>s.jsxs(s.Fragment,{children:[s.jsx(bs,{children:s.jsx("title",{children:"Gestión de Publicidad - Admin"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-primary mb-4",children:"Gestión de Publicidad"}),s.jsx("p",{className:"text-text-secondary",children:"Sube, activa o desactiva los banners publicitarios de la plataforma."}),s.jsxs("div",{className:"mt-8 card-glass p-6 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Funcionalidad en Desarrollo"}),s.jsx("p",{className:"text-text-secondary",children:"🚧 ¡Próximamente podrás gestionar los anuncios y banners desde esta sección! 🚧"})]})]})]}),zp=({children:e})=>{const{profile:t,loading:a,user:r}=wr();return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"loading-spinner"})}):r&&"admin"===(null==t?void 0:t.role)?e:s.jsx(Ua,{to:"/",replace:!0})},Up=()=>{const{toast:e}=br(),t=_a(),[a,r]=le.useState({name:"",email:"",company:"",message:""}),[n,i]=le.useState(!1),o=e=>{const{id:t,value:a}=e.target;"message"===t&&a.length>500||r(e=>({...e,[t]:a}))};return s.jsxs(s.Fragment,{children:[s.jsxs(gl,{children:[s.jsx("title",{children:"Publicidad - AGARCH-AR"}),s.jsx("meta",{name:"description",content:"Contacta con AGARCH-AR para oportunidades de publicidad."})]}),s.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto card-glass p-6 sm:p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-primary",children:"Publicita con Nosotros"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"¿Interesado en llegar a nuestra comunidad? Completa el formulario y nos pondremos en contacto."})]}),s.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),i(!0),!a.name||!a.email||!a.message)return e({variant:"destructive",title:"Campos incompletos",description:"Por favor, rellena todos los campos obligatorios."}),void i(!1);const{error:n}=await lr.from("emails").insert({user_id:null,recipient:"advertising@agarch-ar.com",subject:`Consulta de Publicidad de ${a.name} (${a.company||"N/A"})`,content:`Nombre: ${a.name}\nEmail: ${a.email}\nEmpresa: ${a.company||"N/A"}\nMensaje:\n${a.message}`,status:"pending"});n?e({variant:"destructive",title:"Error al enviar",description:"No se pudo enviar tu mensaje. Inténtalo de nuevo."}):(e({title:"Mensaje Enviado",description:"Gracias por tu interés en publicitar. Nos pondremos en contacto contigo pronto.",className:"bg-primary text-background"}),r({name:"",email:"",company:"",message:""}),t("/landing")),i(!1)},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"name",className:"text-primary",children:"Tu Nombre"}),s.jsx(Oi,{id:"name",type:"text",value:a.name,onChange:o,placeholder:"Tu Nombre Completo",required:!0,className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"email",className:"text-primary",children:"Tu Email"}),s.jsx(Oi,{id:"email",type:"email",value:a.email,onChange:o,placeholder:"tu@email.com",required:!0,className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"company",className:"text-primary",children:"Empresa (Opcional)"}),s.jsx(Oi,{id:"company",type:"text",value:a.company,onChange:o,placeholder:"Nombre de tu empresa",className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"message",className:"text-primary",children:"Mensaje"}),s.jsx(Mi,{id:"message",value:a.message,onChange:o,placeholder:"Describe tu propuesta o consulta de publicidad.",required:!0,className:"input-glass mt-1",rows:6,maxLength:500}),s.jsxs("p",{className:"text-xs text-text-secondary text-right mt-1",children:[a.message.length,"/",500]})]}),s.jsx(pn,{type:"submit",disabled:n,className:"w-full btn-action",children:n?"Enviando...":"Enviar Consulta"})]})]})]})},qp=()=>{const[e,t]=le.useState(""),[a,r]=le.useState(""),[n,i]=le.useState(!1),{signIn:o,profile:l}=wr(),c=_a();Aa();const{toast:d}=br();return ue.useEffect(()=>{l&&("admin"===l.role?(d({title:"¡Bienvenido, Admin!",description:"Has iniciado sesión correctamente.",className:"bg-primary text-background"}),c("/admin")):d({variant:"destructive",title:"Acceso Denegado",description:"No tienes permisos para acceder a esta sección."}),i(!1))},[l,c,d]),s.jsxs(s.Fragment,{children:[s.jsx(bs,{children:s.jsx("title",{children:"Login de Administrador - AGARCH-AR"})}),s.jsx(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:s.jsxs("div",{className:"w-full max-w-md card-glass p-8 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Acceso de Administrador"}),s.jsx("p",{className:"text-text-secondary mt-2",children:"Introduce tus credenciales para continuar"})]}),s.jsxs("form",{onSubmit:async t=>{t.preventDefault(),i(!0);const{data:r,error:s}=await o(e,a);if(s||!r.user)return d({variant:"destructive",title:"Error de acceso",description:"Credenciales incorrectas o no tienes permiso de administrador."}),void i(!1)},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"email",children:"Email"}),s.jsx(Oi,{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"admin@agarch-ar.com",required:!0,className:"input-glass mt-1"})]}),s.jsxs("div",{children:[s.jsx(Vi,{htmlFor:"password",children:"Contraseña"}),s.jsx(Oi,{id:"password",type:"password",value:a,onChange:e=>r(e.target.value),placeholder:"••••••••",required:!0,className:"input-glass mt-1"})]}),s.jsx(pn,{type:"submit",disabled:n,className:"w-full btn-action",children:n?"Ingresando...":"Ingresar al Panel"})]})]})})]})},$p=()=>{const{user:e,loading:t,profile:a}=wr(),r=Aa();(e=>{const{toast:t}=br();le.useEffect(()=>{const a=`location_updated_${null==e?void 0:e.id}`;if(!e||sessionStorage.getItem(a))return;const r=setTimeout(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async t=>{const{latitude:r,longitude:s}=t.coords;if("number"!=typeof r||"number"!=typeof s)return;const{error:n}=await lr.from("profiles").update({latitud:r,longitud:s,updated_at:new Date}).eq("id",e.id);n||sessionStorage.setItem(a,"true")},e=>{1===e.code&&t({variant:"destructive",title:"Permiso de ubicación denegado",description:"Para encontrar perfiles cercanos, por favor, habilita la ubicación en los ajustes de tu navegador."})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5})},2e3);return()=>clearTimeout(r)},[e,t])})(e);const{toast:n}=br();if(le.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{n({title:"¡Aplicación actualizada!",description:"La aplicación se ha actualizado a la última versión. Los cambios se aplicarán al recargar."})}),function(){try{if("undefined"==typeof window)return;if(!("Notification"in window))return;if("default"!==Notification.permission)return;setTimeout(()=>{Notification.requestPermission().catch(()=>{})},1e3)}catch(e){}}()},[n]),t)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"loading-spinner"})});const i=()=>e?(null==a?void 0:a.alias)?s.jsx(Sp,{}):s.jsx(Ua,{to:"/complete-profile",replace:!0}):s.jsx(Ua,{to:"/landing",state:{from:r},replace:!0});return s.jsxs(Ba,{children:[s.jsxs($a,{element:s.jsx(Ep,{}),children:[s.jsx($a,{path:"/landing",element:e?s.jsx(Ua,{to:"/"}):s.jsx(eo,{})}),s.jsx($a,{path:"/login",element:e?s.jsx(Ua,{to:"/"}):s.jsx(to,{})}),s.jsx($a,{path:"/register",element:e?s.jsx(Ua,{to:"/"}):s.jsx(ic,{})}),s.jsx($a,{path:"/recover-password",element:e?s.jsx(Ua,{to:"/"}):s.jsx(Ap,{})}),s.jsx($a,{path:"/update-password",element:s.jsx(kp,{})}),s.jsx($a,{path:"/contact",element:s.jsx(_p,{})}),s.jsx($a,{path:"/advertising-contact",element:s.jsx(Up,{})}),s.jsx($a,{path:"/ad-register",element:s.jsx(Tp,{})}),s.jsx($a,{path:"/ad-login",element:s.jsx(Rp,{})}),s.jsx($a,{path:"/terms",element:s.jsx(Pp,{})}),s.jsx($a,{path:"/admin-login",element:s.jsx(qp,{})})]}),e&&!(null==a?void 0:a.alias)&&s.jsx($a,{path:"/complete-profile",element:s.jsx(Cp,{})}),s.jsx($a,{path:"/admin/*",element:s.jsx(zp,{children:s.jsx(Mp,{children:s.jsxs(Ba,{children:[s.jsx($a,{path:"/",element:s.jsx(Ip,{})}),s.jsx($a,{path:"users",element:s.jsx(Lp,{})}),s.jsx($a,{path:"ads",element:s.jsx(Vp,{})})]})})})}),s.jsx($a,{path:"/*",element:s.jsx(i,{})}),s.jsx($a,{path:"*",element:s.jsx(Ua,{to:e?"/":"/landing"})})]})};var Hp=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bp=le.forwardRef((e,t)=>s.jsx(f.span,{...e,ref:t,style:{...Hp,...e.style}}));Bp.displayName="VisuallyHidden";var Gp="ToastProvider",[Wp,Kp,Yp]=ee("Toast"),[Jp,Xp]=_("Toast",[Yp]),[Zp,Qp]=Jp(Gp),ef=e=>{const{__scopeToast:t,label:a="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:o}=e,[l,c]=le.useState(null),[d,u]=le.useState(0),m=le.useRef(!1),p=le.useRef(!1);return a.trim(),s.jsx(Wp.Provider,{scope:t,children:s.jsx(Zp,{scope:t,label:a,duration:r,swipeDirection:n,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:le.useCallback(()=>u(e=>e+1),[]),onToastRemove:le.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:o})})};ef.displayName=Gp;var tf="ToastViewport",af=["F8"],rf="toast.viewportPause",sf="toast.viewportResume",nf=le.forwardRef((e,t)=>{const{__scopeToast:a,hotkey:r=af,label:n="Notifications ({hotkey})",...i}=e,o=Qp(tf,a),l=Kp(a),c=le.useRef(null),d=le.useRef(null),u=le.useRef(null),m=le.useRef(null),p=T(t,m,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;le.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=m.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),le.useEffect(()=>{const e=c.current,t=m.current;if(x&&e&&t){const a=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(rf);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(sf);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&r()},n=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",a),e.addEventListener("focusout",s),e.addEventListener("pointermove",a),e.addEventListener("pointerleave",n),window.addEventListener("blur",a),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",a),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",a),e.removeEventListener("pointerleave",n),window.removeEventListener("blur",a),window.removeEventListener("focus",r)}}},[x,o.isClosePausedRef]);const v=le.useCallback(({tabbingDirection:e})=>{const t=l().map(t=>{const a=t.ref.current,r=[a,...Cf(a)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[l]);return le.useEffect(()=>{const e=m.current;if(e){const t=t=>{var a,r,s;const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(a=d.current)||a.focus());const o=v({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===n);Sf(o.slice(l+1))?t.preventDefault():i?null==(r=d.current)||r.focus():null==(s=u.current)||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,v]),s.jsxs(te,{ref:c,role:"region","aria-label":n.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(lf,{ref:d,onFocusFromOutsideViewport:()=>{Sf(v({tabbingDirection:"forwards"}))}}),s.jsx(Wp.Slot,{scope:a,children:s.jsx(f.ol,{tabIndex:-1,...i,ref:p})}),x&&s.jsx(lf,{ref:u,onFocusFromOutsideViewport:()=>{Sf(v({tabbingDirection:"backwards"}))}})]})});nf.displayName=tf;var of="ToastFocusProxy",lf=le.forwardRef((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:r,...n}=e,i=Qp(of,a);return s.jsx(Bp,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const a=e.relatedTarget;!(null==(t=i.viewport)?void 0:t.contains(a))&&r()}})});lf.displayName=of;var cf="Toast",df=le.forwardRef((e,t)=>{const{forceMount:a,open:r,defaultOpen:n,onOpenChange:i,...o}=e,[l,c]=O({prop:r,defaultProp:n??!0,onChange:i,caller:cf});return s.jsx(P,{present:a||l,children:s.jsx(pf,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ae(e.onPause),onResume:ae(e.onResume),onSwipeStart:R(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:R(e.onSwipeMove,e=>{const{x:t,y:a}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${a}px`)}),onSwipeCancel:R(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:R(e.onSwipeEnd,e=>{const{x:t,y:a}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${a}px`),c(!1)})})})});df.displayName=cf;var[uf,mf]=Jp(cf,{onClose(){}}),pf=le.forwardRef((e,t)=>{const{__scopeToast:a,type:r="foreground",duration:n,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:h,...x}=e,v=Qp(cf,a),[g,b]=le.useState(null),y=T(t,e=>b(e)),j=le.useRef(null),w=le.useRef(null),N=n||v.duration,C=le.useRef(0),S=le.useRef(N),E=le.useRef(0),{onToastAdd:A,onToastRemove:k}=v,_=ae(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=v.viewport)||e.focus()),o()}),P=le.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(E.current),C.current=(new Date).getTime(),E.current=window.setTimeout(_,e))},[_]);le.useEffect(()=>{const e=v.viewport;if(e){const t=()=>{P(S.current),null==d||d()},a=()=>{const e=(new Date).getTime()-C.current;S.current=S.current-e,window.clearTimeout(E.current),null==c||c()};return e.addEventListener(rf,a),e.addEventListener(sf,t),()=>{e.removeEventListener(rf,a),e.removeEventListener(sf,t)}}},[v.viewport,N,c,d,P]),le.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(N)},[i,N,v.isClosePausedRef,P]),le.useEffect(()=>(A(),()=>k()),[A,k]);const D=le.useMemo(()=>g?jf(g):null,[g]);return v.viewport?s.jsxs(s.Fragment,{children:[D&&s.jsx(ff,{__scopeToast:a,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:D}),s.jsx(uf,{scope:a,onClose:_,children:oe.createPortal(s.jsx(Wp.ItemSlot,{scope:a,children:s.jsx(re,{asChild:!0,onEscapeKeyDown:R(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||_(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(f.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:R(e.onKeyDown,e=>{"Escape"===e.key&&(null==l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:R(e.onPointerDown,e=>{0===e.button&&(j.current={x:e.clientX,y:e.clientY})}),onPointerMove:R(e.onPointerMove,e=>{if(!j.current)return;const t=e.clientX-j.current.x,a=e.clientY-j.current.y,r=Boolean(w.current),s=["left","right"].includes(v.swipeDirection),n=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,i=s?n(0,t):0,o=s?0:n(0,a),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};r?(w.current=c,wf("toast.swipeMove",m,d,{discrete:!1})):Nf(c,v.swipeDirection,l)?(w.current=c,wf("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(a)>l)&&(j.current=null)}),onPointerUp:R(e.onPointerUp,e=>{const t=w.current,a=e.target;if(a.hasPointerCapture(e.pointerId)&&a.releasePointerCapture(e.pointerId),w.current=null,j.current=null,t){const a=e.currentTarget,r={originalEvent:e,delta:t};Nf(t,v.swipeDirection,v.swipeThreshold)?wf("toast.swipeEnd",h,r,{discrete:!0}):wf("toast.swipeCancel",p,r,{discrete:!0}),a.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),ff=e=>{const{__scopeToast:t,children:a,...r}=e,n=Qp(cf,t),[i,o]=le.useState(!1),[l,c]=le.useState(!1);return function(e=()=>{}){const t=ae(e);ne(()=>{let e=0,a=0;return e=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(a)}},[t])}(()=>o(!0)),le.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:s.jsx(se,{asChild:!0,children:s.jsx(Bp,{...r,children:i&&s.jsxs(s.Fragment,{children:[n.label," ",a]})})})},hf=le.forwardRef((e,t)=>{const{__scopeToast:a,...r}=e;return s.jsx(f.div,{...r,ref:t})});hf.displayName="ToastTitle";var xf=le.forwardRef((e,t)=>{const{__scopeToast:a,...r}=e;return s.jsx(f.div,{...r,ref:t})});xf.displayName="ToastDescription";var vf=le.forwardRef((e,t)=>{const{altText:a,...r}=e;return a.trim()?s.jsx(yf,{altText:a,asChild:!0,children:s.jsx(bf,{...r,ref:t})}):null});vf.displayName="ToastAction";var gf="ToastClose",bf=le.forwardRef((e,t)=>{const{__scopeToast:a,...r}=e,n=mf(gf,a);return s.jsx(yf,{asChild:!0,children:s.jsx(f.button,{type:"button",...r,ref:t,onClick:R(e.onClick,n.onClose)})})});bf.displayName=gf;var yf=le.forwardRef((e,t)=>{const{__scopeToast:a,altText:r,...n}=e;return s.jsx(f.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:t})});function jf(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const a=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!a)if(r){const a=e.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...jf(e))}}),t}function wf(e,t,a,{discrete:r}){const s=a.originalEvent.currentTarget,n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&s.addEventListener(e,t,{once:!0}),r?ie(s,n):s.dispatchEvent(n)}var Nf=(e,t,a=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),n=r>s;return"left"===t||"right"===t?n&&r>a:!n&&s>a};function Cf(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function Sf(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Ef=nf,Af=df,kf=hf,_f=xf,Tf=vf,Rf=bf;const Pf=ef,Df=ue.forwardRef(({className:e,...t},a)=>s.jsx(Ef,{ref:a,className:un("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Df.displayName=Ef.displayName;const Of=Cs("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border-border-color text-text-primary",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Mf=ue.forwardRef(({className:e,variant:t,...a},r)=>s.jsx(Af,{ref:r,className:un(Of({variant:t}),e),...a}));Mf.displayName=Af.displayName;ue.forwardRef(({className:e,...t},a)=>s.jsx(Tf,{ref:a,className:un("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Tf.displayName;const Ff=ue.forwardRef(({className:e,...t},a)=>s.jsx(Rf,{ref:a,className:un("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(pe,{className:"h-4 w-4"})}));Ff.displayName=Rf.displayName;const If=ue.forwardRef(({className:e,...t},a)=>s.jsx(kf,{ref:a,className:un("text-sm font-semibold",e),...t}));If.displayName=kf.displayName;const Lf=ue.forwardRef(({className:e,...t},a)=>s.jsx(_f,{ref:a,className:un("text-sm opacity-90",e),...t}));function Vf(){const{toasts:e}=br();return s.jsxs(Pf,{children:[null==e?void 0:e.map(function({id:e,title:t,description:a,action:r,...n}){return s.jsxs(Mf,{...n,children:[s.jsxs("div",{className:"grid gap-1",children:[t&&s.jsx(If,{children:t}),a&&s.jsx(Lf,{children:a})]}),r,s.jsx(Ff,{})]},e)}),s.jsx(Df,{})]})}Lf.displayName=_f.displayName,Ft.createRoot(document.getElementById("root")).render(s.jsx(ue.StrictMode,{children:s.jsx(ms,{children:s.jsx(Qa,{children:s.jsx(gr,{children:s.jsxs(jr,{children:[s.jsx($p,{}),s.jsx(Vf,{})]})})})})}));
