import{c as e,b as t,e as n,f as r,g as a,h as o,j as s,R as i,A as c,P as l,i as d,k as u,l as p,m,n as f,o as h,p as x,q as v,r as g,s as w,F as b,D as y,t as j,C as _,v as N,w as M,x as C,y as D,z as k,a as R,B as P,u as E,d as O,E as I}from"./index-g2tFmjhV.js";import{r as S,R as T}from"./vendor-npDLdgAy.js";import{m as A,q as L,n as F,p as K,r as z,d as G,c as U,w as V,z as B}from"./firebase-eG8A_CqU.js";import{ae as H,d as X,af as $,ag as q,ah as W,$ as Y,ai as Z,L as J,_ as Q,aj as ee,H as te,s as ne,ak as re}from"./ui-Dod0sQ3X.js";import{u as ae}from"./router-Cm2dkesr.js";var oe=["Enter"," "],se=["ArrowUp","PageDown","End"],ie=["ArrowDown","PageUp","Home",...se],ce={ltr:[...oe,"ArrowRight"],rtl:[...oe,"ArrowLeft"]},le={ltr:["ArrowLeft"],rtl:["ArrowRight"]},de="Menu",[ue,pe,me]=t(de),[fe,he]=e(de,[me,n,r]),xe=n(),ve=r(),[ge,we]=fe(de),[be,ye]=fe(de),je=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:c,onOpenChange:l,modal:d=!0}=e,u=xe(t),[p,m]=S.useState(null),f=S.useRef(!1),h=a(l),x=o(c);return S.useEffect(()=>{const e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),s.jsx(i,{...u,children:s.jsx(ge,{scope:t,open:n,onOpenChange:h,content:p,onContentChange:m,children:s.jsx(be,{scope:t,onClose:S.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:x,modal:d,children:r})})})};je.displayName=de;var _e=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=xe(n);return s.jsx(c,{...a,...r,ref:t})});_e.displayName="MenuAnchor";var Ne="MenuPortal",[Me,Ce]=fe(Ne,{forceMount:void 0}),De=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,o=we(Ne,t);return s.jsx(Me,{scope:t,forceMount:n,children:s.jsx(l,{present:n||o.open,children:s.jsx(d,{asChild:!0,container:a,children:r})})})};De.displayName=Ne;var ke="MenuContent",[Re,Pe]=fe(ke),Ee=S.forwardRef((e,t)=>{const n=Ce(ke,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=we(ke,e.__scopeMenu),i=ye(ke,e.__scopeMenu);return s.jsx(ue.Provider,{scope:e.__scopeMenu,children:s.jsx(l,{present:r||o.open,children:s.jsx(ue.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(Oe,{...a,ref:t}):s.jsx(Ie,{...a,ref:t})})})})}),Oe=S.forwardRef((e,t)=>{const n=we(ke,e.__scopeMenu),r=S.useRef(null),a=u(t,r);return S.useEffect(()=>{const e=r.current;if(e)return m(e)},[]),s.jsx(Te,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:p(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Ie=S.forwardRef((e,t)=>{const n=we(ke,e.__scopeMenu);return s.jsx(Te,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Se=w("MenuContent.ScrollLock"),Te=S.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:x,disableOutsideScroll:w,...N}=e,M=we(ke,n),C=ye(ke,n),D=xe(n),k=ve(n),R=pe(n),[P,E]=S.useState(null),O=S.useRef(null),I=u(t,O,M.onContentChange),T=S.useRef(0),A=S.useRef(""),L=S.useRef(0),F=S.useRef(null),K=S.useRef("right"),z=S.useRef(0),G=w?g:S.Fragment,U=w?{as:Se,allowPinchZoom:!0}:void 0,V=e=>{var t,n;const r=A.current+e,a=R().filter(e=>!e.disabled),o=document.activeElement,s=null==(t=a.find(e=>e.ref.current===o))?void 0:t.textValue,i=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),a=r?t[0]:t,o=n?e.indexOf(n):-1;let s=(i=e,c=Math.max(o,0),i.map((e,t)=>i[(c+t)%i.length]));var i,c;1===a.length&&(s=s.filter(e=>e!==n));const l=s.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}(a.map(e=>e.textValue),r,s),c=null==(n=a.find(e=>e.textValue===i))?void 0:n.ref.current;!function e(t){A.current=t,window.clearTimeout(T.current),""!==t&&(T.current=window.setTimeout(()=>e(""),1e3))}(r),c&&setTimeout(()=>c.focus())};S.useEffect(()=>()=>window.clearTimeout(T.current),[]),v();const B=S.useCallback(e=>{var t,n;return K.current===(null==(t=F.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let a=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const e=t[o],i=t[s],c=e.x,l=e.y,d=i.x,u=i.y;l>r!=u>r&&n<(d-c)*(r-l)/(u-l)+c&&(a=!a)}return a}(n,t)}(e,null==(n=F.current)?void 0:n.area)},[]);return s.jsx(Re,{scope:n,searchRef:A,onItemEnter:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:S.useCallback(e=>{var t;B(e)||(null==(t=O.current)||t.focus(),E(null))},[B]),onTriggerLeave:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:L,onPointerGraceIntentChange:S.useCallback(e=>{F.current=e},[]),children:s.jsx(G,{...U,children:s.jsx(b,{asChild:!0,trapped:a,onMountAutoFocus:p(o,e=>{var t;e.preventDefault(),null==(t=O.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(y,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:x,children:s.jsx(j,{asChild:!0,...k,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:E,onEntryFocus:p(l,e=>{C.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(_,{role:"menu","aria-orientation":"vertical","data-state":it(M.open),"data-radix-menu-content":"",dir:C.dir,...D,...N,ref:I,style:{outline:"none",...N.style},onKeyDown:p(N.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&V(e.key));const a=O.current;if(e.target!==a)return;if(!ie.includes(e.key))return;e.preventDefault();const o=R().filter(e=>!e.disabled).map(e=>e.ref.current);se.includes(e.key)&&o.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(o)}),onBlur:p(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),A.current="")}),onPointerMove:p(e.onPointerMove,dt(e=>{const t=e.target,n=z.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>z.current?"right":"left";K.current=t,z.current=e.clientX}}))})})})})})})});Ee.displayName=ke;var Ae=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(h.div,{role:"group",...r,ref:t})});Ae.displayName="MenuGroup";var Le=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(h.div,{...r,ref:t})});Le.displayName="MenuLabel";var Fe="MenuItem",Ke="menu.itemSelect",ze=S.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,o=S.useRef(null),i=ye(Fe,e.__scopeMenu),c=Pe(Fe,e.__scopeMenu),l=u(t,o),d=S.useRef(!1);return s.jsx(Ge,{...a,ref:l,disabled:n,onClick:p(e.onClick,()=>{const e=o.current;if(!n&&e){const t=new CustomEvent(Ke,{bubbles:!0,cancelable:!0});e.addEventListener(Ke,e=>null==r?void 0:r(e),{once:!0}),x(e,t),t.defaultPrevented?d.current=!1:i.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),d.current=!0},onPointerUp:p(e.onPointerUp,e=>{var t;d.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:p(e.onKeyDown,e=>{const t=""!==c.searchRef.current;n||t&&" "===e.key||oe.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ze.displayName=Fe;var Ge=S.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...o}=e,i=Pe(Fe,n),c=ve(n),l=S.useRef(null),d=u(t,l),[m,x]=S.useState(!1),[v,g]=S.useState("");return S.useEffect(()=>{const e=l.current;e&&g((e.textContent??"").trim())},[o.children]),s.jsx(ue.ItemSlot,{scope:n,disabled:r,textValue:a??v,children:s.jsx(f,{asChild:!0,...c,focusable:!r,children:s.jsx(h.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:d,onPointerMove:p(e.onPointerMove,dt(e=>{if(r)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:p(e.onPointerLeave,dt(e=>i.onItemLeave(e))),onFocus:p(e.onFocus,()=>x(!0)),onBlur:p(e.onBlur,()=>x(!1))})})})}),Ue=S.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(Ye,{scope:e.__scopeMenu,checked:n,children:s.jsx(ze,{role:"menuitemcheckbox","aria-checked":ct(n)?"mixed":n,...a,ref:t,"data-state":lt(n),onSelect:p(a.onSelect,()=>null==r?void 0:r(!!ct(n)||!n),{checkForDefaultPrevented:!1})})})});Ue.displayName="MenuCheckboxItem";var Ve="MenuRadioGroup",[Be,He]=fe(Ve,{value:void 0,onValueChange:()=>{}}),Xe=S.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,i=a(r);return s.jsx(Be,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(Ae,{...o,ref:t})})});Xe.displayName=Ve;var $e="MenuRadioItem",qe=S.forwardRef((e,t)=>{const{value:n,...r}=e,a=He($e,e.__scopeMenu),o=n===a.value;return s.jsx(Ye,{scope:e.__scopeMenu,checked:o,children:s.jsx(ze,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":lt(o),onSelect:p(r.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,n)},{checkForDefaultPrevented:!1})})})});qe.displayName=$e;var We="MenuItemIndicator",[Ye,Ze]=fe(We,{checked:!1}),Je=S.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,o=Ze(We,n);return s.jsx(l,{present:r||ct(o.checked)||!0===o.checked,children:s.jsx(h.span,{...a,ref:t,"data-state":lt(o.checked)})})});Je.displayName=We;var Qe=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(h.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Qe.displayName="MenuSeparator";var et=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=xe(n);return s.jsx(N,{...a,...r,ref:t})});et.displayName="MenuArrow";var[tt,nt]=fe("MenuSub"),rt="MenuSubTrigger",at=S.forwardRef((e,t)=>{const n=we(rt,e.__scopeMenu),r=ye(rt,e.__scopeMenu),a=nt(rt,e.__scopeMenu),o=Pe(rt,e.__scopeMenu),i=S.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=o,d={__scopeMenu:e.__scopeMenu},u=S.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return S.useEffect(()=>u,[u]),S.useEffect(()=>{const e=c.current;return()=>{window.clearTimeout(e),l(null)}},[c,l]),s.jsx(_e,{asChild:!0,...d,children:s.jsx(Ge,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":it(n.open),...e,ref:M(t,a.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:p(e.onPointerMove,dt(t=>{o.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||i.current||(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:p(e.onPointerLeave,dt(e=>{var t,r;u();const a=null==(t=n.content)?void 0:t.getBoundingClientRect();if(a){const t=null==(r=n.content)?void 0:r.dataset.side,s="right"===t,i=s?-5:5,l=a[s?"left":"right"],d=a[s?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:l,y:a.top},{x:d,y:a.top},{x:d,y:a.bottom},{x:l,y:a.bottom}],side:t}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:p(e.onKeyDown,t=>{var a;const s=""!==o.searchRef.current;e.disabled||s&&" "===t.key||ce[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(a=n.content)||a.focus(),t.preventDefault())})})})});at.displayName=rt;var ot="MenuSubContent",st=S.forwardRef((e,t)=>{const n=Ce(ke,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=we(ke,e.__scopeMenu),i=ye(ke,e.__scopeMenu),c=nt(ot,e.__scopeMenu),d=S.useRef(null),m=u(t,d);return s.jsx(ue.Provider,{scope:e.__scopeMenu,children:s.jsx(l,{present:r||o.open,children:s.jsx(ue.Slot,{scope:e.__scopeMenu,children:s.jsx(Te,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:m,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;i.isUsingKeyboardRef.current&&(null==(t=d.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:p(e.onFocusOutside,e=>{e.target!==c.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:p(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:p(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=le[i.dir].includes(e.key);n&&r&&(o.onOpenChange(!1),null==(t=c.trigger)||t.focus(),e.preventDefault())})})})})})});function it(e){return e?"open":"closed"}function ct(e){return"indeterminate"===e}function lt(e){return ct(e)?"indeterminate":e?"checked":"unchecked"}function dt(e){return t=>"mouse"===t.pointerType?e(t):void 0}st.displayName=ot;var ut=je,pt=_e,mt=De,ft=Ee,ht=Ae,xt=Le,vt=ze,gt=Ue,wt=Xe,bt=qe,yt=Je,jt=Qe,_t=et,Nt=at,Mt=st,Ct="DropdownMenu",[Dt,kt]=e(Ct,[he]),Rt=he(),[Pt,Et]=Dt(Ct),Ot=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,l=Rt(t),d=S.useRef(null),[u,p]=C({prop:a,defaultProp:o??!1,onChange:i,caller:Ct});return s.jsx(Pt,{scope:t,triggerId:D(),triggerRef:d,contentId:D(),open:u,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(e=>!e),[p]),modal:c,children:s.jsx(ut,{...l,open:u,onOpenChange:p,dir:r,modal:c,children:n})})};Ot.displayName=Ct;var It="DropdownMenuTrigger",St=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,o=Et(It,n),i=Rt(n);return s.jsx(pt,{asChild:!0,...i,children:s.jsx(h.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:M(t,o.triggerRef),onPointerDown:p(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:p(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});St.displayName=It;var Tt=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Rt(t);return s.jsx(mt,{...r,...n})};Tt.displayName="DropdownMenuPortal";var At="DropdownMenuContent",Lt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Et(At,n),o=Rt(n),i=S.useRef(!1);return s.jsx(ft,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:t,onCloseAutoFocus:p(e.onCloseAutoFocus,e=>{var t;i.current||null==(t=a.triggerRef.current)||t.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:p(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.modal&&!r||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Lt.displayName=At;S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(ht,{...a,...r,ref:t})}).displayName="DropdownMenuGroup";var Ft=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(xt,{...a,...r,ref:t})});Ft.displayName="DropdownMenuLabel";var Kt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(vt,{...a,...r,ref:t})});Kt.displayName="DropdownMenuItem";var zt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(gt,{...a,...r,ref:t})});zt.displayName="DropdownMenuCheckboxItem";S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(wt,{...a,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var Gt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(bt,{...a,...r,ref:t})});Gt.displayName="DropdownMenuRadioItem";var Ut=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(yt,{...a,...r,ref:t})});Ut.displayName="DropdownMenuItemIndicator";var Vt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(jt,{...a,...r,ref:t})});Vt.displayName="DropdownMenuSeparator";S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(_t,{...a,...r,ref:t})}).displayName="DropdownMenuArrow";var Bt=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(Nt,{...a,...r,ref:t})});Bt.displayName="DropdownMenuSubTrigger";var Ht=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Rt(n);return s.jsx(Mt,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ht.displayName="DropdownMenuSubContent";var Xt=Tt,$t=Lt,qt=Ft,Wt=Kt,Yt=zt,Zt=Gt,Jt=Ut,Qt=Vt,en=Bt,tn=Ht;const nn=Ot,rn=St;T.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(en,{ref:a,className:k("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(H,{className:"ml-auto h-4 w-4"})]})).displayName=en.displayName;T.forwardRef(({className:e,...t},n)=>s.jsx(tn,{ref:n,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=tn.displayName;const an=T.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(Xt,{children:s.jsx($t,{ref:r,sideOffset:t,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));an.displayName=$t.displayName;const on=T.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Wt,{ref:r,className:k("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));on.displayName=Wt.displayName;T.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(Yt,{ref:a,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Jt,{children:s.jsx(X,{className:"h-4 w-4"})})}),t]})).displayName=Yt.displayName;T.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Zt,{ref:r,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Jt,{children:s.jsx($,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=Zt.displayName;T.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(qt,{ref:r,className:k("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n})).displayName=qt.displayName;T.forwardRef(({className:e,...t},n)=>s.jsx(Qt,{ref:n,className:k("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Qt.displayName;const sn=({ad:e})=>{const{toast:t}=R(),n=(e,n)=>{t({title:"⚠️ Salir de la app",description:"Estás saliendo de la aplicación para contactar al anunciante.",duration:3e3}),setTimeout(()=>{switch(e){case"phone":window.location.href=`tel:${n}`;break;case"email":window.location.href=`mailto:${n}`;break;case"website":window.open(n,"_blank");break;case"whatsapp":window.open(`https://wa.me/${n.replace(/[^0-9]/g,"")}`,"_blank")}},1500)},r=["bg-gradient-to-br from-blue-500 to-purple-600","bg-gradient-to-br from-green-500 to-teal-600","bg-gradient-to-br from-orange-500 to-red-600","bg-gradient-to-br from-pink-500 to-rose-600","bg-gradient-to-br from-indigo-500 to-blue-600"],a=r[Math.floor(Math.random()*r.length)];return s.jsxs("div",{className:`${a} rounded-lg p-4 text-white relative overflow-hidden`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"bg-white/20 px-2 py-1 rounded-full",children:s.jsx("span",{className:"text-xs font-medium",children:"PUBLICIDAD"})}),s.jsx(q,{className:"w-4 h-4 opacity-70"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-1",children:e.title||"Anuncio"}),s.jsx("p",{className:"text-white/90 text-sm mb-2",children:e.description||"Descripción del anuncio"}),e.company_info&&s.jsx("p",{className:"text-white/80 text-xs",children:e.company_info})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.contact_phone&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>n("phone",e.contact_phone),children:[s.jsx(W,{className:"w-3 h-3 mr-1"}),"Llamar"]}),e.contact_email&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>n("email",e.contact_email),children:[s.jsx(Y,{className:"w-3 h-3 mr-1"}),"Email"]}),e.contact_website&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>n("website",e.contact_website),children:[s.jsx(Z,{className:"w-3 h-3 mr-1"}),"Web"]}),e.contact_whatsapp&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>n("whatsapp",e.contact_whatsapp),children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]})]})]})]})},cn=()=>{const{user:e}=E(),{toast:t}=R();ae();const[n,r]=S.useState([]),[a,o]=S.useState([]),[i,c]=S.useState([]),[l,d]=S.useState(!0),[u,p]=S.useState(null),[m,f]=S.useState(!1),h=S.useCallback(async()=>{if(null==e?void 0:e.uid)try{d(!0);const e=A(O,"posts"),t=L(e,F("created_at","desc"),K(20)),n=await z(t),a=await Promise.all(n.docs.map(async e=>{const t={id:e.id,...e.data()};try{const e=G(O,"profiles",t.user_id),n=await U(e);n.exists()&&(t.author={id:n.id,...n.data()})}catch(n){}try{const e=A(O,"post_likes"),n=L(e,V("post_id","==",t.id)),r=await z(n);t.likes=r.docs.map(e=>({id:e.id,...e.data()}))}catch(n){t.likes=[]}return t})),s=A(O,"advertisements"),i=L(s,V("status","==","active"),K(10));let l=(await z(i)).docs.map(e=>({id:e.id,...e.data(),type:"ad",source:"advertising_portal"}));0===l.length&&(l=[{id:"agarch-vip",title:"¡Hazte VIP en AGARCH-AR!",description:"Desbloquea todas las funciones premium: historias ilimitadas, perfil destacado, acceso prioritario y mucho más.",category:"Premium",company_info:"Únete a la comunidad VIP y lleva tu experiencia al siguiente nivel.",contact_phone:null,contact_email:null,contact_website:"/payments",cover_image:null,duration:"premium",is_app_promo:!0,promo_type:"vip",type:"ad",source:"promotional"},{id:"automarket-app",title:"AUTOMARKET - Tu App de Autos",description:"Encuentra, vende y compra autos de forma fácil y segura. Miles de vehículos disponibles.",category:"Automóviles",company_info:"La plataforma líder en compraventa de autos en Argentina.",contact_phone:"+54 11 1234-5678",contact_email:"info@auto-market.pro",contact_website:"https://auto-market.pro",cover_image:null,duration:"premium",is_app_promo:!0,promo_type:"automarket",type:"ad",source:"promotional"}]),r(a),o(l);const u=[];let p=0;for(let r=0;r<a.length;r+=6){const e=a.slice(r,r+6);if(u.push(...e),p<l.length){const e=l.slice(p,p+2);u.push(...e),p+=2}}c(u)}catch(t){c([])}finally{d(!1)}},[null==e?void 0:e.uid,t]);S.useEffect(()=>{h()},[h]);return l?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(J,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Cargando publicaciones..."})]}):0===i.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Q,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay publicaciones"}),s.jsx("p",{className:"text-muted-foreground",children:"Sé el primero en crear contenido."})]}):s.jsxs("div",{className:"px-4 pb-20",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.map((n,r)=>{var a,o,i,c;return s.jsx("div",{className:"space-y-3",children:"ad"===n.type||n.website?s.jsx(sn,{ad:n}):s.jsxs("div",{className:"bg-card rounded-lg overflow-hidden border",children:[s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:(null==(a=n.author)?void 0:a.profile_picture_url)||"/pwa-512x512.png",alt:(null==(o=n.author)?void 0:o.alias)||"Usuario",className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:(null==(i=n.author)?void 0:i.alias)||"Usuario"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.created_at?new Date(n.created_at).toLocaleDateString():"Ahora"})]})]}),s.jsxs(nn,{children:[s.jsx(rn,{asChild:!0,children:s.jsx(P,{variant:"ghost",size:"sm",children:s.jsx(ee,{className:"w-4 h-4"})})}),s.jsxs(an,{align:"end",className:"card-glass",children:[s.jsxs(on,{onClick:()=>(async n=>{if(null==e?void 0:e.uid)try{const r=A(O,"post_likes");await B(r,{post_id:n,user_id:e.uid,created_at:new Date}),t({title:"Me gusta",description:"Has dado me gusta a esta publicación."}),h()}catch(r){t({variant:"destructive",title:"Error",description:"No se pudo dar me gusta a la publicación."})}})(n.id),className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{children:"Me gusta"})]}),s.jsxs(on,{onClick:()=>{return e=n.author,p(e),void f(!0);var e},className:"flex items-center gap-2",children:[s.jsx(ne,{className:"w-4 h-4"}),s.jsx("span",{children:"Mensaje"})]}),s.jsxs(on,{onClick:()=>{var r;return(async n=>{if(null==e?void 0:e.uid)try{const r=A(O,"user_likes");await B(r,{user_id:e.uid,liked_user_id:n,created_at:new Date}),t({title:"Perfil guardado",description:"Has guardado este perfil en tu lista."})}catch(r){t({variant:"destructive",title:"Error",description:"No se pudo guardar el perfil."})}})(null==(r=n.author)?void 0:r.id)},className:"flex items-center gap-2",children:[s.jsx(re,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar perfil"})]})]})]})]}),s.jsxs("div",{children:[n.image_url&&s.jsx("img",{src:n.image_url,alt:"Publicación",className:"w-full h-48 object-cover"}),n.video_url&&s.jsx("video",{src:n.video_url,controls:!0,className:"w-full h-48 object-cover"}),n.text&&s.jsx("p",{className:"p-3 text-sm",children:n.text})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(c=n.likes)?void 0:c.length)||0," me gusta"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Usa el menú ⋯ para más opciones"})]})]})},n.id||r)})}),m&&u&&s.jsx(I,{profile:u,onClose:()=>{f(!1),p(null)}})]})};export{cn as default};
