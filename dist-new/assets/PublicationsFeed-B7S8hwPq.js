import{c as e,b as n,e as t,f as r,g as a,h as o,j as s,R as i,A as c,P as l,i as d,k as u,l as p,m,n as f,o as h,p as x,q as v,r as w,s as g,F as b,D as j,t as y,C as _,v as N,w as M,x as C,y as D,z as k,a as R,B as P,u as O,d as E,E as I}from"./index-BzliLr7A.js";import{r as S,R as T}from"./vendor-npDLdgAy.js";import{m as F,q as L,n as A,p as K,r as z,d as G,c as U,w as V,z as B}from"./firebase-eG8A_CqU.js";import{af as X,d as H,ag as $,ah as W,ai as q,a0 as Y,aj as Z,L as J,t as Q,ak as ee,H as ne,s as te,al as re}from"./ui-Cpz89quC.js";import{u as ae}from"./router-Ba8Cb_LR.js";var oe=["Enter"," "],se=["ArrowUp","PageDown","End"],ie=["ArrowDown","PageUp","Home",...se],ce={ltr:[...oe,"ArrowRight"],rtl:[...oe,"ArrowLeft"]},le={ltr:["ArrowLeft"],rtl:["ArrowRight"]},de="Menu",[ue,pe,me]=n(de),[fe,he]=e(de,[me,t,r]),xe=t(),ve=r(),[we,ge]=fe(de),[be,je]=fe(de),ye=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:c,onOpenChange:l,modal:d=!0}=e,u=xe(n),[p,m]=S.useState(null),f=S.useRef(!1),h=a(l),x=o(c);return S.useEffect(()=>{const e=()=>{f.current=!0,document.addEventListener("pointerdown",n,{capture:!0,once:!0}),document.addEventListener("pointermove",n,{capture:!0,once:!0})},n=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",n,{capture:!0}),document.removeEventListener("pointermove",n,{capture:!0})}},[]),s.jsx(i,{...u,children:s.jsx(we,{scope:n,open:t,onOpenChange:h,content:p,onContentChange:m,children:s.jsx(be,{scope:n,onClose:S.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:x,modal:d,children:r})})})};ye.displayName=de;var _e=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=xe(t);return s.jsx(c,{...a,...r,ref:n})});_e.displayName="MenuAnchor";var Ne="MenuPortal",[Me,Ce]=fe(Ne,{forceMount:void 0}),De=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:a}=e,o=ge(Ne,n);return s.jsx(Me,{scope:n,forceMount:t,children:s.jsx(l,{present:t||o.open,children:s.jsx(d,{asChild:!0,container:a,children:r})})})};De.displayName=Ne;var ke="MenuContent",[Re,Pe]=fe(ke),Oe=S.forwardRef((e,n)=>{const t=Ce(ke,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,o=ge(ke,e.__scopeMenu),i=je(ke,e.__scopeMenu);return s.jsx(ue.Provider,{scope:e.__scopeMenu,children:s.jsx(l,{present:r||o.open,children:s.jsx(ue.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(Ee,{...a,ref:n}):s.jsx(Ie,{...a,ref:n})})})})}),Ee=S.forwardRef((e,n)=>{const t=ge(ke,e.__scopeMenu),r=S.useRef(null),a=u(n,r);return S.useEffect(()=>{const e=r.current;if(e)return m(e)},[]),s.jsx(Te,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:p(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Ie=S.forwardRef((e,n)=>{const t=ge(ke,e.__scopeMenu);return s.jsx(Te,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Se=g("MenuContent.ScrollLock"),Te=S.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:x,disableOutsideScroll:g,...N}=e,M=ge(ke,t),C=je(ke,t),D=xe(t),k=ve(t),R=pe(t),[P,O]=S.useState(null),E=S.useRef(null),I=u(n,E,M.onContentChange),T=S.useRef(0),F=S.useRef(""),L=S.useRef(0),A=S.useRef(null),K=S.useRef("right"),z=S.useRef(0),G=g?w:S.Fragment,U=g?{as:Se,allowPinchZoom:!0}:void 0,V=e=>{var n,t;const r=F.current+e,a=R().filter(e=>!e.disabled),o=document.activeElement,s=null==(n=a.find(e=>e.ref.current===o))?void 0:n.textValue,i=function(e,n,t){const r=n.length>1&&Array.from(n).every(e=>e===n[0]),a=r?n[0]:n,o=t?e.indexOf(t):-1;let s=(i=e,c=Math.max(o,0),i.map((e,n)=>i[(c+n)%i.length]));var i,c;1===a.length&&(s=s.filter(e=>e!==t));const l=s.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return l!==t?l:void 0}(a.map(e=>e.textValue),r,s),c=null==(t=a.find(e=>e.textValue===i))?void 0:t.ref.current;!function e(n){F.current=n,window.clearTimeout(T.current),""!==n&&(T.current=window.setTimeout(()=>e(""),1e3))}(r),c&&setTimeout(()=>c.focus())};S.useEffect(()=>()=>window.clearTimeout(T.current),[]),v();const B=S.useCallback(e=>{var n,t;return K.current===(null==(n=A.current)?void 0:n.side)&&function(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return function(e,n){const{x:t,y:r}=e;let a=!1;for(let o=0,s=n.length-1;o<n.length;s=o++){const e=n[o],i=n[s],c=e.x,l=e.y,d=i.x,u=i.y;l>r!=u>r&&t<(d-c)*(r-l)/(u-l)+c&&(a=!a)}return a}(t,n)}(e,null==(t=A.current)?void 0:t.area)},[]);return s.jsx(Re,{scope:t,searchRef:F,onItemEnter:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:S.useCallback(e=>{var n;B(e)||(null==(n=E.current)||n.focus(),O(null))},[B]),onTriggerLeave:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:L,onPointerGraceIntentChange:S.useCallback(e=>{A.current=e},[]),children:s.jsx(G,{...U,children:s.jsx(b,{asChild:!0,trapped:a,onMountAutoFocus:p(o,e=>{var n;e.preventDefault(),null==(n=E.current)||n.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(j,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:x,children:s.jsx(y,{asChild:!0,...k,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:O,onEntryFocus:p(l,e=>{C.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(_,{role:"menu","aria-orientation":"vertical","data-state":cn(M.open),"data-radix-menu-content":"",dir:C.dir,...D,...N,ref:I,style:{outline:"none",...N.style},onKeyDown:p(N.onKeyDown,e=>{const n=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!t&&r&&V(e.key));const a=E.current;if(e.target!==a)return;if(!ie.includes(e.key))return;e.preventDefault();const o=R().filter(e=>!e.disabled).map(e=>e.ref.current);se.includes(e.key)&&o.reverse(),function(e){const n=document.activeElement;for(const t of e){if(t===n)return;if(t.focus(),document.activeElement!==n)return}}(o)}),onBlur:p(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),F.current="")}),onPointerMove:p(e.onPointerMove,un(e=>{const n=e.target,t=z.current!==e.clientX;if(e.currentTarget.contains(n)&&t){const n=e.clientX>z.current?"right":"left";K.current=n,z.current=e.clientX}}))})})})})})})});Oe.displayName=ke;var Fe=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{role:"group",...r,ref:n})});Fe.displayName="MenuGroup";var Le=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{...r,ref:n})});Le.displayName="MenuLabel";var Ae="MenuItem",Ke="menu.itemSelect",ze=S.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...a}=e,o=S.useRef(null),i=je(Ae,e.__scopeMenu),c=Pe(Ae,e.__scopeMenu),l=u(n,o),d=S.useRef(!1);return s.jsx(Ge,{...a,ref:l,disabled:t,onClick:p(e.onClick,()=>{const e=o.current;if(!t&&e){const n=new CustomEvent(Ke,{bubbles:!0,cancelable:!0});e.addEventListener(Ke,e=>null==r?void 0:r(e),{once:!0}),x(e,n),n.defaultPrevented?d.current=!1:i.onClose()}}),onPointerDown:n=>{var t;null==(t=e.onPointerDown)||t.call(e,n),d.current=!0},onPointerUp:p(e.onPointerUp,e=>{var n;d.current||null==(n=e.currentTarget)||n.click()}),onKeyDown:p(e.onKeyDown,e=>{const n=""!==c.searchRef.current;t||n&&" "===e.key||oe.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ze.displayName=Ae;var Ge=S.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:a,...o}=e,i=Pe(Ae,t),c=ve(t),l=S.useRef(null),d=u(n,l),[m,x]=S.useState(!1),[v,w]=S.useState("");return S.useEffect(()=>{const e=l.current;e&&w((e.textContent??"").trim())},[o.children]),s.jsx(ue.ItemSlot,{scope:t,disabled:r,textValue:a??v,children:s.jsx(f,{asChild:!0,...c,focusable:!r,children:s.jsx(h.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:d,onPointerMove:p(e.onPointerMove,un(e=>{if(r)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:p(e.onPointerLeave,un(e=>i.onItemLeave(e))),onFocus:p(e.onFocus,()=>x(!0)),onBlur:p(e.onBlur,()=>x(!1))})})})}),Ue=S.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...a}=e;return s.jsx(Ye,{scope:e.__scopeMenu,checked:t,children:s.jsx(ze,{role:"menuitemcheckbox","aria-checked":ln(t)?"mixed":t,...a,ref:n,"data-state":dn(t),onSelect:p(a.onSelect,()=>null==r?void 0:r(!!ln(t)||!t),{checkForDefaultPrevented:!1})})})});Ue.displayName="MenuCheckboxItem";var Ve="MenuRadioGroup",[Be,Xe]=fe(Ve,{value:void 0,onValueChange:()=>{}}),He=S.forwardRef((e,n)=>{const{value:t,onValueChange:r,...o}=e,i=a(r);return s.jsx(Be,{scope:e.__scopeMenu,value:t,onValueChange:i,children:s.jsx(Fe,{...o,ref:n})})});He.displayName=Ve;var $e="MenuRadioItem",We=S.forwardRef((e,n)=>{const{value:t,...r}=e,a=Xe($e,e.__scopeMenu),o=t===a.value;return s.jsx(Ye,{scope:e.__scopeMenu,checked:o,children:s.jsx(ze,{role:"menuitemradio","aria-checked":o,...r,ref:n,"data-state":dn(o),onSelect:p(r.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,t)},{checkForDefaultPrevented:!1})})})});We.displayName=$e;var qe="MenuItemIndicator",[Ye,Ze]=fe(qe,{checked:!1}),Je=S.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...a}=e,o=Ze(qe,t);return s.jsx(l,{present:r||ln(o.checked)||!0===o.checked,children:s.jsx(h.span,{...a,ref:n,"data-state":dn(o.checked)})})});Je.displayName=qe;var Qe=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});Qe.displayName="MenuSeparator";var en=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=xe(t);return s.jsx(N,{...a,...r,ref:n})});en.displayName="MenuArrow";var[nn,tn]=fe("MenuSub"),rn="MenuSubTrigger",an=S.forwardRef((e,n)=>{const t=ge(rn,e.__scopeMenu),r=je(rn,e.__scopeMenu),a=tn(rn,e.__scopeMenu),o=Pe(rn,e.__scopeMenu),i=S.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=o,d={__scopeMenu:e.__scopeMenu},u=S.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return S.useEffect(()=>u,[u]),S.useEffect(()=>{const e=c.current;return()=>{window.clearTimeout(e),l(null)}},[c,l]),s.jsx(_e,{asChild:!0,...d,children:s.jsx(Ge,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":cn(t.open),...e,ref:M(n,a.onTriggerChange),onClick:n=>{var r;null==(r=e.onClick)||r.call(e,n),e.disabled||n.defaultPrevented||(n.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:p(e.onPointerMove,un(n=>{o.onItemEnter(n),n.defaultPrevented||e.disabled||t.open||i.current||(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:p(e.onPointerLeave,un(e=>{var n,r;u();const a=null==(n=t.content)?void 0:n.getBoundingClientRect();if(a){const n=null==(r=t.content)?void 0:r.dataset.side,s="right"===n,i=s?-5:5,l=a[s?"left":"right"],d=a[s?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:l,y:a.top},{x:d,y:a.top},{x:d,y:a.bottom},{x:l,y:a.bottom}],side:n}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:p(e.onKeyDown,n=>{var a;const s=""!==o.searchRef.current;e.disabled||s&&" "===n.key||ce[r.dir].includes(n.key)&&(t.onOpenChange(!0),null==(a=t.content)||a.focus(),n.preventDefault())})})})});an.displayName=rn;var on="MenuSubContent",sn=S.forwardRef((e,n)=>{const t=Ce(ke,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,o=ge(ke,e.__scopeMenu),i=je(ke,e.__scopeMenu),c=tn(on,e.__scopeMenu),d=S.useRef(null),m=u(n,d);return s.jsx(ue.Provider,{scope:e.__scopeMenu,children:s.jsx(l,{present:r||o.open,children:s.jsx(ue.Slot,{scope:e.__scopeMenu,children:s.jsx(Te,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:m,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var n;i.isUsingKeyboardRef.current&&(null==(n=d.current)||n.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:p(e.onFocusOutside,e=>{e.target!==c.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:p(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:p(e.onKeyDown,e=>{var n;const t=e.currentTarget.contains(e.target),r=le[i.dir].includes(e.key);t&&r&&(o.onOpenChange(!1),null==(n=c.trigger)||n.focus(),e.preventDefault())})})})})})});function cn(e){return e?"open":"closed"}function ln(e){return"indeterminate"===e}function dn(e){return ln(e)?"indeterminate":e?"checked":"unchecked"}function un(e){return n=>"mouse"===n.pointerType?e(n):void 0}sn.displayName=on;var pn=ye,mn=_e,fn=De,hn=Oe,xn=Fe,vn=Le,wn=ze,gn=Ue,bn=He,jn=We,yn=Je,_n=Qe,Nn=en,Mn=an,Cn=sn,Dn="DropdownMenu",[kn,Rn]=e(Dn,[he]),Pn=he(),[On,En]=kn(Dn),In=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:a,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,l=Pn(n),d=S.useRef(null),[u,p]=C({prop:a,defaultProp:o??!1,onChange:i,caller:Dn});return s.jsx(On,{scope:n,triggerId:D(),triggerRef:d,contentId:D(),open:u,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(e=>!e),[p]),modal:c,children:s.jsx(pn,{...l,open:u,onOpenChange:p,dir:r,modal:c,children:t})})};In.displayName=Dn;var Sn="DropdownMenuTrigger",Tn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...a}=e,o=En(Sn,t),i=Pn(t);return s.jsx(mn,{asChild:!0,...i,children:s.jsx(h.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:M(n,o.triggerRef),onPointerDown:p(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:p(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Tn.displayName=Sn;var Fn=e=>{const{__scopeDropdownMenu:n,...t}=e,r=Pn(n);return s.jsx(fn,{...r,...t})};Fn.displayName="DropdownMenuPortal";var Ln="DropdownMenuContent",An=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=En(Ln,t),o=Pn(t),i=S.useRef(!1);return s.jsx(hn,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:n,onCloseAutoFocus:p(e.onCloseAutoFocus,e=>{var n;i.current||null==(n=a.triggerRef.current)||n.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:p(e.onInteractOutside,e=>{const n=e.detail.originalEvent,t=0===n.button&&!0===n.ctrlKey,r=2===n.button||t;a.modal&&!r||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});An.displayName=Ln;S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(xn,{...a,...r,ref:n})}).displayName="DropdownMenuGroup";var Kn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(vn,{...a,...r,ref:n})});Kn.displayName="DropdownMenuLabel";var zn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(wn,{...a,...r,ref:n})});zn.displayName="DropdownMenuItem";var Gn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(gn,{...a,...r,ref:n})});Gn.displayName="DropdownMenuCheckboxItem";S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(bn,{...a,...r,ref:n})}).displayName="DropdownMenuRadioGroup";var Un=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(jn,{...a,...r,ref:n})});Un.displayName="DropdownMenuRadioItem";var Vn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(yn,{...a,...r,ref:n})});Vn.displayName="DropdownMenuItemIndicator";var Bn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(_n,{...a,...r,ref:n})});Bn.displayName="DropdownMenuSeparator";S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(Nn,{...a,...r,ref:n})}).displayName="DropdownMenuArrow";var Xn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(Mn,{...a,...r,ref:n})});Xn.displayName="DropdownMenuSubTrigger";var Hn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Pn(t);return s.jsx(Cn,{...a,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Hn.displayName="DropdownMenuSubContent";var $n=Fn,Wn=An,qn=Kn,Yn=zn,Zn=Gn,Jn=Un,Qn=Vn,et=Bn,nt=Xn,tt=Hn;const rt=In,at=Tn;T.forwardRef(({className:e,inset:n,children:t,...r},a)=>s.jsxs(nt,{ref:a,className:k("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",e),...r,children:[t,s.jsx(X,{className:"ml-auto h-4 w-4"})]})).displayName=nt.displayName;T.forwardRef(({className:e,...n},t)=>s.jsx(tt,{ref:t,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})).displayName=tt.displayName;const ot=T.forwardRef(({className:e,sideOffset:n=4,...t},r)=>s.jsx($n,{children:s.jsx(Wn,{ref:r,sideOffset:n,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));ot.displayName=Wn.displayName;const st=T.forwardRef(({className:e,inset:n,...t},r)=>s.jsx(Yn,{ref:r,className:k("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",e),...t}));st.displayName=Yn.displayName;T.forwardRef(({className:e,children:n,checked:t,...r},a)=>s.jsxs(Zn,{ref:a,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Qn,{children:s.jsx(H,{className:"h-4 w-4"})})}),n]})).displayName=Zn.displayName;T.forwardRef(({className:e,children:n,...t},r)=>s.jsxs(Jn,{ref:r,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Qn,{children:s.jsx($,{className:"h-2 w-2 fill-current"})})}),n]})).displayName=Jn.displayName;T.forwardRef(({className:e,inset:n,...t},r)=>s.jsx(qn,{ref:r,className:k("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...t})).displayName=qn.displayName;T.forwardRef(({className:e,...n},t)=>s.jsx(et,{ref:t,className:k("-mx-1 my-1 h-px bg-muted",e),...n})).displayName=et.displayName;const it=({ad:e})=>{const{toast:n}=R(),t=(e,t)=>{n({title:"⚠️ Salir de la app",description:"Estás saliendo de la aplicación para contactar al anunciante.",duration:3e3}),setTimeout(()=>{switch(e){case"phone":window.location.href=`tel:${t}`;break;case"email":window.location.href=`mailto:${t}`;break;case"website":window.open(t,"_blank");break;case"whatsapp":window.open(`https://wa.me/${t.replace(/[^0-9]/g,"")}`,"_blank")}},1500)},r=["bg-gradient-to-br from-blue-500 to-purple-600","bg-gradient-to-br from-green-500 to-teal-600","bg-gradient-to-br from-orange-500 to-red-600","bg-gradient-to-br from-pink-500 to-rose-600","bg-gradient-to-br from-indigo-500 to-blue-600"],a=r[Math.floor(Math.random()*r.length)];return s.jsxs("div",{className:`${a} rounded-lg p-4 text-white relative overflow-hidden`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"bg-white/20 px-2 py-1 rounded-full",children:s.jsx("span",{className:"text-xs font-medium",children:"PUBLICIDAD"})}),s.jsx(W,{className:"w-4 h-4 opacity-70"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-1",children:e.title||"Anuncio"}),s.jsx("p",{className:"text-white/90 text-sm mb-2",children:e.description||"Descripción del anuncio"}),e.company_info&&s.jsx("p",{className:"text-white/80 text-xs",children:e.company_info})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.contact_phone&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("phone",e.contact_phone),children:[s.jsx(q,{className:"w-3 h-3 mr-1"}),"Llamar"]}),e.contact_email&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("email",e.contact_email),children:[s.jsx(Y,{className:"w-3 h-3 mr-1"}),"Email"]}),e.contact_website&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("website",e.contact_website),children:[s.jsx(Z,{className:"w-3 h-3 mr-1"}),"Web"]}),e.contact_whatsapp&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("whatsapp",e.contact_whatsapp),children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]})]})]})]})},ct=()=>{const{user:e}=O(),{toast:n}=R();ae();const[t,r]=S.useState([]),[a,o]=S.useState([]),[i,c]=S.useState([]),[l,d]=S.useState(!0),[u,p]=S.useState(null),[m,f]=S.useState(!1),[h,x]=S.useState(null),v=S.useCallback(async()=>{if(null==e?void 0:e.uid)try{d(!0);const e=F(E,"posts"),n=L(e,A("created_at","desc"),K(20)),t=await z(n),a=await Promise.all(t.docs.map(async e=>{const n={id:e.id,...e.data()};try{const e=G(E,"profiles",n.user_id),t=await U(e);t.exists()&&(n.author={id:t.id,...t.data()})}catch(t){}try{const e=F(E,"post_likes"),t=L(e,V("post_id","==",n.id)),r=await z(t);n.likes=r.docs.map(e=>({id:e.id,...e.data()}))}catch(t){n.likes=[]}return n})),s=F(E,"advertisements"),i=L(s,A("created_at","desc"),K(10)),l=(await z(i)).docs.map(e=>({id:e.id,...e.data(),source:"advertising_portal"}));r(a),o(l);const u=[];let p=0;for(let r=0;r<a.length;r+=6){const e=a.slice(r,r+6);if(u.push(...e),p<l.length){const e=l.slice(p,p+2);u.push(...e),p+=2}}c(u)}catch(n){c([])}finally{d(!1)}},[null==e?void 0:e.uid,n]);S.useEffect(()=>{v()},[v]);return l?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(J,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Cargando publicaciones..."})]}):0===i.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Q,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay publicaciones"}),s.jsx("p",{className:"text-muted-foreground",children:"Sé el primero en crear contenido."})]}):s.jsxs("div",{className:"px-4 pb-20",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map((t,r)=>{var a,o,i,c;return s.jsx("div",{className:"space-y-3",children:"ad"===t.type||t.website?s.jsx(it,{ad:t}):s.jsxs("div",{className:"bg-card rounded-lg overflow-hidden border",children:[s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:(null==(a=t.author)?void 0:a.profile_picture_url)||"/pwa-512x512.png",alt:(null==(o=t.author)?void 0:o.alias)||"Usuario",className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:(null==(i=t.author)?void 0:i.alias)||"Usuario"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.created_at?new Date(t.created_at).toLocaleDateString():"Ahora"})]})]}),s.jsxs(rt,{children:[s.jsx(at,{asChild:!0,children:s.jsx(P,{variant:"ghost",size:"sm",children:s.jsx(ee,{className:"w-4 h-4"})})}),s.jsxs(ot,{align:"end",className:"card-glass",children:[s.jsxs(st,{onClick:()=>(async t=>{if(null==e?void 0:e.uid)try{const r=F(E,"post_likes");await B(r,{post_id:t,user_id:e.uid,created_at:new Date}),n({title:"Me gusta",description:"Has dado me gusta a esta publicación."}),v()}catch(r){n({variant:"destructive",title:"Error",description:"No se pudo dar me gusta a la publicación."})}})(t.id),className:"flex items-center gap-2",children:[s.jsx(ne,{className:"w-4 h-4"}),s.jsx("span",{children:"Me gusta"})]}),s.jsxs(st,{onClick:()=>{return e=t.author,p(e),void f(!0);var e},className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{children:"Mensaje"})]}),s.jsxs(st,{onClick:()=>{var r;return(async t=>{if(null==e?void 0:e.uid)try{const r=F(E,"user_likes");await B(r,{user_id:e.uid,liked_user_id:t,created_at:new Date}),n({title:"Perfil guardado",description:"Has guardado este perfil en tu lista."})}catch(r){n({variant:"destructive",title:"Error",description:"No se pudo guardar el perfil."})}})(null==(r=t.author)?void 0:r.id)},className:"flex items-center gap-2",children:[s.jsx(re,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar perfil"})]})]})]})]}),s.jsxs("div",{className:"cursor-pointer",onClick:()=>{x(t)},children:[t.image_url&&s.jsx("img",{src:t.image_url,alt:"Publicación",className:"w-full h-48 object-cover"}),t.video_url&&s.jsx("video",{src:t.video_url,controls:!0,className:"w-full h-48 object-cover"}),t.text&&s.jsx("p",{className:"p-3 text-sm",children:t.text})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ne,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(c=t.likes)?void 0:c.length)||0," me gusta"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Usa el menú ⋯ para más opciones"})]})]})},t.id||r)})}),m&&u&&s.jsx(I,{profile:u,onClose:()=>{f(!1),p(null)}}),h&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-card rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h3",{className:"font-medium",children:"Publicación"}),s.jsx(P,{variant:"ghost",size:"sm",onClick:()=>x(null),children:"✕"})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Vista expandida en desarrollo"})})})]})})]})};export{ct as default};
