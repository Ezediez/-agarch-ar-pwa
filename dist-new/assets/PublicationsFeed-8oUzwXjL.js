import{c as e,b as n,e as t,f as r,g as a,h as o,j as s,R as i,A as c,P as d,i as l,k as u,l as p,m as f,n as m,o as h,p as x,q as v,r as w,s as g,F as b,D as j,t as y,C as _,v as N,w as M,x as C,y as D,z as R,a as k,B as P,u as O,d as E,E as I}from"./index-DUc4yHyU.js";import{r as S,R as T}from"./vendor-npDLdgAy.js";import{m as F,q as L,p as A,r as K,d as z,c as G,w as U,z as V}from"./firebase-eG8A_CqU.js";import{af as B,d as X,ag as $,ah as H,ai as W,a0 as q,aj as Y,L as Z,$ as J,ak as Q,H as ee,s as ne,al as te}from"./ui-BzcIgpI6.js";import{u as re}from"./router-Ba8Cb_LR.js";var ae=["Enter"," "],oe=["ArrowUp","PageDown","End"],se=["ArrowDown","PageUp","Home",...oe],ie={ltr:[...ae,"ArrowRight"],rtl:[...ae,"ArrowLeft"]},ce={ltr:["ArrowLeft"],rtl:["ArrowRight"]},de="Menu",[le,ue,pe]=n(de),[fe,me]=e(de,[pe,t,r]),he=t(),xe=r(),[ve,we]=fe(de),[ge,be]=fe(de),je=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:c,onOpenChange:d,modal:l=!0}=e,u=he(n),[p,f]=S.useState(null),m=S.useRef(!1),h=a(d),x=o(c);return S.useEffect(()=>{const e=()=>{m.current=!0,document.addEventListener("pointerdown",n,{capture:!0,once:!0}),document.addEventListener("pointermove",n,{capture:!0,once:!0})},n=()=>m.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",n,{capture:!0}),document.removeEventListener("pointermove",n,{capture:!0})}},[]),s.jsx(i,{...u,children:s.jsx(ve,{scope:n,open:t,onOpenChange:h,content:p,onContentChange:f,children:s.jsx(ge,{scope:n,onClose:S.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:m,dir:x,modal:l,children:r})})})};je.displayName=de;var ye=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=he(t);return s.jsx(c,{...a,...r,ref:n})});ye.displayName="MenuAnchor";var _e="MenuPortal",[Ne,Me]=fe(_e,{forceMount:void 0}),Ce=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:a}=e,o=we(_e,n);return s.jsx(Ne,{scope:n,forceMount:t,children:s.jsx(d,{present:t||o.open,children:s.jsx(l,{asChild:!0,container:a,children:r})})})};Ce.displayName=_e;var De="MenuContent",[Re,ke]=fe(De),Pe=S.forwardRef((e,n)=>{const t=Me(De,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,o=we(De,e.__scopeMenu),i=be(De,e.__scopeMenu);return s.jsx(le.Provider,{scope:e.__scopeMenu,children:s.jsx(d,{present:r||o.open,children:s.jsx(le.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(Oe,{...a,ref:n}):s.jsx(Ee,{...a,ref:n})})})})}),Oe=S.forwardRef((e,n)=>{const t=we(De,e.__scopeMenu),r=S.useRef(null),a=u(n,r);return S.useEffect(()=>{const e=r.current;if(e)return f(e)},[]),s.jsx(Se,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:p(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Ee=S.forwardRef((e,n)=>{const t=we(De,e.__scopeMenu);return s.jsx(Se,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Ie=g("MenuContent.ScrollLock"),Se=S.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:l,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,onDismiss:x,disableOutsideScroll:g,...N}=e,M=we(De,t),C=be(De,t),D=he(t),R=xe(t),k=ue(t),[P,O]=S.useState(null),E=S.useRef(null),I=u(n,E,M.onContentChange),T=S.useRef(0),F=S.useRef(""),L=S.useRef(0),A=S.useRef(null),K=S.useRef("right"),z=S.useRef(0),G=g?w:S.Fragment,U=g?{as:Ie,allowPinchZoom:!0}:void 0,V=e=>{var n,t;const r=F.current+e,a=k().filter(e=>!e.disabled),o=document.activeElement,s=null==(n=a.find(e=>e.ref.current===o))?void 0:n.textValue,i=function(e,n,t){const r=n.length>1&&Array.from(n).every(e=>e===n[0]),a=r?n[0]:n,o=t?e.indexOf(t):-1;let s=(i=e,c=Math.max(o,0),i.map((e,n)=>i[(c+n)%i.length]));var i,c;1===a.length&&(s=s.filter(e=>e!==t));const d=s.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return d!==t?d:void 0}(a.map(e=>e.textValue),r,s),c=null==(t=a.find(e=>e.textValue===i))?void 0:t.ref.current;!function e(n){F.current=n,window.clearTimeout(T.current),""!==n&&(T.current=window.setTimeout(()=>e(""),1e3))}(r),c&&setTimeout(()=>c.focus())};S.useEffect(()=>()=>window.clearTimeout(T.current),[]),v();const B=S.useCallback(e=>{var n,t;return K.current===(null==(n=A.current)?void 0:n.side)&&function(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return function(e,n){const{x:t,y:r}=e;let a=!1;for(let o=0,s=n.length-1;o<n.length;s=o++){const e=n[o],i=n[s],c=e.x,d=e.y,l=i.x,u=i.y;d>r!=u>r&&t<(l-c)*(r-d)/(u-d)+c&&(a=!a)}return a}(t,n)}(e,null==(t=A.current)?void 0:t.area)},[]);return s.jsx(Re,{scope:t,searchRef:F,onItemEnter:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:S.useCallback(e=>{var n;B(e)||(null==(n=E.current)||n.focus(),O(null))},[B]),onTriggerLeave:S.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:L,onPointerGraceIntentChange:S.useCallback(e=>{A.current=e},[]),children:s.jsx(G,{...U,children:s.jsx(b,{asChild:!0,trapped:a,onMountAutoFocus:p(o,e=>{var n;e.preventDefault(),null==(n=E.current)||n.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(j,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:l,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,onDismiss:x,children:s.jsx(y,{asChild:!0,...R,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:O,onEntryFocus:p(d,e=>{C.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(_,{role:"menu","aria-orientation":"vertical","data-state":sn(M.open),"data-radix-menu-content":"",dir:C.dir,...D,...N,ref:I,style:{outline:"none",...N.style},onKeyDown:p(N.onKeyDown,e=>{const n=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!t&&r&&V(e.key));const a=E.current;if(e.target!==a)return;if(!se.includes(e.key))return;e.preventDefault();const o=k().filter(e=>!e.disabled).map(e=>e.ref.current);oe.includes(e.key)&&o.reverse(),function(e){const n=document.activeElement;for(const t of e){if(t===n)return;if(t.focus(),document.activeElement!==n)return}}(o)}),onBlur:p(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),F.current="")}),onPointerMove:p(e.onPointerMove,ln(e=>{const n=e.target,t=z.current!==e.clientX;if(e.currentTarget.contains(n)&&t){const n=e.clientX>z.current?"right":"left";K.current=n,z.current=e.clientX}}))})})})})})})});Pe.displayName=De;var Te=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{role:"group",...r,ref:n})});Te.displayName="MenuGroup";var Fe=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{...r,ref:n})});Fe.displayName="MenuLabel";var Le="MenuItem",Ae="menu.itemSelect",Ke=S.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...a}=e,o=S.useRef(null),i=be(Le,e.__scopeMenu),c=ke(Le,e.__scopeMenu),d=u(n,o),l=S.useRef(!1);return s.jsx(ze,{...a,ref:d,disabled:t,onClick:p(e.onClick,()=>{const e=o.current;if(!t&&e){const n=new CustomEvent(Ae,{bubbles:!0,cancelable:!0});e.addEventListener(Ae,e=>null==r?void 0:r(e),{once:!0}),x(e,n),n.defaultPrevented?l.current=!1:i.onClose()}}),onPointerDown:n=>{var t;null==(t=e.onPointerDown)||t.call(e,n),l.current=!0},onPointerUp:p(e.onPointerUp,e=>{var n;l.current||null==(n=e.currentTarget)||n.click()}),onKeyDown:p(e.onKeyDown,e=>{const n=""!==c.searchRef.current;t||n&&" "===e.key||ae.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Ke.displayName=Le;var ze=S.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:a,...o}=e,i=ke(Le,t),c=xe(t),d=S.useRef(null),l=u(n,d),[f,x]=S.useState(!1),[v,w]=S.useState("");return S.useEffect(()=>{const e=d.current;e&&w((e.textContent??"").trim())},[o.children]),s.jsx(le.ItemSlot,{scope:t,disabled:r,textValue:a??v,children:s.jsx(m,{asChild:!0,...c,focusable:!r,children:s.jsx(h.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:l,onPointerMove:p(e.onPointerMove,ln(e=>{if(r)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:p(e.onPointerLeave,ln(e=>i.onItemLeave(e))),onFocus:p(e.onFocus,()=>x(!0)),onBlur:p(e.onBlur,()=>x(!1))})})})}),Ge=S.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...a}=e;return s.jsx(qe,{scope:e.__scopeMenu,checked:t,children:s.jsx(Ke,{role:"menuitemcheckbox","aria-checked":cn(t)?"mixed":t,...a,ref:n,"data-state":dn(t),onSelect:p(a.onSelect,()=>null==r?void 0:r(!!cn(t)||!t),{checkForDefaultPrevented:!1})})})});Ge.displayName="MenuCheckboxItem";var Ue="MenuRadioGroup",[Ve,Be]=fe(Ue,{value:void 0,onValueChange:()=>{}}),Xe=S.forwardRef((e,n)=>{const{value:t,onValueChange:r,...o}=e,i=a(r);return s.jsx(Ve,{scope:e.__scopeMenu,value:t,onValueChange:i,children:s.jsx(Te,{...o,ref:n})})});Xe.displayName=Ue;var $e="MenuRadioItem",He=S.forwardRef((e,n)=>{const{value:t,...r}=e,a=Be($e,e.__scopeMenu),o=t===a.value;return s.jsx(qe,{scope:e.__scopeMenu,checked:o,children:s.jsx(Ke,{role:"menuitemradio","aria-checked":o,...r,ref:n,"data-state":dn(o),onSelect:p(r.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,t)},{checkForDefaultPrevented:!1})})})});He.displayName=$e;var We="MenuItemIndicator",[qe,Ye]=fe(We,{checked:!1}),Ze=S.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...a}=e,o=Ye(We,t);return s.jsx(d,{present:r||cn(o.checked)||!0===o.checked,children:s.jsx(h.span,{...a,ref:n,"data-state":dn(o.checked)})})});Ze.displayName=We;var Je=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return s.jsx(h.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});Je.displayName="MenuSeparator";var Qe=S.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=he(t);return s.jsx(N,{...a,...r,ref:n})});Qe.displayName="MenuArrow";var[en,nn]=fe("MenuSub"),tn="MenuSubTrigger",rn=S.forwardRef((e,n)=>{const t=we(tn,e.__scopeMenu),r=be(tn,e.__scopeMenu),a=nn(tn,e.__scopeMenu),o=ke(tn,e.__scopeMenu),i=S.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=o,l={__scopeMenu:e.__scopeMenu},u=S.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return S.useEffect(()=>u,[u]),S.useEffect(()=>{const e=c.current;return()=>{window.clearTimeout(e),d(null)}},[c,d]),s.jsx(ye,{asChild:!0,...l,children:s.jsx(ze,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":sn(t.open),...e,ref:M(n,a.onTriggerChange),onClick:n=>{var r;null==(r=e.onClick)||r.call(e,n),e.disabled||n.defaultPrevented||(n.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:p(e.onPointerMove,ln(n=>{o.onItemEnter(n),n.defaultPrevented||e.disabled||t.open||i.current||(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:p(e.onPointerLeave,ln(e=>{var n,r;u();const a=null==(n=t.content)?void 0:n.getBoundingClientRect();if(a){const n=null==(r=t.content)?void 0:r.dataset.side,s="right"===n,i=s?-5:5,d=a[s?"left":"right"],l=a[s?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:d,y:a.top},{x:l,y:a.top},{x:l,y:a.bottom},{x:d,y:a.bottom}],side:n}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:p(e.onKeyDown,n=>{var a;const s=""!==o.searchRef.current;e.disabled||s&&" "===n.key||ie[r.dir].includes(n.key)&&(t.onOpenChange(!0),null==(a=t.content)||a.focus(),n.preventDefault())})})})});rn.displayName=tn;var an="MenuSubContent",on=S.forwardRef((e,n)=>{const t=Me(De,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,o=we(De,e.__scopeMenu),i=be(De,e.__scopeMenu),c=nn(an,e.__scopeMenu),l=S.useRef(null),f=u(n,l);return s.jsx(le.Provider,{scope:e.__scopeMenu,children:s.jsx(d,{present:r||o.open,children:s.jsx(le.Slot,{scope:e.__scopeMenu,children:s.jsx(Se,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:f,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var n;i.isUsingKeyboardRef.current&&(null==(n=l.current)||n.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:p(e.onFocusOutside,e=>{e.target!==c.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:p(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:p(e.onKeyDown,e=>{var n;const t=e.currentTarget.contains(e.target),r=ce[i.dir].includes(e.key);t&&r&&(o.onOpenChange(!1),null==(n=c.trigger)||n.focus(),e.preventDefault())})})})})})});function sn(e){return e?"open":"closed"}function cn(e){return"indeterminate"===e}function dn(e){return cn(e)?"indeterminate":e?"checked":"unchecked"}function ln(e){return n=>"mouse"===n.pointerType?e(n):void 0}on.displayName=an;var un=je,pn=ye,fn=Ce,mn=Pe,hn=Te,xn=Fe,vn=Ke,wn=Ge,gn=Xe,bn=He,jn=Ze,yn=Je,_n=Qe,Nn=rn,Mn=on,Cn="DropdownMenu",[Dn,Rn]=e(Cn,[me]),kn=me(),[Pn,On]=Dn(Cn),En=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:a,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,d=kn(n),l=S.useRef(null),[u,p]=C({prop:a,defaultProp:o??!1,onChange:i,caller:Cn});return s.jsx(Pn,{scope:n,triggerId:D(),triggerRef:l,contentId:D(),open:u,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(e=>!e),[p]),modal:c,children:s.jsx(un,{...d,open:u,onOpenChange:p,dir:r,modal:c,children:t})})};En.displayName=Cn;var In="DropdownMenuTrigger",Sn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...a}=e,o=On(In,t),i=kn(t);return s.jsx(pn,{asChild:!0,...i,children:s.jsx(h.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:M(n,o.triggerRef),onPointerDown:p(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:p(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Sn.displayName=In;var Tn=e=>{const{__scopeDropdownMenu:n,...t}=e,r=kn(n);return s.jsx(fn,{...r,...t})};Tn.displayName="DropdownMenuPortal";var Fn="DropdownMenuContent",Ln=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=On(Fn,t),o=kn(t),i=S.useRef(!1);return s.jsx(mn,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:n,onCloseAutoFocus:p(e.onCloseAutoFocus,e=>{var n;i.current||null==(n=a.triggerRef.current)||n.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:p(e.onInteractOutside,e=>{const n=e.detail.originalEvent,t=0===n.button&&!0===n.ctrlKey,r=2===n.button||t;a.modal&&!r||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ln.displayName=Fn;S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(hn,{...a,...r,ref:n})}).displayName="DropdownMenuGroup";var An=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(xn,{...a,...r,ref:n})});An.displayName="DropdownMenuLabel";var Kn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(vn,{...a,...r,ref:n})});Kn.displayName="DropdownMenuItem";var zn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(wn,{...a,...r,ref:n})});zn.displayName="DropdownMenuCheckboxItem";S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(gn,{...a,...r,ref:n})}).displayName="DropdownMenuRadioGroup";var Gn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(bn,{...a,...r,ref:n})});Gn.displayName="DropdownMenuRadioItem";var Un=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(jn,{...a,...r,ref:n})});Un.displayName="DropdownMenuItemIndicator";var Vn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(yn,{...a,...r,ref:n})});Vn.displayName="DropdownMenuSeparator";S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(_n,{...a,...r,ref:n})}).displayName="DropdownMenuArrow";var Bn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(Nn,{...a,...r,ref:n})});Bn.displayName="DropdownMenuSubTrigger";var Xn=S.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=kn(t);return s.jsx(Mn,{...a,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Xn.displayName="DropdownMenuSubContent";var $n=Tn,Hn=Ln,Wn=An,qn=Kn,Yn=zn,Zn=Gn,Jn=Un,Qn=Vn,et=Bn,nt=Xn;const tt=En,rt=Sn;T.forwardRef(({className:e,inset:n,children:t,...r},a)=>s.jsxs(et,{ref:a,className:R("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",e),...r,children:[t,s.jsx(B,{className:"ml-auto h-4 w-4"})]})).displayName=et.displayName;T.forwardRef(({className:e,...n},t)=>s.jsx(nt,{ref:t,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})).displayName=nt.displayName;const at=T.forwardRef(({className:e,sideOffset:n=4,...t},r)=>s.jsx($n,{children:s.jsx(Hn,{ref:r,sideOffset:n,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));at.displayName=Hn.displayName;const ot=T.forwardRef(({className:e,inset:n,...t},r)=>s.jsx(qn,{ref:r,className:R("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",e),...t}));ot.displayName=qn.displayName;T.forwardRef(({className:e,children:n,checked:t,...r},a)=>s.jsxs(Yn,{ref:a,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Jn,{children:s.jsx(X,{className:"h-4 w-4"})})}),n]})).displayName=Yn.displayName;T.forwardRef(({className:e,children:n,...t},r)=>s.jsxs(Zn,{ref:r,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Jn,{children:s.jsx($,{className:"h-2 w-2 fill-current"})})}),n]})).displayName=Zn.displayName;T.forwardRef(({className:e,inset:n,...t},r)=>s.jsx(Wn,{ref:r,className:R("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...t})).displayName=Wn.displayName;T.forwardRef(({className:e,...n},t)=>s.jsx(Qn,{ref:t,className:R("-mx-1 my-1 h-px bg-muted",e),...n})).displayName=Qn.displayName;const st=({ad:e})=>{const{toast:n}=k(),t=(e,t)=>{n({title:"⚠️ Salir de la app",description:"Estás saliendo de la aplicación para contactar al anunciante.",duration:3e3}),setTimeout(()=>{switch(e){case"phone":window.location.href=`tel:${t}`;break;case"email":window.location.href=`mailto:${t}`;break;case"website":window.open(t,"_blank");break;case"whatsapp":window.open(`https://wa.me/${t.replace(/[^0-9]/g,"")}`,"_blank")}},1500)},r=["bg-gradient-to-br from-blue-500 to-purple-600","bg-gradient-to-br from-green-500 to-teal-600","bg-gradient-to-br from-orange-500 to-red-600","bg-gradient-to-br from-pink-500 to-rose-600","bg-gradient-to-br from-indigo-500 to-blue-600"],a=r[Math.floor(Math.random()*r.length)];return s.jsxs("div",{className:`${a} rounded-lg p-4 text-white relative overflow-hidden`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"bg-white/20 px-2 py-1 rounded-full",children:s.jsx("span",{className:"text-xs font-medium",children:"PUBLICIDAD"})}),s.jsx(H,{className:"w-4 h-4 opacity-70"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-1",children:e.title||"Anuncio"}),s.jsx("p",{className:"text-white/90 text-sm mb-2",children:e.description||"Descripción del anuncio"}),e.company_info&&s.jsx("p",{className:"text-white/80 text-xs",children:e.company_info})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.contact_phone&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("phone",e.contact_phone),children:[s.jsx(W,{className:"w-3 h-3 mr-1"}),"Llamar"]}),e.contact_email&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("email",e.contact_email),children:[s.jsx(q,{className:"w-3 h-3 mr-1"}),"Email"]}),e.contact_website&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("website",e.contact_website),children:[s.jsx(Y,{className:"w-3 h-3 mr-1"}),"Web"]}),e.contact_whatsapp&&s.jsxs(P,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0 text-xs",onClick:()=>t("whatsapp",e.contact_whatsapp),children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]})]})]})]})},it=()=>{const{user:e}=O(),{toast:n}=k();re();const[t,r]=S.useState([]),[a,o]=S.useState([]),[i,c]=S.useState([]),[d,l]=S.useState(!0),[u,p]=S.useState(null),[f,m]=S.useState(!1),h=S.useCallback(async()=>{if(null==e?void 0:e.uid)try{l(!0);const e=F(E,"posts"),n=L(e,A(20)),t=await K(n),a=await Promise.all(t.docs.map(async e=>{const n={id:e.id,...e.data()};try{const e=z(E,"profiles",n.user_id),t=await G(e);t.exists()&&(n.author={id:t.id,...t.data()})}catch(t){}try{const e=F(E,"post_likes"),t=L(e,U("post_id","==",n.id)),r=await K(t);n.likes=r.docs.map(e=>({id:e.id,...e.data()}))}catch(t){n.likes=[]}return n})),s=F(E,"advertisements"),i=L(s,U("status","==","active"),A(10)),d=(await K(i)).docs.map(e=>({id:e.id,...e.data(),type:"ad",source:"advertising_portal"}));r(a),o(d);const u=[];let p=0;for(let r=0;r<a.length;r+=6){const e=a.slice(r,r+6);if(u.push(...e),p<d.length){const e=d.slice(p,p+2);u.push(...e),p+=2}}c(u)}catch(n){c([])}finally{l(!1)}},[null==e?void 0:e.uid,n]);S.useEffect(()=>{h()},[h]);return d?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(Z,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Cargando publicaciones..."})]}):0===i.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(J,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay publicaciones"}),s.jsx("p",{className:"text-muted-foreground",children:"Sé el primero en crear contenido."})]}):s.jsxs("div",{className:"px-4 pb-20",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.map((t,r)=>{var a,o,i,c;return s.jsx("div",{className:"space-y-3",children:"ad"===t.type||t.website?s.jsx(st,{ad:t}):s.jsxs("div",{className:"bg-card rounded-lg overflow-hidden border",children:[s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:(null==(a=t.author)?void 0:a.profile_picture_url)||"/pwa-512x512.png",alt:(null==(o=t.author)?void 0:o.alias)||"Usuario",className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:(null==(i=t.author)?void 0:i.alias)||"Usuario"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.created_at?new Date(t.created_at).toLocaleDateString():"Ahora"})]})]}),s.jsxs(tt,{children:[s.jsx(rt,{asChild:!0,children:s.jsx(P,{variant:"ghost",size:"sm",children:s.jsx(Q,{className:"w-4 h-4"})})}),s.jsxs(at,{align:"end",className:"card-glass",children:[s.jsxs(ot,{onClick:()=>(async t=>{if(null==e?void 0:e.uid)try{const r=F(E,"post_likes");await V(r,{post_id:t,user_id:e.uid,created_at:new Date}),n({title:"Me gusta",description:"Has dado me gusta a esta publicación."}),h()}catch(r){n({variant:"destructive",title:"Error",description:"No se pudo dar me gusta a la publicación."})}})(t.id),className:"flex items-center gap-2",children:[s.jsx(ee,{className:"w-4 h-4"}),s.jsx("span",{children:"Me gusta"})]}),s.jsxs(ot,{onClick:()=>{return e=t.author,p(e),void m(!0);var e},className:"flex items-center gap-2",children:[s.jsx(ne,{className:"w-4 h-4"}),s.jsx("span",{children:"Mensaje"})]}),s.jsxs(ot,{onClick:()=>{var r;return(async t=>{if(null==e?void 0:e.uid)try{const r=F(E,"user_likes");await V(r,{user_id:e.uid,liked_user_id:t,created_at:new Date}),n({title:"Perfil guardado",description:"Has guardado este perfil en tu lista."})}catch(r){n({variant:"destructive",title:"Error",description:"No se pudo guardar el perfil."})}})(null==(r=t.author)?void 0:r.id)},className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar perfil"})]})]})]})]}),s.jsxs("div",{children:[t.image_url&&s.jsx("img",{src:t.image_url,alt:"Publicación",className:"w-full h-48 object-cover"}),t.video_url&&s.jsx("video",{src:t.video_url,controls:!0,className:"w-full h-48 object-cover"}),t.text&&s.jsx("p",{className:"p-3 text-sm",children:t.text})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ee,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(c=t.likes)?void 0:c.length)||0," me gusta"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Usa el menú ⋯ para más opciones"})]})]})},t.id||r)})}),f&&u&&s.jsx(I,{profile:u,onClose:()=>{m(!1),p(null)}})]})};export{it as default};
